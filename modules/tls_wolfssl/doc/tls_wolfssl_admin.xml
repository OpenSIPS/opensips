<!-- Module User's Guide -->

<chapter>

	<title>&adminguide;</title>

	<section id="overview" xreflabel="Overview">
	<title>Overview</title>
	<para>
		This module implements TLS operations using the
		<ulink url="https://www.wolfssl.com/">
		<citetitle>wolfSSL</citetitle></ulink> libarary. It provides the primitives
		required by the <emphasis>tls_mgm</emphasis> module in order to expose a
		higher-level API used by TLS-based protocol modules like
		<emphasis>proto_tls</emphasis> or <emphasis>proto_wss</emphasis>.
	</para>
	<para>
		The <emphasis>wolfSSL</emphasis> library is statically-linked and bundled
		with this module so no installation or external dependency is required.
	</para>
	</section>

	<section id="dependencies" xreflabel="Dependencies">
	<title>Dependencies</title>
	<section>
		<title>Compilation</title>
		<para>
		The following packages must be installed before compiling this module:
			<itemizedlist>
			<listitem>
			<para>
				<emphasis>autoconf</emphasis>.
			</para>
			</listitem>
			<listitem>
			<para>
				<emphasis>automake</emphasis>.
			</para>
			</listitem>
			<listitem>
			<para>
				<emphasis>libtool</emphasis>.
			</para>
			</listitem>
			</itemizedlist>
		</para>
	</section>

	<section>
		<title>&osips; Modules</title>
		<para>
		The following modules must be loaded before this module:
			<itemizedlist>
			<listitem>
			<para>
				<emphasis>None</emphasis>.
			</para>
			</listitem>
			</itemizedlist>
		</para>
	</section>

	<section>
		<title>External Libraries or Applications</title>
		<para>
		The following libraries or applications must be installed before
		running &osips; with this module loaded:
			<itemizedlist>
			<listitem>
			<para>
				<emphasis>None</emphasis>.
			</para>
			</listitem>
			</itemizedlist>
		</para>
	</section>
	</section>

	<section>
		<title>&osips; Exported parameters</title>
		<para>
		All these parameters can be used from the opensips.cfg file,
		to configure the behavior of &osips;-TLS.
		</para>

		<section id="param_try_use_ktls" xreflabel="try_use_ktls">
			<title><varname>try_use_ktls</varname> (integer)</title>
			<para>
			Try to use KTLS for RX and TX ( dependent on Kernel support and loaded modules https://docs.kernel.org/networking/tls-offload.htm )
			If kernel support is not found, or if the cypher attempted to be used is not supported ( only AES-GCM for now ), then SSL operations will continue to be done in user-space.
			IF NIC supports SSL offloading, that can also be enabled without any changes needed to the module https://docs.nvidia.com/doca/sdk/ktls-offloads/index.html
			</para>
			<para>
				Default value is <emphasis>0</emphasis>.
			</para>
			<example>
				<title>Set <varname>try_use_ktls</varname> variable</title>
				<programlisting format="linespecific">
...
modparam("tls_wolfssl", "try_use_ktls", "0")
...
				</programlisting>
			</example>
		</section>
	</section>


</chapter>
