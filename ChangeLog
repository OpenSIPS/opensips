
2010-12-20 21:25:49  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [7602] :

	fixed compile warnings on Solaris


2010-12-20 21:22:47  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [7601] :

	- more fixing for BSD compile


2010-12-20 21:16:53  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [7600] :

	- fixed BSD compile warnings


2010-12-20 21:13:23  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [7599] :

	- DB update scrips (in 1.6 family)


2010-12-20 20:48:26  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [7597] :

	- fixed solaris compiling
	- fixed license


2010-12-20 20:43:29  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [7596] :

	fixed missing include on BSD 


2010-12-20 20:42:18  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [7595] :

	removed dep files from SVN


2010-12-20 20:40:13  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [7594] :

	- fixed compile warnings on xxxBSD


2010-12-20 20:22:19  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [7593] :

	- removed dialplan from the default modules


2010-12-20 19:54:37  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [7591] :

	- fixed xxxBSD compile warning


2010-12-20 19:37:46  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [7590] :

	fixed compile warning


2010-12-20 19:10:31  Anca Vamanu, <anca at voice-system dot ro> 
	* [7587] :

	- fix: change the meaning of expires_offset parameter( do not subtract if from the returned expires, but increase the period to store the subscription with it), reported in bug #3069214


2010-12-20 16:58:44  Anca Vamanu, <anca at voice-system dot ro> 
	* [7584] :

	- fixed crash in error case


2010-12-20 16:32:28  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [7582] :

	README files updated


2010-12-20 16:14:57  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [7579] :

	- docs update



2010-12-20 16:09:55  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [7578] :

	- docs fixed


2010-12-20 15:56:51  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [7576] :

	-removed bogus test on RURI when input is actually give via pvars.
	 Credits go to Amduscias (IRC)  


2010-12-20 15:31:57  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [7575] :

	fix some spacing


2010-12-20 15:21:04  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [7573] :

	- small backport from (trunk) - compile warning


2010-12-20 13:26:09  Anca Vamanu, <anca at voice-system dot ro> 
	* [7572] :

	- fixed expires value notification at timeout(reported in bug #3140296)


2010-12-20 10:59:13  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [7570] :

	backport from truk (rev 7569):
	- do not use a static holder for parameters when calling the TM callbacks - in some b2bua scenarios, the TM callback may be nasted, and parameters gets overwriten.
	  Reported by Ovidiu Sas.


2010-12-17 19:56:26  Razvan Crainea <razvancrainea at opensips dot org> 
	* [7568] :

	Backported from trunk(7567):
	Removed "detect_rtp_idle" module parameter - notifications can be enabled
	by setting the "rtpp_notify_socket" module parameter.
	rtpproxy_offer and rtpproxy_answer can now receive 'n' flag as a parameter
	to activate timeout notifications for a certain call.


2010-12-17 17:28:57  Anca Vamanu, <anca at voice-system dot ro> 
	* [7565] :

	- fix crash in a buggy uac behavior situation


2010-12-17 14:49:39  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [7564] :

	- fixed bogus line introduced with the prev commit



2010-12-17 10:41:23  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [7562] :

	backport from trunk (rev #7561):
	- fixed handling of WANT_READ / WANT_WRITE events in TLS code. Description:
	  
	tls_blocking_write() polls for both POLLOUT and POLLIN at the same time. Normally, socket is ready for write all the time. It causes poll() at line 765 returned immediately.

	When using t_relay("tls:xxx") in script, I always get "too many retries with no operation" error message because poll() function returns immediately.

	I read the OpenSSL doc http://www.openssl.org/docs/ssl/SSL_connect.html and http://www.openssl.org/docs/ssl/SSL_get_error.html#item_SSL_ERROR_WANT_READ.
	When SSL_connect(), SSL_read(), or SSL_write() return SSL_ERROR_WANT_READ, tls_blocking_write() should poll for POLLIN only. And when they return SSL_ERROR_WANT_WRITE, tls_blocking_write() should poll for POLLOUT only.

	I think this bug also makes CPU usage to be 100% while looping.


	Credits for the fix go to Worawit Wang.

	Closes Bug report #3061895
	Closes Patch #3118263


2010-12-17 10:26:31  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [7560] :

	backport from trunk (rev #7559):
	- fixed pcre lib detection on Solaris
	  Credits go to Sergio Gutierrez
	  Closes patch #3138136


2010-12-17 10:08:29  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [7558] :

	backport from trunk (rev #7557):
	- fixed several issues with prepared statements when dealing wiht DB reconnect events.
	  Credits go to Stanislaw Pitucha.
	  Closes bug report #3039943


2010-12-16 20:09:27  Anca Vamanu, <anca at voice-system dot ro> 
	* [7556] :

	- fixed smth in last commit


2010-12-16 18:53:08  Anca Vamanu, <anca at voice-system dot ro> 
	* [7555] :

	- fixed crash when presence module was used in library mode (reported by #3138571)


2010-12-16 17:51:28  Ovidiu Sas <osas at voipembedded dot com> 
	* [7553] :

	backport: Revision 7232, 7233

	nathelper: removing obsolete force_rtp_proxy function
	 - force_rtp_proxy is obsolete by rtpproxy_offer/rtpproxy_answer
	nathelper: obsolete flag 's' removed



2010-12-16 17:12:51  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [7552] :

	- fixed bogus include


2010-12-16 16:29:36  Razvan Crainea <razvancrainea at opensips dot org> 
	* [7551] :

	Fixed small bug introduced in the last commit


2010-12-16 12:43:11  Anca Vamanu, <anca at voice-system dot ro> 
	* [7548] :

	- fixed possible mem leak


2010-12-15 19:20:44  Anca Vamanu, <anca at voice-system dot ro> 
	* [7547] :

	Backported from trunk (7546):
	implemented a listener for rtpproxy timeout notifications
	added a patch for rtpproxy with a new timer for session establishment


2010-12-15 18:06:55  Anca Vamanu, <anca at voice-system dot ro> 
	* [7545] :

	- fixed dialog info version (reported by Ovidiu Sas)


2010-12-15 13:51:58  Anca Vamanu, <anca at voice-system dot ro> 
	* [7542] :

	- fix adding xmlns attribute twice (credits to Andrew Mortensen, admorten at isc.upenn.edu)


2010-12-15 12:47:33  Anca Vamanu, <anca at voice-system dot ro> 
	* [7540] :

	- fixes in bla (reported by University of Pennsylvania, ISC/Networking & Telecom Dep.)
		- increase version per watcher
		- correct aggregation of dialogs


2010-12-14 11:40:15  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [7538] :

	- added missing files from previous backports


2010-12-14 11:37:22  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [7537] :

	backport from trunk (rev 7536):
	- expose internal ret code for authentication function - you can see in the script if the failure was because of an error or because of auth rejected.
	- do not log as error if some RADIUS AVP from response set were not found


2010-12-13 21:45:27  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [7535] :

	- docs updated


2010-12-13 21:21:24  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [7534] :

	-fixed handling of sstatistics when they are disabled


2010-12-13 21:19:08  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [7533] :

	- new fixup function added (internal usage)


2010-12-13 21:15:25  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [7532] :

	backport from trunk (rev #7295):
	Added a new pseudovariable called 'env', that provides access to environment variables.


2010-12-13 21:11:50  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [7531] :

	backport from trunk (rev #7292):
	added a new core function, construct_uri which builds a sip uri based on the protocol, username, domain, port and extra params that it receives



2010-12-13 21:07:53  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [7530] :

	backport from trunk (rev #7291):
	Added a new pseudovariable called 'argv', that allows reading arguments specified with '-o' option in command line


2010-12-13 19:36:02  Ovidiu Sas <osas at voipembedded dot com> 
	* [7529] :

	presence_callinfo: update svn ignore list



2010-12-13 19:35:09  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [7528] :

	- part of previous backports (tm related)


2010-12-13 19:34:20  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [7527] :

	- fix compiling


2010-12-13 19:33:34  Ovidiu Sas <osas at voipembedded dot com> 
	* [7526] :

	bakport: Revision 7482

	presence_callinfo: new module



2010-12-13 18:56:03  Ovidiu Sas <osas at voipembedded dot com> 
	* [7525] :

	backport: Revision 7524

	presence: print a warning in the logs for a failed NOTIFY



2010-12-13 18:31:19  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [7522] :

	backport from trunk (rev 7248):
	- if next_branches() returns true, returns 1 if other branches are still pending and return 2 if no other branches are left for future processing - shortly, if 2: this is the last branch, if 1: other will follow


2010-12-13 18:29:13  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [7521] :

	backport from trunk (rev #7243)
	moved time recurrence functions in core


2010-12-13 18:18:12  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [7520] :

	backport from trunk (rev #7228):
	- fixed asyc handler for mi_datagram module - the t_uac_dlg function was never returning a reply as some internal sockets were not properly shared (inherited) at startup.
	  Reported and tested by Vallimamod Abdullah
	  Closes bug 3071925


2010-12-13 18:15:00  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [7519] :

	backport from trunk (rev #6564 & #7219):

	Function to estimate fetch value for db

	better comment
	  Credits go to Stanislaw Pitucha


2010-12-13 18:06:07  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [7518] :

	backport from trunk (rev 7212):
	replaced UINT4 with uint32_t in rad_avp_add() function


2010-12-13 18:02:46  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [7517] :

	backport from trunk (rev #7183):
	Added posibility to set destination domain and destination port from script
	You can now set $dd and $dp


2010-12-13 18:00:22  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [7516] :

	backport from trunk (rev #7176):
	fixed wrong check for IPv6


2010-12-13 17:57:00  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [7515] :

	backport from trunk (rev #7140):

	Added bitwise operations support for string variables. 
	To be used with the new IP transformations in binary format.


2010-12-13 17:54:58  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [7514] :

	backport from trunk (rev 7134):
	Added 3 new transformations : IP, SDP and CSV


2010-12-13 17:48:51  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [7513] :

	backport from trunk:

	r7038
	Exposed T pointer to on_req tm callbacks

	r7131
	added t_add_hdrs() function to add a custom header to all internally generated requests from a transaction (cancels, acks)

	r7320
	proper cleanup in case of error - reset the global transaction pointer if we fail to creat the transaction
	Credits go to Kennard White

	r7328
	Added a new pseudo variable called 'bavp', that can have different values for each branch

	r7352
	- fixed bug in len calculation
	  Credits go to Kennard Whit


2010-12-13 17:28:55  Vlad Paiu <vladpaiu at opensips dot org> 
	* [7512] :

	Backported from trunk :

	Added a new exported function to the dialog module, fix_route_dialog(), which forces an in-dialog SIP message to contain the ruri, route headers and dst_uri, as specified by the internal data of the dialog it belongs to. The function will prevent the existence of bogus injected in-dialog requests ( like malicious BYEs )
	Updated the validate_dialog() and fix_route_dialog() exported functions, so that they can now handle all types of routing ( loose to loose, loose to strict, strict to loose and strict to strict )



2010-12-13 17:02:36  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [7511] :

	backport from trunk (rev #7109):
	Fixed missing include directive


2010-12-13 17:01:14  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [7510] :

	backport from trunk (rev 7107):
	Added priority to RR callback functions




2010-12-13 15:05:59  Anca Vamanu, <anca at voice-system dot ro> 
	* [7508] :

	- fixed - wrong definition of process_body function for events xcap-diff and message-summary


2010-12-10 21:23:39  Ovidiu Sas <osas at voipembedded dot com> 
	* [7506] :

	b2b: adding the dbtext and db_berkley b2b_entities and b2b_logic files



2010-12-10 21:21:05  Ovidiu Sas <osas at voipembedded dot com> 
	* [7505] :

	presence: set the default value to '' for extra_hdrs field from presentity table



2010-12-10 18:15:29  Anca Vamanu, <anca at voice-system dot ro> 
	* [7503] :

	- fixed crash in prepare statements (thanks to Duane Larson for help with debugging)


2010-12-09 20:13:06  Anca Vamanu, <anca at voice-system dot ro> 
	* [7501] :

	- fixed returning expired record


2010-12-09 17:27:40  Razvan Crainea <razvancrainea at opensips dot org> 
	* [7499] :

	Backported from trunk (7139):
	ACC linked with Dialog to generate CDRs


2010-12-08 18:05:22  Ovidiu Sas <osas at voipembedded dot com> 
	* [7493] :

	pua_bla: whitespace removal



2010-12-08 17:53:20  Ovidiu Sas <osas at voipembedded dot com> 
	* [7492] :

	pua_bla: whitespace removal



2010-12-08 17:06:17  Ovidiu Sas <osas at voipembedded dot com> 
	* [7491] :

	backport: Revision 7264

	- fixed body processing for 'dialog' event ( also applied patch from Vallimamod ABDULLAH)
	- fixed flags operation in presence



2010-12-08 16:44:21  Ovidiu Sas <osas at voipembedded dot com> 
	* [7490] :

	backport: Revision 7188

	- applied patch #3058434 from Kennard White - a module parameter that enables including 
	closed status body in Notify when no published info is found for the user
	- fixed wrong order of operations when cleaning expired published



2010-12-08 16:24:10  Ovidiu Sas <osas at voipembedded dot com> 
	* [7489] :

	backport: Revision 7423

	- applied patch #3116646, update contact in database at sequential Subscribe (credits to 
	Walter Doeke
	s)



2010-12-08 16:06:32  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [7488] :

	backport from trunk (rev #7487)
	- fixed (another) bug in replacing the contact by fix_nated_contact()


2010-12-08 13:46:09  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [7486] :

	backport from trunk (rev #7485):
	- fixed bug in locking dialog while printing it via MI
	- included the dialog vals and profiles to be printed as part of dialog context (via dlg_list_ctx MI func)


2010-12-07 19:48:33  Ovidiu Sas <osas at voipembedded dot com> 
	* [7481] :

	backport: Revision 7448

	textops: new function is_audio_on_hold()
	 - returns true if at least one 'audio' stream is on hold
	 - only 'audio' streams are checked



2010-12-07 17:10:10  Ovidiu Sas <osas at voipembedded dot com> 
	* [7479] :

	backport: Revision 7426 7427

	presence: fix extra headers presentity update
	presence: handle body only if a 'Content-Type' header is defined for the processed event
	 - save body from PUBLISH only if Content-Type is defined
	 - send body in NOTIFY only if Content-Type is defined



2010-12-07 17:03:44  Ovidiu Sas <osas at voipembedded dot com> 
	* [7478] :

	backport: Revision 7319 7327 7329 7330 7331

	presence: support for extra headers in NOTIFY
	 - extra headers received in PUBLISH requests can be
	stored and sent to the subscrber via NOTIFY requests

	presence: new 'mandatory_body' flag
	 - distinguish between presence events that requires or not a body

	presence: save the new 'mandatory_body' flag

	presence: the list of extra headers is provided by each event
	          during the event registration process
	 - the list of headers must be provided as a <null> terminated list
	 - example:
	str extra_hdrs[] = {
	        str_init("Extra_header_1"),
	        str_init("Extra_header_2"),
	        {NULL,0},
	};

	presence: new callback: build_empty_pres_info
	 - build_empty_pres_info callback allows a module
	to provide specific dummy information for a
	specific event when no information is available
	in the presentity table.



2010-12-07 16:25:19  Ovidiu Sas <osas at voipembedded dot com> 
	* [7477] :

	backport: Revision 7424 7428 7429

	pua: define load_pua_api() for easier module api loading
	pua: adding "call-info" to the list of known events
	pua: reject new PUBLISH requests only if a 'content-type'
	     is defined for the event being processed



2010-12-07 15:30:07  Razvan Crainea <razvancrainea at opensips dot org> 
	* [7476] :

	backport from trunk (rev 7475):
	readers-writers synchronization mechanism


2010-12-07 12:40:25  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [7474] :

	- more docs updated


2010-12-07 12:15:11  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [7472] :

	- docs update


2010-12-07 06:39:58  Ovidiu Sas <osas at voipembedded dot com> 
	* [7470] :

	backport: Revision: 7348

	parser: adding "call-info" and "line-seize" to the list of known events



2010-12-07 04:03:49  Ovidiu Sas <osas at voipembedded dot com> 
	* [7469] :

	backport: Revision: 7442

	sdp parser: detect on hold media during sdp parsing



2010-12-07 02:25:37  Ovidiu Sas <osas at voipembedded dot com> 
	* [7468] :

	backport: Revision: 7127

	Reorganizing the core SDP parser:
	 - sendrecv and ptime are now session attributes
	 - parse connection and origin IP
	 - sdp helper logs are now configurable
	 - parse rtcp attributes



2010-12-06 17:20:12  Anca Vamanu, <anca at voice-system dot ro> 
	* [7465] :

	- fixed compile warning


2010-12-06 15:33:22  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [7464] :

	backport from trunk (rev #7463):
	- Adding Call-Info header to the list of known opensips headers.

	  Credits go to Ovidiu Sas
	  Closes patch 3123647


2010-12-03 17:05:29  Anca Vamanu, <anca at voice-system dot ro> 
	* [7462] :

	- added missing file


2010-12-03 14:50:40  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [7458] :

	backport from truk (rev #7457):
	- fixed test on dialog state when using get_dialog_info() 
	  Credits go to Vallimamod Abdullah
	  Closes bug report 3095064


2010-12-03 14:44:42  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [7456] :

	backport from trunk (rev 7454):
	- fixed typos in log messages


2010-12-03 14:37:13  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [7455] :

	backport from trunk (rev 7453):
	-avoid table version check on DB drivers which do not support QUERY/SELECT ops (like whn using flatstore which is an INSERT only driver)



2010-12-03 13:34:41  Anca Vamanu, <anca at voice-system dot ro> 
	* [7452] :

	- backport from trunk
		- changes in the internal structures of b2b_logic
		- export api from b2b_logic to be used by other modules
		- fixes in b2b_logic and b2b_entitie


2010-12-02 18:33:50  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [7450] :

	backport from trunk (rev #7449 ):
	bug fix: do not use same prepared statement for 2 different types of queries



2010-12-02 12:27:17  Anca Vamanu, <anca at voice-system dot ro> 
	* [7444] :

	- use the new ruri if set in top hiding


2010-12-01 14:13:15  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [7441] :

	- dbschema re-generated


2010-12-01 14:12:22  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [7440] :

	backport from trunk (rev #7085 + #7086):
	- type field added to aaa_map structure
	-type of RADIUS AVP detected when AVP looked into dictionary
	-if type is IPADDR or INTEGER and value is received as string, do the proper conversion

	based on an patch submitted by Matt Lehner
	Closes patch 3013565


2010-11-29 06:23:51  Di-Shi Sun <di-shi at transnexus dot com> 
	* [7430] :

	Added support to append destination network ID by different ways.


2010-11-25 14:46:44  Sergio Gutierrez <saguti at gmail dot com> 
	* [7419] :

	- Typo in module documentation. Credits go to Duane Larson who reported through mail list. Backport from trunk, rev 7417.


2010-11-23 19:14:10  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [7410] :

	fixed vendor ID when searching radius AVP in radius replies


2010-11-19 00:54:08  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [7405] :

	backport from trunk (rev #7404):
	- added a new statistic to provide access to the opensips internal timestamp


2010-11-18 12:22:26  Anca Vamanu, <anca at voice-system dot ro> 
	* [7403] :

	- fixed params handling for b2b_init_request (wrong report of too few parameters and crash)


2010-11-16 17:35:35  Anca Vamanu, <anca at voice-system dot ro> 
	* [7386] :

	- fix - set relaied_branch before calling the callbacks (it was not working with dialog when no provisional reply was received)


2010-11-15 19:52:43  Anca Vamanu, <anca at voice-system dot ro> 
	* [7383] :

	- fixed crash at startup due to wrong module loading order


2010-11-11 12:41:33  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [7369] :

	backport from trunk (rev 7367):
	- fixed bogus db handling (reset handler when closing connection)



2010-11-11 12:40:44  Anca Vamanu, <anca at voice-system dot ro> 
	* [7368] :

	- fixed partial commit


2010-11-11 12:27:14  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [7366] :

	backport from trunk (rev #7365):
	- fixed bogus db_close at destroy time 


2010-11-10 22:15:10  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [7364] :

	backport from trunk (rev #7363):
	- fixed bug when URI contains parameters


2010-11-10 14:05:56  Anca Vamanu, <anca at voice-system dot ro> 
	* [7361] :

	- fixes for UPDATE and crash 


2010-11-10 12:18:21  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [7359] :

	backport from trunk (rev 7356):
	fixed probing condition


2010-11-08 14:05:15  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [7355] :

	backport from trunk (rev #7354):
	- more checks on connections



2010-11-04 11:34:10  Anca Vamanu, <anca at voice-system dot ro> 
	* [7351] :

	- quite down sl and tm module when attempting to send a reply for ACK


2010-11-03 14:43:38  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [7347] :

	backport from trunk (rev #7346):
	bug fixed : if nonce reused, return "stale" indicater in the challenge.
	Credits for report go to Kennard White 


2010-11-03 13:08:58  Anca Vamanu, <anca at voice-system dot ro> 
	* [7345] :

	- fixed - strip uri from header if it contains '<' '>', fixed interpretation of the scenario to prevent atempting to bridge one entity with itself.


2010-10-29 01:02:46  Ovidiu Sas <osas at voipembedded dot com> 
	* [7337] :

	opensipsctlrc: add b2b to the list of EXTRA_MODULES

	 - backport from trunk: Revision: 7323
	 - allow b2b tables to be installed via opensipsdbctl script



2010-10-28 12:54:39  Anca Vamanu, <anca at voice-system dot ro> 
	* [7336] :

	- fix - update contact uri pointer in message structure


2010-10-27 15:04:49  Anca Vamanu, <anca at voice-system dot ro> 
	* [7334] :

	- added the possibility to terminate a dialog from another module


2010-10-26 14:05:07  Anca Vamanu, <anca at voice-system dot ro> 
	* [7326] :

	- some fixes backported from trunk


2010-10-22 12:54:45  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [7318] :

	backport from truk ( rev #7317):
	- fixed passing the TO-TAG param if already provided via t_uac_dlg


2010-10-20 20:42:39  Anca Vamanu, <anca at voice-system dot ro> 
	* [7316] :

	- fixed wrong key reference


2010-10-20 20:36:17  Anca Vamanu, <anca at voice-system dot ro> 
	* [7313] :

	- completed the documentation ( -S option), thanks to Norman Brandinger


2010-10-19 16:35:32  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [7310] :

	backport from trunk (rev #7249):
	- fix_nated_contact() may take as optional param a list of URI params to be added to Contact URI




2010-10-19 12:02:04  Anca Vamanu, <anca at voice-system dot ro> 
	* [7309] :

	- fix - omission in the latest fix


2010-10-18 16:07:38  Anca Vamanu, <anca at voice-system dot ro> 
	* [7307] :

	- small fix in send_request


2010-10-18 12:57:35  Anca Vamanu, <anca at voice-system dot ro> 
	* [7305] :

	- fixed omission in the list of methods allowed in early dialog state


2010-10-18 11:59:24  Marc Leurent <lftsy at leurent dot eu> 
	* [7302] :

	* Mon Oct 18 2010 Marc Leurent <marc.leurent@vtx-telecom.ch>
	- Add missing dependencies pcre-devel for compilation
	- Xlog Module has been merged into core.


2010-10-15 19:34:55  Anca Vamanu, <anca at voice-system dot ro> 
	* [7301] :

	- fixes: - don't delete the logic record if sending request or reply fails (might cause missing BYE), fixes for UPDATE sent by the caller


2010-10-15 18:15:19  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [7299] :

	backport from trunk (rev #7298):
	statistic functions take as param a VOID* instead of UNSIGNED SHORT


2010-10-15 17:45:30  Ovidiu Sas <osas at voipembedded dot com> 
	* [7297] :

	backport from trunk rev:7296

	parser: check that 'Content-Length' header is parsed before returning the length



2010-10-15 15:35:06  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [7294] :

	backport from trunk (rev #7293):
	- rand_event() may take as optional param (with vars) the probability (this param will override the global probability (set via set_prob).

	Credits for this patch go to Razvan Crainea.


2010-10-12 18:42:27  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [7290] :

	backport from trunk (rev #7289):
	 fixed bug in get_source_group() function (permission module)


2010-10-12 18:36:25  Ovidiu Sas <osas at voipembedded dot com> 
	* [7288] :

	backport rev:7286 from trunk

	modules/rr: new param 'enable_socket_mismatch_warning'
	 - closes patch 3084000: rr: new module parameter: enable_socket_mismatch_warning



2010-10-12 14:20:37  Anca Vamanu, <anca at voice-system dot ro> 
	* [7285] :

	- fixed header name search (space after hcolon not compulsory)


2010-10-08 21:59:29  Ovidiu Sas <osas at voipembedded dot com> 
	* [7283] :

	backport from trunk: rev 7282
	Enhancement to record_route_preset functions to accept a second Record-Route header to be preset via a second argument.

	Patch from Ovidiu Sas.
	Close patch 3081570



2010-10-08 19:04:33  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [7281] :

	- ERR -> DBG if credentials are not properly filled


2010-10-08 12:03:03  Anca Vamanu, <anca at voice-system dot ro> 
	* [7278] :

	- added the possibility to send a reply with body from the script  ( "t_reply_with_body" function)


2010-10-07 20:48:35  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [7275] :

	- added missing tables
	  Thaks to Ovidiu Sas to report it 


2010-10-07 14:16:59  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [7263] :

	fixed compile warnings


2010-10-07 13:41:16  Anca Vamanu, <anca at voice-system dot ro> 
	* [7262] :

	- fixed state and version - now the state is always partial, fix the situation with two simultaneous calls


2010-10-07 11:35:37  Anca Vamanu, <anca at voice-system dot ro> 
	* [7260] :

	- backport from trunk 
		- database persistency
		- fixes for BYE not sent on the other side situations


2010-10-06 18:44:55  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [7259] :

	backport from trunk (rev 7258):
	- some check for extra debugging



2010-10-06 18:28:52  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [7255] :

	backport from trunk (rev #7254):
	- avoid running RESPONSE_IN callbacks from an INVITE transaction when the reply of the CANCEL (to that INVITE) is received


2010-10-06 18:24:25  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [7253] :

	backport from trunk (rev #7252):
	 dlg vars return NULL and not error if there is no dialog in the current context


2010-10-06 18:20:31  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [7251] :

	backport from trunk (Rev 7250):
	- docs updated
	- probing fixed - avoid probing until data is loaded


2010-10-04 16:50:32  Razvan Crainea <razvancrainea at opensips dot org> 
	* [7246] :

	Backported from trunk (7245): t_replicate can now also receive pseudo-variables as argument


2010-09-27 16:25:21  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [7240] :

	backport from trunk (rev #7239):
	- added support for NAPTR,SRV and multiple IPs when GWs are defined by names


2010-09-27 13:58:32  Anca Vamanu, <anca at voice-system dot ro> 
	* [7238] :

	- dialog event - empty dialog node body when no record if found also in no fallback2db (applied patch from Ovidiu Sas)


2010-09-27 12:47:50  Anca Vamanu, <anca at voice-system dot ro> 
	* [7236] :



2010-09-24 11:47:10  Anca Vamanu, <anca at voice-system dot ro> 
	* [7234] :

	- backport from trunk - fix for send_publish deadlock


2010-09-22 23:46:07  Iñaki Baz Castillo <ibc at aliax dot net> 
	* [7230] :

	- regex module: Fixed memory leak in pcre_match().
	  credits to marius zbihlei


2010-09-22 12:50:12  Razvan Crainea <razvancrainea at opensips dot org> 
	* [7226] :

	Backported from trunk (7225): added more error information to avpops 'raw_query' function


2010-09-21 18:27:03  Ovidiu Sas <osas at voipembedded dot com> 
	* [7223] :

	Backport rev 7222 from trunk:
	Removing nathelper restriction for forcing rtp only for INVITE type SIP requests.
	UPDATE is a valid SIP request that can update the SDP.

	 - reported by Daniel Goepp <dan@goepp.net>



2010-09-21 16:42:16  Anca Vamanu, <anca at voice-system dot ro> 
	* [7221] :

	- fixed - do not report error when select returns EINTR


2010-09-21 12:16:35  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [7218] :

	backport from trunk (rev #7217):
	fixed bogus int->str conversion of AVPs with negativ integers.
	Reported by Essobi of IRC channel


2010-09-20 18:21:53  Razvan Crainea <razvancrainea at opensips dot org> 
	* [7216] :

	Backported from trunk (7212): skips grants in case opensips ro and rw database user is root


2010-09-20 17:04:27  Razvan Crainea <razvancrainea at opensips dot org> 
	* [7214] :

	Backported from trunk (7212): fixed rc_auth() error checking


2010-09-20 12:35:46  Anca Vamanu, <anca at voice-system dot ro> 
	* [7213] :

	- fixed compile warning


2010-09-17 10:41:16  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [7211] :

	backport from trunk (rev #7192):
	- fixed deadlock introduced with last commit on locked callbacks


2010-09-15 13:20:36  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [7210] :

	backport from trunk 7209:
	- WARN switched to INFO


2010-09-15 13:15:09  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [7208] :

	backport from trunk (rev 7207):
	- WARN switched to INFO


2010-09-13 20:01:23  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [7206] :

	backport from trunk (rev 7199):
	- one more deadlock fixed in callback sync


2010-09-13 19:36:41  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [7205] :

	backport from trunk (rev #7204):
	- fixed crash if port is null pointer


2010-09-13 19:23:27  Anca Vamanu, <anca at voice-system dot ro> 
	* [7203] :

	- fixed sending reply twice for Publish ( reported by Kennard White )


2010-09-13 19:18:13  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [7202] :

	backport from trunk (rev #7201):
	- fixed bug in building ACK for UAC transactions


2010-09-10 12:58:00  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [7196] :

	fixes a form_result() function. This function does not work if a buffer (var_str buff) has a byte with high-order bit (in other words, a character with a code greater than 127).

	Credits go to John Khvatov


2010-09-09 20:47:30  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [7194] :

	backport from trunk (rev @7193):
	fixed compiling on BSD - the header files may in different dirs and the DB lib has a different name.

	Thanks to Erik Dekkers for BSD support



2010-09-08 14:18:32  Anca Vamanu, <anca at voice-system dot ro> 
	* [7191] :

	- fixed double free in an error case


2010-09-04 15:19:37  Ovidiu Sas <osas at voipembedded dot com> 
	* [7187] :

	pua_dialoginfo/README: fix example for callee_spec_param

	 - backport r7186 from trunk



2010-09-02 09:09:23  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [7182] :

	backport from trunk (rev #7181):
	fixed race condition between TM callbacks when comes to changing the original SIP requests (stored in shm, in transaction)



2010-09-01 17:19:07  Anca Vamanu, <anca at voice-system dot ro> 
	* [7180] :

	- fix: update contact in database for subscribe dialogs


2010-09-01 16:10:39  Anca Vamanu, <anca at voice-system dot ro> 
	* [7178] :

	 - fixed a bug introduced in last commit


2010-08-31 13:01:40  Anca Vamanu, <anca at voice-system dot ro> 
	* [7174] :

	- 2 fixes:
		- reply to both the parties if they send BYE in almost the same time
		- include Max-Forwards header in all the requests that require it (Invite, Update, Prack)


2010-08-30 19:23:21  Anca Vamanu, <anca at voice-system dot ro> 
	* [7172] :

	- do not propagate full state notifies


2010-08-30 18:19:00  Anca Vamanu, <anca at voice-system dot ro> 
	* [7170] :

	-  fixed a problem in BLA - if received a otify without any dialog received, don't send Notify to the others in the BLA group


2010-08-27 17:55:24  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [7167] :

	backport from trunk (rev #7166):
	- fixed stupid bug in building the destination bitmaks - affecting runs on 64 bits with more than 32 destinations
	  Thanks to Dimitri for report


2010-08-27 17:43:54  Anca Vamanu, <anca at voice-system dot ro> 
	* [7165] :

	- fix: detecting retransmissions and handle them right


2010-08-27 11:37:52  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [7163] :

	backport from trunk (rev # 7142)
	- added a new fixup func for get_source_group() to check the db_url
	  reported by Andrew Pogrebennyk


2010-08-27 00:41:06  Saúl Ibarra Corretgé <saul at ag-projects dot com> 
	* [7161] :

	Fixed small bug in Call Control documentation

	Reported by tompaw


2010-08-24 19:13:13  Anca Vamanu, <anca at voice-system dot ro> 
	* [7157] :

	- added a module parameter that disables a BLA Polycom specific behavior - bla_fix_remote_target


2010-08-24 13:51:46  Anca Vamanu, <anca at voice-system dot ro> 
	* [7155] :

	- cleanup when deleting a entities record


2010-08-24 12:56:22  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [7153] :

	backport from trunk (rev #7152):
	- added auto detection for pcre installation


2010-08-23 17:07:45  Anca Vamanu, <anca at voice-system dot ro> 
	* [7151] :

	- improved the BLA logic to propagate info to phones


2010-08-23 13:37:40  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [7148] :

	backport from trunk (rev #7147):
	- fixed ugly bug in reseting the parsed fields when failure route called several times


2010-08-16 17:11:25  Anca Vamanu, <anca at voice-system dot ro> 
	* [7138] :

	- fixed not checking if create_dlg exits with error


2010-08-13 21:01:43  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [7136] :

	backport from trunk (rev #7131-7135):
	- added attributes for rules (they are exported via AVPs)
	- added a new AVP to export the ID of the matched RULE (for accouting purposes)
	- DB struct updated to reflect the latest changes



2010-08-12 18:59:28  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [7130] :

	backport from trunk (rev 7129) :
	- new "disable_503_translation" global parameter do disable the 503 -> 500 reply translation.
	 By default the "disable_503_translation" is off (translation is done)


2010-08-09 15:15:13  Anca Vamanu, <anca at voice-system dot ro> 
	* [7125] :

	- included RAck header in generated PRACK request


2010-08-08 14:43:04  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [7121] :

	- fixed missing semicolon


2010-08-06 06:03:59  Di-Shi Sun <di-shi at transnexus dot com> 
	* [7118] :

	1. Removed loading xlog module from sample configuration.
	2. Updated release notes.


2010-08-05 15:39:06  Anca Vamanu, <anca at voice-system dot ro> 
	* [7117] :

	- fix in BLA - send Notify with partial state ( until now it sent Notifies with full state everytime)


2010-08-05 15:06:23  Anca Vamanu, <anca at voice-system dot ro> 
	* [7114] :

	- fixed crash due to callback parameter, reported by Yaniv Vaknin


2010-08-04 23:04:13  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [7112] :

	backport from trunk (rev #7111):
	Fixed bug in parse_uri() that prevents parsing of the r2 parameter (used by the rr module). It is a missing break statement.

	Closes patch 3039483
	Credits goto Kennard White 


