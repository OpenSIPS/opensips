
2010-08-02 04:16:50  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [7101] :

	backport from trunk (rev 7100):
	- fixed rule creation when subst rule is not defined



2010-08-02 04:06:29  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [7099] :

	backport from trunk ( rev 7097 + 7098):
	- fixed error message during failed startup


2010-08-02 02:59:49  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [7096] :

	backport from trunk (rev #6998):
	- new crc32 transformation added
	  Credits go to Eric Tamme.


2010-08-02 02:41:15  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [7095] :

	backport from trunk (rev #6884):
	- added checks for resource id length and increased the pres_id size in pua table to equal the max size of the ids generated by rls



2010-08-02 02:10:31  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [7094] :

	backport from trunk (rev #6765):
	- fixed mem corruption when the transaction created by a cpl proxy node fails (nothing sent out) is later used from the script for sendin some stateful err replies.


2010-08-02 01:56:59  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [7093] :

	backport from trunk (rev #6745):
	o Improve buffer management by using dynamicly allocated buffers
	instead of static ones;

	o Rework fix for the static buffer overflow with the content of
	the overly long payload types list. Instead of silently
	truncating the list, use dynamic buffer allocated on heap to
	keep that list growing it if necessary.


2010-08-02 01:44:07  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [7092] :

	- backported from trunk the migration of dialplan module from trex to pcre


2010-08-02 01:28:05  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [7091] :

	switch from bash to sh


2010-08-02 01:18:29  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [7089] :

	- several fixes (compile warings)


2010-08-02 01:10:24  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [7088] :

	several warnings fixed


2010-08-02 01:09:04  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [7087] :

	- fixed un-init var warning


2010-08-01 23:37:07  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [7083] :

	When rewriting the SDP of an ACK rtpproxy_answer() retrieves the wrong port from rtpproxy.

	This is reproducible by handling SDP offered in a 200 Ok response with rtpproxy_offer() and then processing the answering SDP in an ACK with rtpproxy_answer() - the result is that the same port gets written into the ACK's SDP as was written into the Ok's SDP. In short, the 200 Ok is being handled correctly when it contain an SDP offer since the to/from tag are swapped inside force_rtp_proxy() before getting passed along to rtpproxy. The swap is critical as it provides consistent results when processing SDP offered in INVITE requests and Ok responses during re-invites within the same dialog. But the complimentary swapping is not being done for SDP answers contained in ACKs.

	Closes patch 3019749
	Credits go to John Riordan 


2010-08-01 23:18:28  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [7080] :

	backport from trunk (rev #7079):
	-new pvar "path" added to allow reading of path_vec. This information was only available (via $branch(path) ) if branches exists.

	Closes path 3034685


2010-08-01 23:13:40  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [7078] :

	backport from trunk (rev 7077):
	- Copy the logic of rr::record_route() to path::add_path()
	- Add a new parameter "enable_double_path" that is enabled by default.

	Without this feature, handling of initial transaction on a proxy need a bunch of workaround and force_send_socket() to have network / protocol bridging working.

	Closes patch #3035872


2010-08-01 22:41:34  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [7076] :

	backport from trunk (rev #7075 )
	- fixed tests for filling default values
	  Closes bug 2994156


2010-08-01 22:30:20  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [7074] :

	backport from trunk (rev #7073):
	-added SYSLOG param to osipsconsolerc
	-SYSLOG has default val 1 (logging to syslog)


2010-08-01 22:07:48  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [7072] :

	backport from trunk (rev #7071):
	- pvars $bf and $bF were put back (removed by revision 5764) as there is no other way to bulk access (as mask) the branch flags for current branch.
	 Closes bug report 3023092


2010-08-01 20:50:51  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [7069] :

	backport frm trunk (rev #7068):
	- fixed resetting of the prepared statement attachement to DB connection - if generating the prepare statement query fails or if fetching the DB result also fails, reset the prepares statment from the current DB conn.


2010-07-29 19:44:32  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [7064] :

	backport from trunk (rev #7063):
	For accounting purposes, I needed to know which gateway a request was sent to. Since there was already an AVP inside the drouting module that stored this information, I just modified the code to allow this AVP to be accessed from inside the routing scripts. There is a new module parameter called id_avp to configure where it will be stored.

	The AVP will only contain a value between the time do_routing/next_gw is called and the request is sent to the next hop.

	Closes patch 3034371
	Credits go to Matt Lehner


2010-07-23 18:09:58  Dan Pascu <dan at ag-projects dot com> 
	* [7059] :

	Fixed wrong password field being selected in the database due to typo in the code

2010-07-22 20:36:25  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [7055] :

	backport from trunk ( rev #7054):
	applied patch 3033111 - proper check of the return code of parse_to() function.

	Closese bug 3033111
	Credits go to Stanislaw Pitucha 


2010-07-22 19:16:43  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [7053] :

	backport from trunk (rev #7052):
	when force_active is true, the pxml_db is not opened; When force_active is true, the db is not needed and the code already avoids touching the db. This patch adds the same functionality into the init code (both mod init and child init). When force_active is True, the db_url parameter can be left unspecified.

	Closes patch 3028767
	Credits go to Kennard White


2010-07-22 18:08:34  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [7050] :

	backport from trunk (rev 7049):
	- fixed return code of internal function 
	  Credits go to Kennard White


2010-07-22 17:17:39  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [7047] :

	backported from trunk (rev #7046):
	- fixed proper val type for inserting the AVP timeout
	  Closes bug 3016652
	  Credits goto Artem Osmerkin


2010-07-22 16:56:29  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [7045] :

	backport from trunk (rev #7044):
	parse_to doesn't cleanup the destination structure properly (the parameter list), causing some modules to crash (dialoginfo for example)
	Instead of adding yet another memset, I removed all of them and added proper cleaning to parse_to itself.

	Closes patch 3033002
	Credits go to Stanislaw Pitucha


2010-07-22 16:49:09  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [7043] :

	backport from trunk (rev 7042):
	- fixed wrong flag in save() params


2010-07-22 15:06:31  Vlad Paiu <vladpaiu at opensips dot org> 
	* [7040] :

	backported from trunk (7039)
	shell specific syntax fixed


2010-07-20 16:08:03  Anca Vamanu, <anca at voice-system dot ro> 
	* [7037] :

	- fixed bug when a new request is received before the previous is replied
	--Ths line, and those below, will be ignored--

	M    dlg.c


2010-07-19 17:49:17  Anca Vamanu, <anca at voice-system dot ro> 
	* [7035] :

	- - added the possibility to specify To and From display names when starting a new dialog from the server and the possiblity to specify a RURI different from To uri


2010-07-16 18:25:49  Irina-Maria Stanescu <istanescu at opensips dot org> 
	* [7032] :

	- added a check for the 'SIP-AVP' dictionary entry
	(backport from trunk rev #7028)


2010-07-15 21:19:06  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [7031] :

	backport from trunk (rev #7030):
	- bug fixed - check first for the presence of the CT-len header


2010-07-15 17:08:41  Vlad Paiu <vladpaiu at opensips dot org> 
	* [7029] :

	Backported from trunk(7004) - Added a new pseudovariable called 'stat', that allows reading and resetting statistics values from the script


2010-07-15 16:48:29  Razvan Crainea <razvancrainea at opensips dot org> 
	* [7027] :



2010-07-14 13:30:24  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [7026] :

	backport from trunk (rev #6844):
	- is_in_ds_list() takes on more extra optional param "active_only" - returns true only if the destination is in list and active.

	- fixed probing and re-enabling of the inactive destinations -> if inactive, do not probe it and not re-enable it.




2010-07-14 12:24:35  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [7025] :

	backport from trunk (rev #6892):
	- nat_uac_test() and fix_nated_contact() process all the contacts (multiple URIs per header and multiple headers per message)
	  Closes bug 2993101.


2010-07-14 12:04:20  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [7024] :

	backport from trunk (rev #7018):
	- fixed the MSG ids of the requests in FAILURE ROUTE - the old way of generating IDs could lead to ID overlapping and to structure reusage....
	 Related to bug ID 3028338


2010-07-13 13:27:57  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [7022] :

	backport from trunk (rev 7021):
	- fixed case sensitiveness - be unsensitive when parsing SIP headers
	  Reported by Jan ONDREJ 


2010-07-13 11:56:00  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [7020] :

	backport from trunk (rev #7019):
	- fixed double free of SQL query result.
	  Closes bug 3003968
	  Credits go to Walter Doekes 


2010-07-13 11:03:17  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [7017] :

	backport from trunk (rev 7016)
	- avoid crashes of codec related functions in failure route due FAKE REPLIES (internally generated replies).
	  Reported by Thomas Gelf


2010-07-13 10:06:31  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [7015] :

	- aliases_db does not provide the use_domain param anymore


2010-07-13 09:40:11  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [7013] :

	backport from trunk trunk (rev  7009:7012):
	- function get_source_group() returns the group via a pvar (function param) instead of return code - the bug was that the group may be 0 and a return code 0 means breaking the script execution.


2010-07-09 19:35:53  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [7008] :

	backport from trunk (rev #7007):
	- fixed ugly bug in overwritting the "expire" param in the contact headers - this is a critical bug as it may affect the registration time (and de-registration) when the expired val is passed via contact header and there are other params also present.


2010-07-09 11:10:42  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [7003] :

	backport from trunk (rev #7002):
	- fixed bug in updating stats about number of registered users
	  Reported by mayamatakeshi on users mailing list


2010-07-07 09:15:11  Di-Shi Sun <di-shi at transnexus dot com> 
	* [6999] :

	Changed OSP TCP port from 1080 to 5045.


2010-07-06 20:37:27  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [6994] :

	backport from trunk (rev #6993):
	- docs updated - removed the "detect_hold" function which does not exist


2010-07-06 15:25:11  Anca Vamanu, <anca at voice-system dot ro> 
	* [6992] :

	- fixed crash if attempting to send a reply for an old transaction


2010-07-02 01:22:01  Iñaki Baz Castillo <ibc at aliax dot net> 
	* [6990] :

	- Fixed a typo in pcre_match_group documentation (backported from trunk #6988).


2010-07-01 19:20:55  Anca Vamanu, <anca at voice-system dot ro> 
	* [6987] :

	- fixed some problems related to retransmissions


2010-06-25 17:59:38  Anca Vamanu, <anca at voice-system dot ro> 
	* [6984] :

	- fixed segmentation fault at startup


2010-06-22 17:20:46  Anca Vamanu, <anca at voice-system dot ro> 
	* [6982] :

	- updated documentation, mentioned that t_newtran() MUST not be called from the script on the INVITE on which you call b2b_init_request


2010-06-21 15:20:53  Anca Vamanu, <anca at voice-system dot ro> 
	* [6980] :

	- fixed memory leak in presence when used with mix dialog presence config


2010-06-21 12:28:02  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [6977] :

	backport from trunk (rev #6975):

	- fixed shell tests - use proper operators for string operands.
	  Reported by Daniel Goepp


2010-06-21 12:14:48  Anca Vamanu, <anca at voice-system dot ro> 
	* [6974] :

	- fixed some tm transactions left in memory
	- added some debug info messages


2010-06-18 18:15:17  Saúl Ibarra Corretgé <saul at ag-projects dot com> 
	* [6970] :

	Backport from trunk r6969:
	Fix SDP mangling for unsupported streams. A bug was introduced in r6812 that
	prevented the original c line being added to the unsupported streams, this
	fixes it.



2010-06-17 12:39:06  Anca Vamanu, <anca at voice-system dot ro> 
	* [6968] :

	- fixed memory leak
	--Ths liny and those below, will be ignored--

	M    b2b_logic/records.c
	M    b2b_logic/logic.c


2010-06-16 19:08:53  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [6965] :

	backport from trunk (rev 6964):
	- fixed lookup and parsing of Session-Expires and Min-SE headers
	  Reported by Dmitry Kirillov


2010-06-16 15:32:25  Anca Vamanu, <anca at voice-system dot ro> 
	* [6963] :

	- fixed bug - mark in tm module that the transaction is used to prevent tm deleting it too early


2010-06-15 20:01:09  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [6960] :

	backport from trunk (rev #6959):
	- fixed operator precedence ( ! and &&)
	  Credits go to Kennard White


2010-06-15 12:24:56  Anca Vamanu, <anca at voice-system dot ro> 
	* [6958] :

	- updated the documentation - removed the known limitations section as they are fixed


2010-06-15 12:15:48  Anca Vamanu, <anca at voice-system dot ro> 
	* [6956] :

	- update cseq on sending Subscribe rather then wen receiving the reply to avoid races between presence and pua


2010-06-14 15:56:24  Anca Vamanu, <anca at voice-system dot ro> 
	* [6954] :

	- fix for the procesing of negative replies without a to tag


2010-06-14 11:12:01  Anca Vamanu, <anca at voice-system dot ro> 
	* [6952] :

	- fixes in RLS, credits to Juha Heinanen
		- removed extra space before start parameter
		- fixed db schema - increased length for content_type column


2010-06-10 18:53:47  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [6950] :

	backport from trunk (rev #6949):
	- fixed line wrapping to make happy new sh version
	  Reported by Daniel Goepp


2010-06-08 14:03:59  Anca Vamanu, <anca at voice-system dot ro> 
	* [6947] :

	-  fixes:
		- publications for caller not consistent: wrongly using the info in From header from subsequent replies or requests ( use the From in Invite )
		- multiple records for the same user ( due to using the callid as a component of the publication id)


2010-06-04 18:26:16  Anca Vamanu, <anca at voice-system dot ro> 
	* [6945] :

	- modified the implementation of provisional media ( sequential instead of concurrent )


2010-06-03 23:12:44  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [6943] :

	backport from trunk (rev #6942):
	- WARN -> DBG if socket is not local (too noisy when nusing DB mode 3)


2010-06-03 23:03:25  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [6941] :

	- include file order fixed


2010-06-03 22:55:14  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [6939] :

	backport from trunk (rev #6936):
	fixed bugs in checking the NULL ptr for port and proto.


2010-06-02 21:27:48  Anca Vamanu, <anca at voice-system dot ro> 
	* [6935] :

	- fixed multiple CRLF in multipart body( reported by Juha Heinanen)


2010-06-02 19:22:07  Anca Vamanu, <anca at voice-system dot ro> 
	* [6933] :

	- fixed: not saving scenario id for the new created entity when provisional uri was used


2010-06-02 13:42:19  Saúl Ibarra Corretgé <saul at ag-projects dot com> 
	* [6931] :

	Backport from trunk (rev #6930):
	Fixes for MediaProxy ICE support after SIPit26:
	  - ICE attributes may appear at the session level.
	  - Insert our RTCP component if we found another component: some clients
	    may not use a=rtcp line but then insert a RTCP candidate component.


2010-06-02 11:34:39  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [6928] :

	backport from trunk (rev #6927):
	- fixed extraction of contact URIs when more than one Contact header is present in a single 3xx redirect reply


2010-06-01 14:19:45  Anca Vamanu, <anca at voice-system dot ro> 
	* [6926] :

	- added the possiblity while bridging with provisional media, to use the initial sdp as body for the Invite sent to the callee (initial Invite without a body seems not to be accepted by many endpoints)
	- backport from trunk: added MI command b2b_bridge


2010-05-31 17:27:18  Anca Vamanu, <anca at voice-system dot ro> 
	* [6924] :

	- fixed bug in pua module - rewriting pointer given as parameter ( reported by Juha Heinanen)
	- changes in rls module to allow subscriptions to other rls lists


2010-05-28 10:31:55  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [6922] :

	backport from trunk (rev #6921):
	-fixed calculation of the Route param string (as len). This bug was introduced when the order of the Route param was changed (rev 5760).
	 Credits for reporting it go to Benixon
	 Closes bug #2999941


2010-05-28 10:22:24  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [6919] :

	backport from trunk (rev #6918):
	- fixed bogus free (of a NULL pointer) when hostent_cpy() fails because of lack of pkg mem


2010-05-27 20:41:12  Anca Vamanu, <anca at voice-system dot ro> 
	* [6917] :

	- fixed bug in matching dialog record ( wrongly relied on the From header being the same in request and reply )


2010-05-27 11:57:30  Anca Vamanu, <anca at voice-system dot ro> 
	* [6914] :

	- fixed incomplete handling of BYE from provisional media server


2010-05-26 12:25:56  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [6911] :

	backport from trunk (rev 6910):
	proper include order (for compile flags)
	Credits goto Walter Doekes
	closes 3003935


2010-05-26 11:55:14  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [6908] :

	backport from trunk (rev #6907):
	- "-g" compile options (debug symbols) is added for mode=debug also
	  Credits go to Walter Doekes
	  Closes bug 3003933


2010-05-26 10:30:50  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [6906] :

	backport from trunk (rev 6905):
	- t_replicate() can also work if the transaction already exists (like t_newtran() is called before t_replicate() )
	  Closes bug #2989974


2010-05-26 10:02:24  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [6904] :

	more README files updated


2010-05-26 06:34:30  Di-Shi Sun <di-shi at transnexus dot com> 
	* [6902] :

	Added DeviceInfo=<SBC IP> in AuthReq if there is not P-Source-Device in indirect work mode.


2010-05-26 02:26:48  Kobi Eshun <kobi at sightspeed dot com> 
	* [6901] :

	Add access to contintent_code. Credit to ledda.

2010-05-25 23:18:58  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [6900] :

	- docs and examples updated


2010-05-25 19:58:59  Anca Vamanu, <anca at voice-system dot ro> 
	* [6898] :

	- fixed bug - opensips crashing if negative reply received while bridging - reported by Jeff Pyle
	- added a new feature: when bridging to a new destination connect the old entity to a media server to hear a ringing tone until the real destination answers


2010-05-25 19:26:29  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [6896] :

	backport from trunk (rev 6895):
	-timerec column may be NULL


2010-05-25 19:14:30  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [6894] :

	backport from trunk 6893
	- ERR->DBG if /proc/net/[tcp|udp] is not available.


2010-05-24 09:54:26  Di-Shi Sun <di-shi at transnexus dot com> 
	* [6889] :

	1. Added indirect work mode.
	2. Changed append network ID default value.
	3. Updated sample configuration file.
	4. Updated doc.


2010-05-23 23:57:58  Anca Vamanu, <anca at voice-system dot ro> 
	* [6888] :

	- fix in BLA - went back to the initial behavior: do not send Notify to the phone that has just sent the state update


2010-05-23 16:26:10  Anca Vamanu, <anca at voice-system dot ro> 
	* [6886] :

	- added the possiblity to use script variables as expires parameter in cache_store function 


2010-05-21 17:44:33  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [6883] :

	-fixed bug in case-sensitiviness - as usrloc has not option on that, be case sensitive all the time, otherwise you cannot find AORs with upper cases.


2010-05-21 02:03:40  Anca Vamanu, <anca at voice-system dot ro> 
	* [6880] :

	- fixed bug in rls due to not synchronizing the code with the recent changes in pua
	- fixed version initial values ( MUST be 0 )


2010-05-18 13:22:00  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [6878] :

	-fixed double free in error handling


2010-05-13 09:08:07  Di-Shi Sun <di-shi at transnexus dot com> 
	* [6873] :

	Fixed bug of removing '+' in numbers.


2010-05-12 19:47:19  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [6872] :

	backport from trunk (rev #6871):
	- when cross searching dialogs, consider also the dialogs in early state (not yet established) - needed in some transfer cases.
	  Reported by elred_ on IRC channel


2010-05-12 18:41:58  Anca Vamanu, <anca at voice-system dot ro> 
	* [6869] :

	- fixed a bug in storing data in database (thanks to Even Andre at oyatel)


2010-05-12 15:39:51  Anca Vamanu, <anca at voice-system dot ro> 
	* [6867] :

	- remove the compulsory constraint for module parameter 'default_domain'


2010-05-12 12:48:05  Anca Vamanu, <anca at voice-system dot ro> 
	* [6865] :

	- fixed schema for pua table ( removed not invalid not null constraint on some columns )
	- fixed a typo in last commit in presence


2010-05-11 17:41:42  Anca Vamanu, <anca at voice-system dot ro> 
	* [6863] :

	- fixed pua schema - remote contact can be null


2010-05-11 16:30:17  Anca Vamanu, <anca at voice-system dot ro> 
	* [6861] :

	- limit the size of the generated pres_id ( not to exceed the length of the filed in the database table)


2010-05-11 15:34:38  Anca Vamanu, <anca at voice-system dot ro> 
	* [6858] :

	- fix - deleted by mistake a use_table statement in the last commit


2010-05-11 10:18:43  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [6856] :

	backport from trunk (rev #6855):
	- fixed SEQ_MATCH_FALLBACK (dialog matching with fallback) - do fallback to SIP matching also if the DID found but (1) the dialog was not found based on DID or (2) the DID-based found dialog does not match from SIP point of view the current request (failed tight matching).


2010-05-11 10:05:11  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [6854] :

	backport from trunk (rev #6853):
	- fixed context evaluation - the "reply" context may return a FAKE_REPLY (invalid pointer) in failure route


2010-05-10 10:33:12  Saúl Ibarra Corretgé <saul at ag-projects dot com> 
	* [6850] :

	Backport from trunk (rev #6849):

	Removed error message since a=rtcp line could contain the port only.
	Reported by Thomas Gelf.



2010-05-07 19:40:21  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [6848] :

	backport from trunk (rev #6825 & #6827):
	- new get_dialog_info() function to exchange info between dialogs


2010-05-06 21:06:32  Anca Vamanu, <anca at voice-system dot ro> 
	* [6846] :

	- fixed an old bug in presence - if a contact unregistering without sending a Publish with expires=0 and then reregistered again, when the old presence entry expired - it appeared offline to its watchers (appeared only when fallback2db parameter was not set)


2010-05-05 14:20:58  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [6843] :

	-fixed bogus space


2010-05-03 15:21:48  Anca Vamanu, <anca at voice-system dot ro> 
	* [6840] :

	- added the possibility to send message in xmpp on the callback of a received xmpp message
	- bug fix: considered sip_domain compulsory


2010-05-03 14:18:52  Anca Vamanu, <anca at voice-system dot ro> 
	* [6838] :

	-  fixed segmentation fault if send_subscribe using modules do not set to_uri argument


2010-04-30 11:39:19  Anca Vamanu, <anca at voice-system dot ro> 
	* [6836] :

	- accept also null parameter from logic (suggested by Oliver Detour)


2010-04-29 15:10:18  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [6833] :

	backport from trunk:
	- support in dlg_list MI command for listing dialogs with offset and counter (and not only all of them) - needed by OpenSIPS Control Panel for pagination of dialog info


2010-04-29 13:52:10  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [6829] :

	backport from trunk (rev #6828):
	- fixed bug in error handling - one more unref is required if the dialog failed to be attached to transaction


2010-04-28 15:38:11  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [6824] :

	- applied patch 2981046 from Walter Doekes
	  attached some minor fixes to the documentation (and one replacement of the diaaloginfo "Trying" to "trying").



2010-04-27 11:48:08  Anca Vamanu, <anca at voice-system dot ro> 
	* [6823] :

	- fixed possible deadlock


2010-04-26 15:08:28  Anca Vamanu, <anca at voice-system dot ro> 
	* [6821] :

	- improved the usage of min_expires and set a new default value for it (300 sec)


2010-04-23 18:15:04  Irina-Maria Stanescu <istanescu at opensips dot org> 
	* [6817] :

	backport from trunk rev #6816
	- check for aaa_url added
	- replaced UINT4 with uint32_t (thanks to Alex Massover)



2010-04-23 14:51:13  Saúl Ibarra Corretgé <saul at ag-projects dot com> 
	* [6813] :

	Backport from trunk (rev #6812):
	Fix chrash when received reply contains more streams than the INVITE.


2010-04-23 11:39:24  Anca Vamanu, <anca at voice-system dot ro> 
	* [6811] :

	- improvements
		- extra headers from init request passed in all bridging Invites
		- added a info log message to print the callids of the dialogs in a pair


2010-04-22 14:20:17  Anca Vamanu, <anca at voice-system dot ro> 
	* [6809] :

	- fixed some problems in dialog - presence mixing:
		- broken state if a new call is attempted while another call is on going
		- broken state if a presence publish refresh is received while a call is on going


2010-04-21 18:39:03  Anca Vamanu, <anca at voice-system dot ro> 
	* [6807] :

	- some fixes to allow client id reusage ( permits loops in scenario ) and do a better ordination of the actions ( bridge first )


2010-04-21 16:36:04  Anca Vamanu, <anca at voice-system dot ro> 
	* [6804] :

	- fix bug in searching for header


2010-04-20 16:18:15  Anca Vamanu, <anca at voice-system dot ro> 
	* [6802] :

	- addition in BLA: the possibility to define a custom presentity URI to use when processing BLA Subscribes


2010-04-19 22:14:12  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [6799] :

	backport from trunk (rev #6795:6797) 
	- fixed dialgo init when the transaction already exists at create_dialog() time


2010-04-19 17:21:39  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [6794] :

	backport from trunk (rev #6793):
	- fixed bug in extracting the value of $rP (RURI proto) from the transport URI param


2010-04-16 13:44:53  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [6792] :

	backported from trunk (rev #6791):
	- fixed bogus usage of attr avp - first check if it was defined.


2010-04-15 20:24:48  ivaxer 
	* [6790] :

	- Added compatibility with EPEL repository (http://fedoraproject.org/wiki/EPEL)
	- Updated to 1.6.2



2010-04-15 18:16:25  Anca Vamanu, <anca at voice-system dot ro> 
	* [6789] :

	- fixed a bug when bridging an only call party to a new one ( bad from uri if the old entity was of type server), reported by Antonio Anderson Souza


2010-04-15 13:40:37  Anca Vamanu, <anca at voice-system dot ro> 
	* [6787] :

	- fixed a bug in dialog mixed with presence


2010-04-14 13:32:50  Anca Vamanu, <anca at voice-system dot ro> 
	* [6785] :

	- fixed using unacceptable characters in from tag ( reported by Richard Revels and Jeff Pyle )
	--Ths line, and those below, will be ignored--

	M    b2b_logic/logic.c


2010-04-14 12:56:36  Andrei Dragus <adragus at opensips dot org> 
	* [6783] :

	Backported patch from trunk


2010-04-14 12:43:51  Anca Vamanu, <anca at voice-system dot ro> 
	* [6781] :

	- improved the documentation for b2b_init_request function


2010-04-13 19:37:35  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [6779] :

	backport from trunk (rev #6778):
	- FROM must be also checked when generating hop-by-hop ACK


2010-04-13 18:48:30  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [6776] :

	backport from trunk (rev #6775):
	- fixed missing uri.headers parsing in the URI transformatio


2010-04-13 14:06:44  Anca Vamanu, <anca at voice-system dot ro> 
	* [6774] :

	- improved dialog and presence mixing: on call terminated, if no other presence information found in database send a notify with state 'closed'.


2010-04-12 16:04:54  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [6772] :

	backport from trunk (rev #6771):
	ds_select_xxx() fuctions allowed from failure route
	ds_next_xxx() and ds_mark_xxx() allowed from request route
	docs updated


2010-04-12 15:55:56  Anca Vamanu, <anca at voice-system dot ro> 
	* [6770] :

	- new cool feature in presence server: mixing dialog info with presence. The presence server can now generate presence information from dialog state and tell you if a buddy is in a call even if his phone did not send a presence Publish with this information.



2010-04-12 11:55:11  Saúl Ibarra Corretgé <saul at ag-projects dot com> 
	* [6767] :

	Backport from trunk #6766:

	Allow strip_body functions to be called from onreply_route, as mentioned in the docs.



2010-04-09 12:07:42  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [6764] :

	backport from trunk (rev #6763):
	- fixed cloning of multi body structure...as the structure is not cloned, reset the pointer so that the body will be reparsed in failure route.
	Credits for reporting go to pawpro on IRC channel #opensips



2010-04-08 13:55:15  Anca Vamanu, <anca at voice-system dot ro> 
	* [6762] :

	- fixed not sending Publish with trying state for the callee


2010-04-07 11:45:36  Anca Vamanu, <anca at voice-system dot ro> 
	* [6760] :

	-- fix: look in all the headers when serching a header by name


2010-04-02 17:19:34  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [6758] :

	- increased the size of the array holding the extra headers.


2010-04-02 15:35:54  Andrei Dragus <adragus at opensips dot org> 
	* [6755] :

	Backported fix from trunk


2010-04-02 15:31:15  Anca Vamanu, <anca at voice-system dot ro> 
	* [6754] :

	- enhancement for dialoginfo to work better with Linksys - if no dialoginfo published information is found - send an body without any dialog ( rather then sending no body) - reported by James Lamanna


2010-04-01 16:12:40  Anca Vamanu, <anca at voice-system dot ro> 
	* [6750] :

	- applied modified patch Walter Doekes ( patch #2980529)


2010-04-01 15:47:42  Anca Vamanu, <anca at voice-system dot ro> 
	* [6749] :

	- applied patch from Walter Doekes ( patch #2980522): correct macro definition ( without triling  ; )


2010-04-01 12:03:11  Anca Vamanu, <anca at voice-system dot ro> 
	* [6747] :

	- added 2 new features:
		- the possibility to tell the module to generate dialoginfo only for one side of the dialog
		- the possiblity to define custom caller and callee information to be used when generating the dialoginfo


2010-03-29 15:14:21  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [6742] :

	- fixed shm mem leak when get_all_bodies() is used multiple times


2010-03-26 14:13:46  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [6741] :

	backport from trunk (rev 6740):
	- fixed encoding of Content-Type hdr.



2010-03-24 12:55:08  Anca Vamanu, <anca at voice-system dot ro> 
	* [6739] :

	- fixed typo in documentation (reported by Brett Nemeroff )


2010-03-23 12:21:53  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [6737] :

	backport from trunk (rev #6736):
	- fixed dialog shutdown procedure - if a transaction still refs a dialog, when distroying the transaction, before unrefing the dialog, check if the dialog module didn't shutdown already
	  Closes bug 2972604.


2010-03-23 11:58:20  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [6734] :

	backport from trunk (rev 6733) :
	fixed the iteration (when returning a valid record) through the SRV and A DNS re
	cords - this bug was affectig the DNS based failover

	Credits goto Byron Clark.
	Closes bug 2974801


2010-03-22 18:23:54  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [6732] :

	- fixed data type for the prox_route name (INT -> STR)


2010-03-19 16:40:40  Anca Vamanu, <anca at voice-system dot ro> 
	* [6730] :

	- allowed calling send_reply function from failure route (suggested by Ryan Bullock, feature request #2973188)


2010-03-18 15:47:08  Anca Vamanu, <anca at voice-system dot ro> 
	* [6728] :

	- BLA fix: not replacing remote target ip with domain in the case when no previous dialog was stored


2010-03-16 17:03:45  Anca Vamanu, <anca at voice-system dot ro> 
	* [6725] :

	- updated default config - remove obsolete function t_release


2010-03-15 13:29:36  Anca Vamanu, <anca at voice-system dot ro> 
	* [6723] :

	- fixes:
		- properly clean expired records from memory
		- delete also from database when a record expires
	--Ths line, and those below, will be ignored--

	M    pua/hash.c
	M    pua/pua.c
	M    pua/hash.h
	M    pua/pua.h
	M    pua/send_subscribe.c


