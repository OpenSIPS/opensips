=========================== Release 2.1.4 ==============================

2016-07-20  Razvan Crainea  <razvan at opensips dot org>
	* [171a78c] :

	Update version to 2.1.4


2016-07-18  Razvan Crainea  <razvan at opensips dot org>
	* [9c5fe8d] :

	permissions: allow any supported protocol
	Before this commit, the protocol check was hardcoded in the module. This
	commit allows to add in the permissions table any transport protocol
	supported.

	Thanks go to Kirill Galinurov for reporting this!
	(cherry picked from commit 0eecff942dc3700e008a9941ac406a565325ef89)


2016-07-15  Liviu Chircu  <liviu at opensips dot org>
	* [a8c997d] :

	rest_client: Fix incorrect trim operation
	(cherry picked from commit d8bf10da34152612e7835a64cedbb7593b8fc57b)


2016-07-15  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [e0b237b] :

	Fix building Via Branch in stateless mode
	Instead of copying the branch value from a previous statefull Via header (which may lead to overflow as OpenSIPS has a maximum value for the built branch), we generate a new branch value based on the previous Via branch - in this way, we have full controll over the length of the resulting Branch and we also inherit the uniqueness of the branch value (from the prev Via hdr).

	Reported by Gupta, Rahul and Elliott, Ray
	(cherry picked from commit 482e643469b351d12418ff54c96beee7b27dca94)


2016-07-15  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [49adcf5] :

	Fix advertised port and address per branch.
	Before the advertised_port/address are preserved only in the UAS part of the transaction - that means it is only one value and it is from the setting done in Request Route; whatever later setting done in Failure Route or Branch Route are not preserved at transaction level (even if they are used on the spot, for sending out the INVITE).
	So, when we have to build a local request (ACK or CANCEL), we do not remember which specific address/port were advertised for that particular UAC (branch).

	Fixes #917.
	(cherry picked from commit eb850a22f0af83bf75e75dfadbe1320e8b92784b)


2016-07-12  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [6030e5f] :

	Fix populating blacklists.
	When creating the blacklists, use the port and protocol of the destination too, otherwise the rules may conflict or be too wide to be used (like 2 destinations with same IP but different ports).
	(cherry picked from commit 7fa9cee5037af26fd1c63b70710f2bc03e6a31f4)


2016-07-12  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [a51b18a] :

	Fix populating blacklists.
	When creating the blacklists, use the port and protocol of the destination too, otherwise the rules may conflict or be too wide to be used (like 2 destinations with same IP but different ports).
	(cherry picked from commit 97f309c34c7333270a3f0f997868bdb9b94107f1)


2016-07-11  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [f5a251a] :

	Fix populating blacklists.
	When creating the blacklists, use the port and protocol of the destination too, otherwise the rules may conflict or be too wide to be used (like 2 destinations with same IP but different ports).
	(cherry picked from commit 0495faa7d96f92da13102480ca43cd1befd37ba0)


2016-07-11  ionutrazvanionita  <ionutionita at opensips dot org>
	* [61e0ca2] :

	[acc][bugfix] check if database loaded before using its handler
	(cherry picked from commit 8dd10d85b408947576223e75a67228ed7c7abd91)


2016-07-08  Razvan Crainea  <razvan at opensips dot org>
	* [a48af8e] :

	dialog: advance to next cell in case of error
	(cherry picked from commit 70db2cfcdb0c74e6437db2aa9663fd0a5000ecdd)


2016-07-07  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [186c4c2] :

	Fix error message when a route is not defined.
	Print the name of the route too - the ID is irrelevant for the script writter.
	(cherry picked from commit 409481818148d7951e1520c9dd4eb715c2bec7c6)


2016-07-05  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [d3e9b6a] :

	Fixed compiling on arm6 with fastlocks
	Partial revert of 058e16 as we need some extra asm code for fast locking on arm6.
	See #923
	Closes #912
	(cherry picked from commit a69c32877b99fbd6eef736eff58c9b6ed8228166)


2016-07-04  Liviu Chircu  <liviu at opensips dot org>
	* [63e25f5] :

	acc: Fix incorrect Request-URI handling
	If the config script does not include any Request-URI altering logic
	(e.g. no lookup() or $ru manipulation), the acc module would incorrectly fill
	in a "msg->new_uri" field which should NOT be freed into the SIP request
	structure, leading to the memory pool being corrupted upon transaction release.

	Credits to Guillaume Lacroix for reporting
	(cherry picked from commit 02cb9f048d0a5e1f988aa9ccae1691216ed16ee5)


2016-07-04  Razvan Crainea  <razvan at opensips dot org>
	* [e7f8d1b] :

	permissions: fix get_source_group() return
	In case a group is not found, return -1 instead of true


2016-06-27  ionutrazvanionita  <ionutionita at opensips dot org>
	* [e56b290] :

	[siptrace][bugfix] fix bad macro in siptrace(trace local ip logic)
	This commit closes #916
	Thanks to @Tinet-AaronAn for reporting the issue
	(cherry picked from commit 2a4f686d4997b814eeaa425dc23fe822cb8ef91a)


2016-06-27  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [618ff92] :

	Fix dialplan module when using db_text backend.
	The db_text makes no difference between NULL or "empty string" values in DB -> both are internally translated as NULL . The dialplan module, in a very abusive way, forces "not null" (in DB schema and in the code for data validation) even for columns that are optional (like subst_exp, repl_exp, timerec and attrs). Besides being bogus (if a column is not to be used, you have to set it to empty string rather than let it NULL), it makes impossible the usage of db_text with dialplan.
	This fix allows (DB and code) the mentioned DB columns to be also NULL.
	The change is backward compatible, it should not break any existing usage of the dialplan module.
	(cherry picked from commit 8f548976389ee3968bf06f649b54d88db694f949)


2016-06-25  Liviu Chircu  <liviu at opensips dot org>
	* [055730a] :

	Fix compiler warning
	Using gcc 4.8.4, we would get:

	net/trans.c:43:2: warning: missing initializer for field ‘name’ of
	‘struct proto_info’ [-Wmissing-field-initializers]
	  { }, /* PROTO_NONE */
	    ^
	(cherry picked from commit 376579fa53abb6fc16de76a3070d082c9d958165)


2016-06-24  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [81da723] :

	Fix script varibles for providing port and proto (as part of SIP URI).
	If the SIP URI does not have an explicit port or proto, determine the default port/proto in a SIP wise manner (rather than returning 5060 / UDP) (Ex: sip:example.com;transport=tls has default port 5061 and not 5060 ; or sips:example.com has default proto TLS and not UDP).

	Affected variables are $dp, $rp, $op and $dP, $rP, $oP
	(cherry picked from commit 6cc850e34dcd022f1ed354bd50d9a1809518fa1f)


2016-06-24  Razvan Crainea  <razvan at opensips dot org>
	* [6e0e811] :

	Allow proto modules to populate its name
	(cherry picked from commit 00d052c18bd663e24769b7198a24aefbcd1963dc)


2016-06-24  Razvan Crainea  <razvan at opensips dot org>
	* [daf692a] :

	proto: always populate default values for protocols name and port
	This allows you to print the protocol you received, and its associated port
	(cherry picked from commit 0ae5ba280618e076a7ba658d15db32b877b55442)


2016-06-23  Razvan Crainea  <razvan at opensips dot org>
	* [d4c45ab] :

	init: use the specified CFGFILE in debian init
	In case the CFGFILE changes in the init script, opensips will still start with
	the compiled file instead of the one configured
	(cherry picked from commit 030efef84d240646ed8e99616b8a6eb64f7d17d2)


2016-06-17  Razvan Crainea  <razvan at opensips dot org>
	* [d00f1f3] :

	Update version from 2.1.2 to 2.1.3 for specs


2016-06-17  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [853998c] :

	Fix proper testing of context content
	If a STR is register to the context, a valid STR * will be always returned , so we need to test the content, not the pointer.
	(cherry picked from commit 968a8a807c102a6d53f2bc831cde74c79ee754a9)


2016-06-17  Razvan Crainea  <razvan at opensips dot org>
	* [01cf24e] :

	rtpproxy: no need to update the len for IPv6
	(cherry picked from commit 5cfd916ca41ed60c9997f95d05694c9083b743b1)


2016-06-17  davesidwell  <davesidwell at users.noreply.github dot com>
	* [2edafc6] :

	Update rtpproxy.c
	When moving stored parameters from Branch AVP to Dialog variable, make sure that the integer value "setid" is handled correctly so that it remains valid for the remainder of the dialog.
	(cherry picked from commit e267e9eb83e2345ca716b897975c2fbfbb4e75ce)


2016-06-17  davesidwell  <davesidwell at users.noreply.github dot com>
	* [5708cf5] :

	Update rtpproxy.c
	When building I/O vector for command to rtpproxy in "force_rtp_proxy_body", after an IPv6 address is detected and the "6" option is added, increase the length component in the I/O vector so it is passed correctly.
	(cherry picked from commit 4e73871adba3f48b67a9ebbf20a2d9c60b823be8)


2016-06-16  Andrey Vorobiev  <andrey.vorobiev at mind dot com>
	* [5c25300] :

	Add support for SIP URIs without user part in 'avpops' module.
	This module provides a set of avp_db_xxx functions which take pseudo
	var and flag as first argument. Flag can be one of username, domain,
	uri or uuid. Previosly avp_db_xxx functions used to return an error if
	flag has been set to username, domain or uri and specifed pseudo var
	did not contain username and host after parsing as SIP URI. This
	behaviour seems to be strange because if flag is being set to
	domain/username and sip URI contains domain/username we can still
	load/store/delete this variable.
	(cherry picked from commit 459f2e90ed277a0371a3325b27038213c5083e8c)


2016-06-16  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [8ea0ab1] :

	Fixed failure to enable NAT pinging.
	Commit 8f0c677 introduces a bug in testing is usrloc domains are available, and if not, to disable the NAT pinging in nathelper. The test is wrong as it is done in mod_init, while registrar module registerd the usrloc domain via fixup function, after the mod_init section.

	Reported by Nick Altmann
	(cherry picked from commit f150fb75611a6e61eabc134f266064bd23f1c850)


2016-06-16  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [5b76510] :

	Fix memory corruption on $stat() vars
	The $stat() var specs are kept in pkg, while the name (if stat not found) is kept in memeory. This means all the copies (form all procs) of the specs will point to a single shm block. It is not safet to free this block as you have no idea how many copies of the spec (from other processes) still refer the name.
	Closes #902
	(cherry picked from commit 4baead765179f6bfbc098b3e59791d7bbc4a8d42)


2016-06-16  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [248c836] :

	Fix potential 100 Trying duplicates.
	Added the "auto_100trying" module parameter to allow the script writter to take control (from script level) over when the 100 Trying reply is to be sent back.
	By default, the reply is automatically generated when the INVITE transaction is created.
	Fixes #833

	(cherry picked from commit b023c93a8c476e70b1550da4f46c91d6e2679442)
	(cherry picked from commit 71b527446b00fc4e3886d8d02c7d03d313dbee05)


2016-06-09  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [58b2d8b] :

	Fixed forcing FAST LOCKS for arm6.
	Use FAST locking support for arm6 too.
	For Linux, use POSIX as default locking support.
	(cherry picked from commit 058e16f2a76df9be4e48fa6866b096502981d530)


2016-06-08  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [2ca9e1d] :

	Fix evaluating the SIP port from a SIP URI.
	Use the new function get_uri_port() to evaluate the port and proto, in a SIP wise manner, form a SIP URI. If port/proto are not explicitly set in the URI, consider the default port for the used transpor proto. If protocol misses, we assume the default protos according to the URI schema.

	NOTE: it is completly bogus (and dangerous) to assue 5061 if SIPS schema is used as:
	1) SIPS can use used with WSS, which actually has 443 port
	2) TLS can pe required via transport param in a SIP schema URI too
	(cherry picked from commit 4c54bcd8bf0426f899b82505e493c97ef5378c79)


2016-06-07  Vlad Paiu  <vladpaiu at opensips dot org>
	* [10bff83] :

	Removed compilation warning
	implicit declaration of function â"sched_yield" [-Wimplicit-function-declaration]
	(cherry picked from commit 8ef8d79701357b7412555519e166481e699e9833)


2016-06-03  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [485bfad] :

	Removed wrong "NOT NULL" constraint over the contact DB fields
	The code actually handles the case of NULL callee / caller contacts, so DB must allow NULL values.


2016-06-03  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [a5b1249] :

	Removed unused "error" jump label
	(cherry picked from commit 5819b0fa7033bf2a6daef824bc21dd4ba497ae1b)


2016-06-03  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [48c178b] :

	Fix error handling in DB writes.
	If inserting/updating a dlg record in DB fails, do not exit with error, but continue with the rest of the dialogs.
	Credits for finding and reporting this go to Rik Broers @ Motto
	(cherry picked from commit 0ca6cf035471fc010366e4d29ced5d6fd63199ab)


2016-06-03  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [f2ab0da] :

	Proper handle the case of no usrloc domain registered.
	Prevent get_next_udomain() crashing if there are no usrloc domains registered (reported by Qasim Akhan on users mailing list.
	Do not enable the pinging support in nathelper if usrloc has no registered domains.
	(cherry picked from commit 8f0c677be7dfd3fe6b17932173f14e049ae466a5)


2016-06-01  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [72f1711] :

	Fix documentation on former b2bl_key_avp module param
	(cherry picked from commit ca21c6d2871e01d093c69371ddcc204c5af0355a)


2016-05-31  Razvan Crainea  <razvan at opensips dot org>
	* [34abb00] :

	httpd: properly treat select response
	(cherry picked from commit b49d37494d77c81bdbf76406fc568f530cd66379)


2016-05-30  Razvan Crainea  <razvan at opensips dot org>
	* [1867198] :

	Update ChangeLog for 2.1.3

=========================== Release 2.1.3 ==============================

2016-05-30  Razvan Crainea  <razvan at opensips dot org>
	* [bee0cee] :

	Update version 2.1.3


2016-05-30  Liviu Chircu  <liviu at opensips dot org>
	* [3a5138b] :

	Fix invalid memory access with async MySQL queries
	Due to the way the libmysqlclient query result strings were managed,
	they would be freed by the library before OpenSIPS would copy them
	into the output AVPs.

	This patch fixes the issue by adding a new DB API function which handles
	the cleanup of async query results.

	Reported by Ovidiu Sas
	Addresses issue #873
	(cherry picked from commit 177c60a0e13471a87d80f21504894b883038ffa4)

	Conflicts:
		db/db.h
		modules/avpops/avpops_impl.c
		modules/db_mysql/dbase.c
		modules/db_mysql/dbase.h
		modules/db_sqlite/db_sqlite.c
		modules/db_virtual/db_virtual.c
		modules/db_virtual/dbase.c
		modules/db_virtual/dbase.h
		modules/sipcapture/sipcapture.c


2016-05-30  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [d670270] :

	Fixed interface matching in loose_route()
	If port is missing in Route URI, do not assume default 5060, but consider the schema and protocol (they may require a different default port).
	Ex: sip:10.0.0.5;transport=tls was previously handled as sip:10.0.0.5:5060;transport=tls, which is wrong as the default TLS port is 5061
	Reported on mailing list by Ravitez Dondeti.
	(cherry picked from commit 3593a5f5b2e012154b1c9a00e1645c67c5ece91c)


2016-05-30  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [82f8093] :

	If POSIX sems are used, be sure to link against pthread lib
	(cherry picked from commit f7de6406056cbae95ba9f7521d822d280afbe6a2)


2016-05-30  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [7bc985c] :

	Fixed proper cleanup on failure of tcpconn_new()
	The chances for going for error cases are very low, still let's do it in the proper way
	(cherry picked from commit 57c163b1b7680d3cc01227dbca7676e532aa7539)


2016-05-30  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [f8a21e4] :

	Fixed bogus test when using POSIX or PTHREAD locks.
	Reported by Steve Woolley.
	(this was fixed on 2.2 and trunk when debug support was added for locks).


2016-05-27  Vlad Paiu  <vladpaiu at opensips dot org>
	* [d3f56fd] :

	Link the dialog cell into internally generated requests from the dialog module
	Fixes #839
	(cherry picked from commit 66937a2834d5680031f81c881719b43018fa06ad)


2016-05-27  Razvan Crainea  <razvan at opensips dot org>
	* [4c18d31] :

	add license to rw_locking.h header
	(cherry picked from commit e3a57ac953259a0254a07198aabc88eaac9da9c2)


2016-05-27  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [1a38656] :

	Fixed missing MI reply on pua_publish.
	Properly send an MI reply for the async pua_publish with Expires 0.
	Many thanks to Damien Sandrs for invetigating and reporting.

	Closing #657
	(cherry picked from commit 60d01efe811ac7eeaa063032a309b1895c59e92f)


2016-05-26  Liviu Chircu  <liviu at opensips dot org>
	* [2b57eaf] :

	Improve error reporting for unknown script vars
	Fixes #574
	(cherry picked from commit 97ace293dd4c7eb2fe8cd8fbee693455a5737861)


2016-05-26  Razvan Crainea  <razvan at opensips dot org>
	* [7697fba] :

	dbtext: convert DBG to ERR for better debugging
	(cherry picked from commit 0f08b26e40b31bb8af325ba62cfa32676c62ae86)


2016-05-26  Liviu Chircu  <liviu at opensips dot org>
	* [4ef316b] :

	dialplan: Improve documentation
	Added paragraphs regarding rule types along with explanations on
	they way priorities and rule tie-breaking work.
	(cherry picked from commit 46894f819d1d7d6092129b334e33956e89e5d4ea)

	Conflicts:
		modules/dialplan/doc/dialplan_admin.xml


2016-05-26  Razvan Crainea  <razvan at opensips dot org>
	* [8f46c2f] :

	fix bin crash if no listener defined
	When using usrloc and dialog replication, if no bin_listen is defined,
	OpenSIPS crashes. This fix ensures that if there are any replication
	destinations defined, the binary listener exists.

	Thanks go to Stas Kobzar for reporting this
	Closes #652


2016-05-26  Liviu Chircu  <liviu at opensips dot org>
	* [9c66491] :

	dialplan: Fix a rule tie-breaking bug
	When an input string would match both a "string" rule and a "regex"
	rule, the priority based tie-breaking was incorrect (now favouring
	the bigger priority instead - opposite to default module behavior).

	Thanks to @paolodepa for suggesting this fix
	Fixes issue #696
	(cherry picked from commit cbdd79ab3f6d772c6ef1fb7afc44990e9cad294e)


2016-05-25  Razvan Crainea  <razvan at opensips dot org>
	* [a645657] :

	call_center: obey lock_set interface
	(cherry picked from commit 4a226ced3309a045b11f6e651bebd6b076faefa2)


2016-05-25  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [f663dd3] :

	Fix warning in SYSTEM V locking functions
	(cherry picked from commit 53b3f402a4d9fb0ff1ba30288d810d41d6b55b1b)


2016-05-25  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [a18183f] :

	Fix bogus set locking functions.
	It is used for SYSTEM V locking only, looks like a copy'n'paste error.
	(cherry picked from commit 4bcdf4e6aee07ef965f6ae573b289f3fd082fdde)


2016-05-25  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [c6df63a] :

	Proper support for USE_POSIX_SEM option in Makefile
	(cherry picked from commit 5e40aaf9c3ed8ab4381d847f6a1f6a01a8113bf7)


2016-05-25  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [0c9c688] :

	Fix bogus destroy of a RW lock.
	(cherry picked from commit 83f394579a88a6a9185342cf5f92401ef5c18e5a)


2016-05-25  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [c0c9eaa] :

	Obey USE_SYSV_SEM and USE_PTHREAD_MUTEX.
	If USE_SYSV_SEM or USE_PTHREAD_MUTEX are defined via Makefile.conf, do you force autodetection (based on arch type) of the locking support.
	(cherry picked from commit 39592dc9f25ecee982156e365d160642bdde48e8)


2016-05-25  Liviu Chircu  <liviu at opensips dot org>
	* [d1e0989] :

	mi_xmlrpc_ng: Remove an incorrect free operation
	Completes commit d047e109
	(cherry picked from commit 99f039e37cd79621b2dcc2b5ec2decc9e7c39670)

	Conflicts:
		modules/mi_xmlrpc_ng/http_fnc.c


2016-05-25  Liviu Chircu  <liviu at opensips dot org>
	* [3e5fe64] :

	mi_xmlrpc_ng: Fix a shared memory leak
	(cherry picked from commit d047e1096e2f6624f776d9a031f92be3cc9a0a0d)


2016-05-24  Liviu Chircu  <liviu at opensips dot org>
	* [dfda90a] :

	TCP alias lookup: Add matching by transport
	Further improving commit 13970bb.
	(cherry picked from commit ea699f0116a28cd03a0d1ff50da3fc6045ac3da5)


2016-05-24  Liviu Chircu  <liviu at opensips dot org>
	* [5937884] :

	TCP connection lookup: Add matching by transport
	The fact that all currently supported TCP-oriented protocols have different
	standard ports is not an excuse for not including the transport into the
	match condition (i.e. dest IP address + dest port + dest transport).

	This may very well prevent issues with messages being sent out over the
	wrong TCP connection in a number of scenarios where we employ TCP connection
	reusage over both plain TCP and TLS with a Proxy that specifies the same port
	in the topmost Via header when it establishes each of the two connections.
	(cherry picked from commit 13970bb65253f1b35156466c6f514a4c520d8893)

	Conflicts:
		modules/proto_bin/proto_bin.c
		modules/proto_hep/proto_hep.c
		modules/proto_wss/proto_wss.c
		modules/tls_mgm/tls_mgm.c


2016-05-24  Liviu Chircu  <liviu at opensips dot org>
	* [3a7f90e] :

	Revert "Accept TCP aliases by default"
	This reverts commit d62bc967b0d6784d2baced88b895da57f3f4ab9a.

	Firstly, TCP connection reusage (RFC 5923) should only be employed between
	TLS endpoints - only TLS allows the endpoints to authenticate each other
	during connection setup, preventing unauthorized connection hijacking.

	Secondly, aside from any security considerations, RFC 5923 must
	not be employed fanatically (Proxy-Proxy, Edge-UA, UA-Proxy) on any TCP
	connection (especially disregarding the ";alias" Via parameter!), but
	rather only between adjacent SIP entities who can both initiate a
	connection towards each other, and also support the RFC. In the real
	world, we're basically only talking about the Proxy-Proxy usage case, as
	any SIP UA scenario will most likely involve some form of NAT and a
	Proxy that cannot open connections backwards, towards the UA. In these
	cases, TCP connection reusage is _completely_ out of the question, as a
	single UA might end up receiving all calls of all users behind their
	public IP.

	Thanks to Jonas Borjesson for reporting the problem in the first place.
	(cherry picked from commit 715339fdd25bc74797e6f978d164eb0c4d5669ce)


2016-05-23  ionutrazvanionita  <ionutionita at opensips dot org>
	* [0735d51] :

	[mmgeoip] allow chosing memory caching type
		Before GEOIP_MMAP_CACHE was used causing a segmentation
	fault when database file was changed. Now users can choose between
	reading the database directly from file, cahing it into memory with
	the possibility to change the database file at runtime.
	(cherry picked from commit ecf5032aaafbe5a93bbfc3562c4b3358548839e7)


2016-05-23  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [1c07f61] :

	Added extra log message on openssl 1.0.1e-fips bug.
	If CRYPTO_set_mem_functions() fails, make a note on the openssl 1.0.1e-fips bug, so users may have a hint on the actual issue.
	See more  #834.
	Closing  #834.


2016-05-23  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [5c3f7ff] :

	Fixed bogus name of  "pkg-config"


2016-05-20  Razvan Crainea  <razvan at opensips dot org>
	* [351d85b] :

	th: fix dlg flag check
	(cherry picked from commit 1b5802d2e4876e0d63eeeec5a6edcb7a2321e9d0)


2016-05-20  Razvan Crainea  <razvan at opensips dot org>
	* [2a3d31e] :

	re-register topo hiding callbacks after restart
	Thanks to Pete Kelly for reporting this
	(cherry picked from commit 4c84bd84ad67e71f174b3297ff3432ca21bafab4)


2016-05-20  Liviu Chircu  <liviu at opensips dot org>
	* [bab109f] :

	Fix a string concatenation operator bug
	This patch fixes an issue with string concatenation where any NULL
	operand would cause all operands to its left to be ignored when
	computing the result of the expression.

	Reported by Ovidiu Sas
	Closes #870
	(cherry picked from commit a420752f436a1f952c255df8d5dbe9ea59b0d653)


2016-05-20  Vlad Paiu  <vladpaiu at opensips dot org>
	* [eacc39c] :

	Process sequential messages received in CONFIRMED_NA state
	Due to UDP race conditions, sequential messages may be received
	before the ACK confirming the initial INVITE ( eg. Re-INVITE sent
	immediately as the call is established in order to force
	a specific codec ) - also push these requests through the whole
	dialog processing in order to avoid any future issues ( eg. CSEQ
	updating which, if left unprocessed, will lead to generating out
	of order sequentials by OpenSIPS )
	(cherry picked from commit bfaf02242a98c464dfbdcd3c3ebf3fbb555bcc47)


2016-05-19  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [d94885a] :

	Fix bogus timer ref counter during expire update.
	Many thanks to Trevor Francis for reporting and helping with troubleshooting and testing.
	(cherry picked from commit 047b1b3e32a9af30dd44f2487460975ed7b3a815)


2016-05-19  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [80a1c31] :

	Fixed preserving 3xx Contacts in TH without dialog
	Reported by Pete Kelly.
	Closes #656.
	(cherry picked from commit 6184b96c94d0fcc298dbe5bce1cd0ca9fb0445d3)


2016-05-18  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [4b0fca5] :

	Fixed bogus memory operations.
	Fixed bogus free (of uninit pointer) if parse_contact() fails
	Fixed shm leak on errors after print_rr_body
	Fixed shm leak on success if record_route is present.
	Reported by John Nash.


2016-05-11  ionutrazvanionita  <ionutionita at opensips dot org>
	* [4f0dce9] :

	[dispatcher] fix double allocation issue
	(cherry picked from commit d6891363e3b3b4047a1948eb03fb6b6bab285885)


2016-05-04  renicok  <renico.koen at gmail dot com>
	* [c25b6b2] :

	Updated opensipsctl.base to also search /sbin
	The md5 utility is located at /sbin/md5 on FreeBSD 8.3. An additional common location was added to allow the script to accommodate this.
	(cherry picked from commit ca87f55ad071257aa3b891347aadb55a7729d25b)


2016-05-04  Razvan Crainea  <razvan at opensips dot org>
	* [d273ced] :

	ratelimit: initialize the length of the algorithm
	(cherry picked from commit 0eebf1058574c622ba3532fb520908da1c1d94a5)


2016-05-03  Razvan Crainea  <razvan at opensips dot org>
	* [25b6041] :

	regex: fix spell-check in package
	(cherry picked from commit 647ea214f1892f8901f562bc45e0e1e33b699aba)


2016-04-26  ionutrazvanionita  <ionutionita at opensips dot org>
	* [5600997] :

	[tls_mgm] properly handle SSL_ERROR_SYSCALL on SSL_shutdown
	(cherry picked from commit bdcee39ebf04f8a74b926dc6e6c311487d3ef601)


2016-04-20  Liviu Chircu  <liviu at opensips dot org>
	* [4358451] :

	MI library: Add comments regarding a known issue
	Currently, MI arrays cannot contain objects with non-identical
	"name" attributes.

	This patch also quickfixes this issue in mi_list_all_profiles() by dropping
	the array idea altogether, in favour of a top-most object.
	(cherry picked from commit 6c105015c3a0a02c6f65822f5ce52e12bd0ae108)


2016-04-20  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [b9aa873] :

	Fixed bogus pkg_free on pointer in data segment
	Reported by @dzhou121
	Closes #854


2016-04-11  Ovidiu Sas  <osas at voipembedded dot com>
	* [36c4c63] :

	pi_http: return "200 OK" instead of "0 Unknown"
	(cherry picked from commit 73f8117f2f5f01560b6698ad845cce0b485df203)


2016-04-07  Kristian Høgh  <kfh at uni-tel dot dk>
	* [44d2748] :

	cachedb_redis: Prevent crash when re-connect keeps failing
	(cherry picked from commit b501df74a231a987babe6eeadb3c676d8823619c)


2016-03-31  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [87c93b8] :

	Fix bogus log


2016-03-30  Liviu Chircu  <liviu at opensips dot org>
	* [e925732] :

	TLS: Fix misleading error logs on accept() failures
	OpenSIPS would always log SSL_accept() failures as being "rejected by
	client". This is entirely not the case, as the errors may as very well be
	server-side, due to cipher mismatches, failed peer verifications, etc.

	Reported by Nabeel Shikder on the "users" mailing list


2016-03-29  Liviu Chircu  <liviu at opensips dot org>
	* [15bf627] :

	drouting api: Fix a double free bug
	Crashes / memory corruptions could ensue after running "fraud_reload" MI
	commands or during OpenSIPS shutdown, if fraud_detection had some data
	to work with.
	(cherry picked from commit 2380bbdaeb0af4efdb293b42ee1ad09f40e3e67c)


2016-03-24  Liviu Chircu  <liviu at opensips dot org>
	* [f1f67d9] :

	Improve robustness of core URI copying functions
	Namely set_ruri(), set_dst_uri(), set_path_vector().

	This patch corrects the behaviour of the above functions when they are
	fed strange/corrupt strings, such as {NULL, 5} or {0x7fb..., 0}.

	There are still plenty of pieces of OpenSIPS code which assume such
	strings should be correctly processed, e.g. next_branches(), which may
	lead to a whole world of problems ranging from segfaults, double free
	operations and dangling pointers all the way up to intermixed shm/pkg
	memory pointers.

	The best way of addressing this issue is to simply accept such input and
	zeroize (and free) the concerned sip_msg attributes.

	Many thanks to Ovidiu Sas <osas@voipembedded.com> for in-depth error
	reporting and assistance in fixing this issue
	(cherry picked from commit 2787308f68e6ee878dcf710cd7b36992af62aab9)


2016-03-24  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [92245fd] :

	Proper handling of isolated EPOLLHUP events.
	capture and handle EPOLLHUP or EPOLLERR events even if they are not in conjunction with EPOLLIN or EPOLLOUT.
	Many thanks to @santhosh-kumar for reporting and helping with troubleshooting.

	Closes #829


2016-03-22  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [8002174] :

	Fixed 491 Pending scenario in B2B.
	Generate 491 Pending reply to the correct transaction (the new incoming one) and drop the requests (do not forward it).
	Credits for debugging, reporting and fixing go to @DMOsipov .
	Closes #679
	(cherry picked from commit ec7b4e54bf7f09fb6ff56e8f8497563cf13719e8)


2016-03-21  Ovidiu Sas  <osas at voipembedded dot com>
	* [ef2a42f] :

	scripts/opensipsctl: complete support for optional database port
	(cherry picked from commit 04d8a84f00e375a0ecf7d41a6b4f421d64018930)


2016-03-21  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [940996f] :

	Prevent async in local route.
	The way local route is implemented (triggered and terminated in TM module) does not allow async resumes, so, for the moment, we simply force all the async triggers to be executed in a sync way in local route.


2016-03-21  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [c4cc161] :

	Accept XMLRPC requests without params node.
	If there are no parameters, the params XML node is not required.
	Repored by Nick Altmann
	Closes #826
	(cherry picked from commit d20b3d05409fc5f712c75b86223fe955e57ec5c4)


2016-03-20  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [143328f] :

	Fixed port param for lb_is_destination().
	It must accept integer values also, not only variables.
	Reported by @telephone-man on GITHUB
	Closes #808.


2016-03-19  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [e49e2e8] :

	Fixed usage of Prep Statement on failed CDRs.
	The number of inserted columns is variable (n+m or n+m+2), so we need different statements for each.
	Reported by @apsaras (on GITHUB)
	Closes #821


2016-03-18  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [e74f665] :

	Fix extracting TO hdr.
	Do not add '@' if username is not present.
	Reported by @DMOsipov on GITHUB.
	Closes #818


2016-03-17  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [847805e] :

	Reset to 0 the whole branch if failed.
	If we do not reset, on trying to add the next branch (on the same position), we will end up with dangling pointers.
	(cherry picked from commit d5c3bd1eed5f40f7425562f8bb65fe2f5c9fc678)


2016-03-16  Razvan Crainea  <razvan at opensips dot org>
	* [a759574] :

	topology_hiding: prefent crash at shutdown
	(cherry picked from commit 00632a0b5a93f84531bb391bda2939b2ba351013)


2016-03-16  Vlad Paiu  <vladpaiu at opensips dot org>
	* [dc229a1] :

	Fixed $TH_callee_callid to reflect '=' being an invalid character in callids Closes #800


2016-03-15  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [981e354] :

	Fix crash when using $si in non SIP routes.
	If using $si in event, timer or startup routes, return a NULL value.
	Use a dummy AF_INET from src and dst IPs.
	Prevent crashing while evaluating $si by checking return code of ip_addr2a()
	Closes #817
	Outdates #828
	(cherry picked from commit 2d0cebc0be2491984ce357afd89d41212866bc06)


2016-03-15  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [b2bc43e] :

	Fixed async jump for end2end ACKs.
	As end2end ACKs do not create a sip transaction, force sync for all async operations (as we cannot suspend and resume).
	Closes #819


2016-03-11  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [1a194ad] :

	Fixed memory leak on checking disposition hdr.
	Free the parsed disposition body all the time (on success and failure) as it is not attached to any structure, so it will leak if not explicitly be freed.
	Credits for reporting this go to Jarrod Baumann.
	Based on an original fix from Jarrod Baumann
	Closes PR #825
	(cherry picked from commit 4601e5653be202912a3732f08cdafc63d64afe7f)


2016-03-09  Bogdan Andrei IANCU  <bogdan at opensips dot org>
	* [e48bc6f] :

	Merge pull request #823 from jarrodb/db_postgres
	Add JSONOID to pg_type.h for supporting JSON return types as DB_STRING
	(cherry picked from commit e6bb7acb66cdc8cc1869ba1f8b7ce3ce123d7b39)


2016-03-08  Liviu Chircu  <liviu at opensips dot org>
	* [e2bdb30] :

	dialog: Lower log level of state change errors
	Out-of-order SIP requests are a frequent occurence in high-traffic
	environments. The dialog module should not consider these events as
	being critical, but rather as warnings, so they can be easily
	filtered out from the logs.
	(cherry picked from commit e403a2bc150b7f9c79a011f4acbcf68e4ce9f77d)


2016-03-08  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [054836a] :

	t_newtran() automatically sends a 100 Tryting for INVITE.
	TO have a consistent behavior between:
		t_newtran();
		t_relay();
	and
		t_relay();

	(where in the first case a 100 Trying will not be auto generated), we do not sent the 100 Trying on r_relay (when transaction is built) but on t_newtan().
	Reported by MAxim Sobolev.
	(cherry picked from commit 0db77896288e7ef093352fc0a08f4035c1191bf4)


2016-03-08  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [f89dfc7] :

	Fixed leak due wrong return code handling.
	Based on a patch provided by Jarrod Baumann (@jarrodb)
	Closes #822
	(cherry picked from commit 3b37b827746459a538fb86507414d4a26481a946)


2016-03-08  Bogdan Andrei IANCU  <bogdan at opensips dot org>
	* [172009c] :

	Merge pull request #814 from sippy/master_rtpp_ip6_fix
	Fix an issue with IPv6 in the rtpproxy module
	(cherry picked from commit f906d931a0908bee05b04843d397fa848158311e)


2016-03-04  Liviu Chircu  <liviu at opensips dot org>
	* [6d126a1] :

	tm: Refactor some hardcoded static string lengths
	This also fixes a couple of chopped MI error strings in "t_uac_dlg"
	(cherry picked from commit 60d4d4bc1edc493aaedcee40976347d3fbe9094e)


2016-03-04  Liviu Chircu  <liviu at opensips dot org>
	* [2555c5e] :

	Allow setting branch flags when no branches are yet appended
	Commit 5e3f06800e was too restrictive, since flags for "branch 0"
	(a special branch, stored in current struct sip_msg) may be set regardless of
	the number of append_branch() operations done previously!

	Reported by Dragomir Haralambiev
	(cherry picked from commit 6d1704c6c936921c504c8261ef5de1d710ed3d22)


2016-03-04  Razvan Crainea  <razvan at opensips dot org>
	* [cde7bd4] :

	tcp: prevent invalid mem access
	Reported by Saúl Ibarra Corretgé
	(cherry picked from commit a607aa846f659f9edf5e08bdb13831e633cdde33)


2016-03-01  Razvan Crainea  <razvan at opensips dot org>
	* [b0e5fab] :

	packaging: add back the memcache for lua building


2016-02-29  Razvan Crainea  <razvan at opensips dot org>
	* [aa4b580] :

	rename s_addr to avoid overlapping with Solaris structs
	Discovered by Nathaniel L. Keeling
	(cherry picked from commit 6c990040da2fd472993015f787b84a10768e1f6c)


2016-02-29  Julián Moreno Patiño  <julian at debian dot org>
	* [8dce547] :

	Deprecate 'use UNIVERSAL'
	(cherry picked from commit e5f0b55da6fd24b6e661801d26d4dd53b1793fd3)


2016-02-26  Razvan Crainea  <razvan at opensips dot org>
	* [7dadebb] :

	loop: declare fd_map for devpoll
	Reported by Nathaniel L. Keeling III
	(cherry picked from commit fe785bfa6e5b2ec5cf06c1850cca860f08989820)


2016-02-26  Di-Shi Sun  <di-shi at transnexus dot com>
	* [41e2b38] :

	Updated to support STIR.


2016-02-25  Razvan Crainea  <razvan at opensips dot org>
	* [39b517d] :

	tls: update install path


2016-02-25  Razvan Crainea  <razvan at opensips dot org>
	* [e615552] :

	other spellchecks
	(cherry picked from commit a547af5b71ca2e9b951c164de82d292e464d35c4)


2016-02-25  Julián Moreno Patiño  <julian at debian dot org>
	* [e6b7395] :

	update spelling checks


2016-02-25  Julián Moreno Patiño  <julian at debian dot org>
	* [d04e3b7] :

	support reproducible builds


2016-02-25  Julián Moreno Patiño  <julian at debian dot org>
	* [04b2eba] :

	update changelog and add berkeley deb


2016-02-25  Razvan Crainea  <razvan at opensips dot org>
	* [6ce7676] :

	debian: fix packaging config target


2016-02-24  Liviu Chircu  <liviu at opensips dot org>
	* [1eeb44d] :

	destination sets: Add yet another NULL check
	Reported by Ovidiu Sas
	Fixes #806
	(cherry picked from commit 5718e24ea3c1d231365202c22893403dc58785bd)


2016-02-24  Razvan Crainea  <razvan at opensips dot org>
	* [3ea83ce] :

	build: change variables for other OSes
	(cherry picked from commit cec0c7244e3eb53c5c08144e17d5e0c5441e5eec)


2016-02-24  Razvan Crainea  <razvan at opensips dot org>
	* [29028cf] :

	Makefile: dash cannot use variables that contain -


2016-02-24  Julián Moreno Patiño  <julian at debian dot org>
	* [8b30865] :

	sync with latest debian package


2016-02-24  Liviu Chircu  <liviu at opensips dot org>
	* [b25c8aa] :

	SIP forking logic: Add extra NULL checks
	This prevents a crash when no branches are pushed yet, but a branch
	management function is called (e.g. t_replicate() or a write to
	$(branch(uri)[0]) is done)

	Issue reported by Trevor Francis
	(cherry picked from commit 5e3f06800eb7a4d9367c1dce87f43ab8420bad5d)


2016-02-24  Julián Moreno Patiño  <julian at debian dot org>
	* [9fc407d] :

	Order target dependencies to avoid FTBFS in parallel builds.


2016-02-24  Liviu Chircu  <liviu at opensips dot org>
	* [bedecc4] :

	Blacklisting logic: Fix async-related issues
	Similar issue to the one behind commit a7b287f5f. Static memory
	holders are no longer compatible with async operations and need
	to be moved into dynamic mem (pkg in our case) so that data can
	be properly restored before resuming the script.
	(cherry picked from commit 2e7588bb43547152d1a594c0ea40b416b1959233)

	Conflicts:
		blacklists.c


2016-02-23  Liviu Chircu  <liviu at opensips dot org>
	* [12817d4] :

	SIP forking engine: Fix async-related issues
	Previously (on OpenSIPS...), doing _any_ async operation at script level
	after a destination set had been built (by lookup(), append_branch(), etc)
	would have lead to unpredictable results.

	This patch addresses the problem by moving the destination set storage
	into the current processing context (from static mem to pkg mem).

	Impact on memory usage at worst (12 branches for each request) is
	an extra 30 MB of PKG memory per every 1000 cps.
	(cherry picked from commit a7b287f5f566b87017a5bc7b3e68ac2fdef5b024)

	Conflicts:
		main.c


2016-02-18  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [b055320] :

	Fix contact DB delete in CONTACT_ONLY macthing.
	Do not use the callid as part of the key during the DB delete as it may changed (can be updated) in the meanwhile.
	Reported by @ferrored.
	Closing #764
	Many thanks to @ferrored for his support in troubleshooting this issue.
	(cherry picked from commit 23155e5acb415a68a81aa070b3c0bf272a47544c)


2016-02-17  Liviu Chircu  <liviu at opensips dot org>
	* [f84cc83] :

	Improve qvalue parsing
	* accept qvalues with no decimal digits (e.g. "1." and "0.")
	  (this removes E_Q_DEC_MISSING from error.h)
	* improve bad qvalue error reporting
	(cherry picked from commit ed60363d9d66bf230872c535e3fc0cf7f117b2c7)


2016-02-15  Razvan Crainea  <razvan at opensips dot org>
	* [96f6c77] :

	arm: unforce thumb mode
	(cherry picked from commit c24b587316306da0e5d58130d8712f314de8cd7a)


2016-02-11  Vlad Paiu  <vladpaiu at opensips dot org>
	* [135a0d6] :

	Don't push throug RTPProxy streams with port 0 in SDP
	(cherry picked from commit 5dec43a750c7af714dfec9ac9ef43cc0c33e2280)


2016-02-11  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [8133656] :

	Fix proper callig in local cancels with TH.
	Extend the coverage of the preocessing context and TM context over the cancel_branch() function (in the timeout handler) so the TH callbacks can reach back the dialog and do the TH related changes.
	Reported by Julian Santer on mailing list.


2016-02-11  Razvan Crainea  <razvan at opensips dot org>
	* [ad44a05] :

	proper compile on gcc 4.8
	(cherry picked from commit 421e3e3b50808f47129dbbb9f987145c8226c0f6)


2016-02-05  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [0a3c97b] :

	Fix IPv6 insertion in fix_nated_contact()
	Add the [ ]  around IPv6 in the newly built contact URI.
	Reported by Jonathan Hunter on the mailing list
	(cherry picked from commit ce89e291e0616d80d555f1e386edde5bbd3922e9)


2016-02-04  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [c846598] :

	Fixed improper setting of Missed column's type.
	Credits go to Pete Kelly (@petekelly).
	Closes #703 .


2016-02-02  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [a3f84d5] :

	Fix freeing processing context after a second async jump.
	If thw processing ctx was stored back into transaction (due a new async call), do not free the current ctx (as it became NULL).
	Reported by Minh PHAN (@qmphan).
	Closes #780 .
	(cherry picked from commit 031304af8be6f683fc4706fb9091fd2b12705f6d)


2016-02-02  ionutrazvanionita  <ionutionita at opensips dot org>
	* [eb586ee] :

	fix async: context shall be destroyed only at the last async call
	(cherry picked from commit 672cb13084891afffba881d2129fdb2037b3dba6)


2016-02-01  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [12d27ab] :

	Fixed autodetection of the reactor size (open files)
	If we auto-detect the size of the reactor(via rulimit), be sure we have enough pkg memory (and do the necessary correction).
	If the open files limit is given, warn if the reactor will use too much memory.
	Thanks to MAxim Sobolev for reporting it via mailing list and to @cepehutu
	Closes #778
	(cherry picked from commit 6dd88abca4cf6f6ec484e7616a584c92d7ff874e)


2016-02-01  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [5b7b5f7] :

	Fix calculation of timer set on 32b
	A bogus bitwise operation broke the calculation of the timer set on 32bits arch.
	Reported by @mshary (Muhammad Shahzad Shafi)
	Closes #732.


2016-01-28  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [bce5306] :

	Fix the sizing of the Async Reactors.
	Adjust the size of the reactor accroding the limit of opens files.
	Closing #765.
	(cherry picked from commit 2efdbf8c45a35c57754ac14e64a356b9bb74fd5f)


2016-01-26  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [bbaf821] :

	Fixed wrong warning on memory leak.
	Set the auth_hdr buffer to NULL after moving the buffer into the lump.
	Reported by Colin Martin on mailing list


2016-01-26  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [41c8902] :

	Fix codec handling functions when faulty streams are defined.
	Bogus test on the return code of stream_process() (using bitwise OR for -1, 0 and 1 values :O ), leads to a generic failure to find any codec in any stream if there is an invalid stream in the SDP.
	For example, if a video stream is defined but with no codecs, stream_process() will return -1 for it (as it is a bogus stream). While iterating through all the stream (including the valid audio stream), the -1 ret code will discard any 1 future ret code due the bogus bitwise OR.
	(cherry picked from commit ef82ca2368462c41f7115202e90f73d8ab16fd1f)

	Conflicts:
		modules/sipmsgops/codecs.c


2016-01-25  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [16b63fd2] :

	README files regenerated


2016-01-25  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [9b42ff6] :

	Fix bugs in modules-readm target.
	(cherry picked from commit 0042b940dbffe057d06217845f399f758051c7fb)


2016-01-25  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [58ba97b] :

	Removed double listing of "address" into EXTRA_TABLES.


2016-01-25  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [aebf41f] :

	Fix STANDARD and EXTRA list of tables.
	Permissions (in postgres) were not granted for the missing tables.
	Reported by Nathaniel L. Keeling III on mailing list


2016-01-25  Vlad Paiu  <vladpaiu at opensips dot org>
	* [2641feb] :

	Fix double free in case of errors when running MI command
	(cherry picked from commit ce6e8444afeb887f30d38cf90b0176ae9960fb72)


2016-01-21  Razvan Crainea  <razvan at opensips dot org>
	* [7de5534] :

	increase versioning to 2.1.2


2016-01-21  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [d9af15b] :

	Missing module "emergency" in extra list.
	This was braking the creation of extra tables (at least in postgres is did).
	Reported by Nathaniel L. Keeling III on mailing.


2016-01-21  Liviu Chircu  <liviu at opensips dot org>
	* [fbb97b8] :

	Coverity PR: minor refactorings
	(cherry picked from commit 975024142e724b315203dd14c58056a77f3d3959)

	Conflicts:
		modules/ldap/iniparser.c
		modules/usrloc/dlist.c

	Credits to Ognjen Seslija for the bug report


2016-01-19  Bogdan Andrei IANCU  <bogdan at opensips dot org>
	* [fbb4aac] :

	Merge pull request #664 from wdoekes/wjd-allow_unset_dlg_in_req_route
	dialog: Document that unset_dlg_profile can be used from request_route.
	(cherry picked from commit 8d23d9bd7e55ede0f68c042204096fe1b4087dae)


2016-01-19  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [b602a7f] :

	Fix restoring leg route set.
	Reported by Søren Andersen.


2016-01-19  ionutrazvanionita  <ionutionita at opensips dot org>
	* [d0f5c3d] :

	db in string or int pvar for avp_db_query()
	(cherry picked from commit 8a512731df99621025744aaa25b17931759b91d4)

	Conflicts:
		modules/avpops/avpops.c


2016-01-18  Razvan Crainea  <razvan at opensips dot org>
	* [0a642c5] :

	uri: fix e164_check overflow checking
	Reported by @ferrored on github
	Closes #762
	(cherry picked from commit 70e5a656c3cd4aa14757245dd710d3869575d3ca)


2016-01-18  Razvan Crainea  <razvan at opensips dot org>
	* [bb37439] :

	update ChangeLog with all commits in 2.1.2


=========================== Release 2.1.2 ==============================
2016-01-18  ionutrazvanionita  <ionutionita at opensips dot org>
	* [0c26f91] :

	fix calls per minute for fraud_detection module
	Now the calls per minute parameter is build as consisting of an initial
	time(t0) and a 60 seconds window(as was before). Each window slot holds the
	calls received in that second(as before). The difference is that now
	these parameters are updated based on three conditions:
	* we receive the call between [t0; t0 + WINDOW_SIZE(60s)] - we only update
	the number of calls for that slot(t0 + current time) and the calls per minute
	parameter
	* we receive the call in the interval of [t0+WINDOW_SIZE; t0+2*WINDOW_SIZE] -
	we do the following: move t0 in current call time - WINDOW_SIZE, invalidate
	all the calls we knew of from t0 to current t0 (current call time - WINDOW_SIZE)
	* we receive a call after 2 * WINDOW_SIZE(60 seconds) + t0 - this invalidates
	all the calls we knew of since the window is not does not contains calls newer
	than the last 60 seconds;
	(cherry picked from commit dd25c63adb8832d59861cf98b6fba1a2ad89a307)


2016-01-18  Ovidiu Sas  <osas at voipembedded dot com>
	* [bd3751b] :

	uac_registrant: update timer handling  - closes #758 - uac_registrant wrong hash sequence
	(cherry picked from commit be371dab7fa9b6fa495b99e69e623fed73500a74)


2016-01-17  Nick Altmann  <nick.altmann at gmail dot com>
	* [44cc594] :

	RPM spec: prepare for new build system - remove obsolete triggers - change tarball name and url


2016-01-15  ionutrazvanionita  <ionutionita at opensips dot org>
	* [5a28baf] :

	[siptrace]fix proto issues
	leave IPPROTO_* format in hep header(which is returned by
	pipport2su() function) and after setting it use OpenSIPS
	format for sending(PROTO_UDP)


2016-01-15  ionutrazvanionita  <ionutionita at opensips dot org>
	* [ad32566] :

	[avpops]fix acmds instead of cmds
	(cherry picked from commit 9bd4c77ade737108aa45a755bb4e1055b4adca36)


2016-01-15  Razvan Crainea  <razvan at opensips dot org>
	* [c0a0408] :

	function search: properly search through switch st
	(cherry picked from commit 446dd5876b633c95000e7b80a0ef8a3058c018a1)


2016-01-15  ionutrazvanionita  <ionutionita at opensips dot org>
	* [69aad41] :

	[avpops]check if asyn funcs used in separate loop(on acmds struct)
	(cherry picked from commit 939b3433f3fe4c0887b818e856ff6e857c9e60d0)


2016-01-14  Nick Altmann  <nick.altmann at gmail dot com>
	* [7023ade] :

	RPM spec: update version to 2.1.2


2016-01-14  Razvan Crainea  <razvan at opensips dot org>
	* [02fde2a] :

	2.1.2: update changelog and minor version


2016-01-14  Liviu Chircu  <liviu at opensips dot org>
	* [83f4597] :

	Coverity PR: Fix bad conflict merge


2016-01-14  Dusan Klinec  <dusan.klinec at gmail dot com>
	* [56a7230] :

	fixing coverity found defects - memory corruption, null dereference
	(cherry picked from commit fd57609f5411e622dca593b729e1826269243c5b)


2016-01-14  Dusan Klinec  <dusan.klinec at gmail dot com>
	* [6b4a327] :

	fixing coverity found defects - null dereference & broken logic
	(cherry picked from commit 81aeba42ca04df7b3fc42ab2498717cc31227967)


2016-01-14  Dusan Klinec  <dusan.klinec at gmail dot com>
	* [37a7466] :

	fixing coverity found defects - null dereference
	(cherry picked from commit 906bb9172b4ce0ab0e7bf4eca7da58211aa8ac5b)

	Conflicts:
		cachedb/cachedb_id.c


2016-01-14  Dusan Klinec  <dusan.klinec at gmail dot com>
	* [19e5188] :

	fixing coverity found defects - null dereference
	(cherry picked from commit b578dda307f24e56f456e5b02c0c7591ed6746a4)


2016-01-14  Dusan Klinec  <dusan.klinec at gmail dot com>
	* [20004e4] :

	fixing coverity found defects - copying into fixed size buffer without check, db_http
	(cherry picked from commit d471234733de299c88f1036ba17a2406b8ae7a89)


2016-01-14  Dusan Klinec  <dusan.klinec at gmail dot com>
	* [c9aaae3] :

	fixing coverity found defects - copying into fixed size buffer
	(cherry picked from commit 92a7361eda2c6cd6e9ad637dab187cf87fefa987)


2016-01-14  Dusan Klinec  <dusan.klinec at gmail dot com>
	* [c48773c] :

	fixing coverity found defects - null dereference, invalid e164 number check
	(cherry picked from commit b8e2318ba58e56484294913e21a74a7cd79adf40)


2016-01-14  Dusan Klinec  <dusan.klinec at gmail dot com>
	* [ed699bf] :

	fixing coverity found defects - null dereference, break missing
	(cherry picked from commit c004967f7c272e5b9043f5f3e330827f0682a009)

	Conflicts:
		db/db.c


2016-01-14  Dusan Klinec  <dusan.klinec at gmail dot com>
	* [a152bdf] :

	fixing coverity found defects - logical fix in ul callback check type, null dereference
	(cherry picked from commit aeedb7d94439b774d35009899b04d2c6060437d0)

	Conflicts:
		modules/dispatcher/dispatcher.c


2016-01-14  Dusan Klinec  <dusan.klinec at gmail dot com>
	* [50737ff] :

	fixing coverity found defects - processing initialized variables, control flow, invalid expressions
	(cherry picked from commit b22844e0a1d4d54d0f8f836837f8447154799011)

	Conflicts:
		modules/drouting/drouting.c


2016-01-14  Dusan Klinec  <dusan.klinec at gmail dot com>
	* [21083e8] :

	fixing coverity found defects - resource leakage
	(cherry picked from commit e09f09ae89aff31393b04e40b4f82632fd4f50ff)


2016-01-14  Dusan Klinec  <dusan.klinec at gmail dot com>
	* [57a7bf0] :

	fixing coverity found defects - invalid memory access / memory corruptions
	(cherry picked from commit c537cb8151e9436d88a9410e02ef11a093008ff0)

	Conflicts:
		modules/dialog/dlg_tophiding.c


2016-01-14  Razvan Crainea  <razvan at opensips dot org>
	* [4b011be] :

	proto_ws: fix common variable used


2016-01-14  Ovidiu Sas  <osas at voipembedded dot com>
	* [9608063] :

	tm: remove unused variables
	(cherry picked from commit 666cf8316d3105a2920b68df8d600be02c8943bb)


2016-01-14  Razvan Crainea  <razvan at opensips dot org>
	* [5d813f6] :

	ws: release TCP connection if not static
	This should fix a memory leak (reported in #743 by Eric Tamme)
	(cherry picked from commit 29190f3898e33c410745a9acce2f5ae8df650da1)


2016-01-14  ionutrazvanionita  <ionutionita at opensips dot org>
	* [548eb53] :

	[sipcapture]completely remove mod_init mi_cmds registration
	(cherry picked from commit 02defafe421fa1ff4ab0f05f63cc490fa1717ff3)


2016-01-14  ionutrazvanionita  <ionutionita at opensips dot org>
	* [d2f90b6] :

	[sipcapture]mi_cmds were registered twice
	(cherry picked from commit e36453ee6c687975382c3125b1dad9a382be041a)


2016-01-13  ionutrazvanionita  <ionutionita at opensips dot org>
	* [4c775f2] :

	[snmpstats]more hints for setting up in the docs
	(cherry-picked from 6e7535207d5531e0fc2562d05b874acd30488368)


2016-01-13  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [f267746] :

	Allow retransmissions and wait for reply/timeout on canceled branches.
	Do not do anything about branches with no received reply; better continue the retransmission hoping to get something back; if still not, we will generate the 408 Timeout based on FR timer; this helps with better coping with missed/lated provisional replies in the context of cancelling the transaction

	Many thanks to Maxim Sobolev for bringing this under discussion.
	More to be read:
	http://lists.opensips.org/pipermail/devel/2015-November/018623.html
	http://lists.opensips.org/pipermail/devel/2015-December/018810.html
	(cherry picked from commit 0dfb46df96d594c9b592d64913a44ab1cccd80e3)


2016-01-13  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [5f486bb] :

	Fix race condition between retransmission and wait timer in TM.
	Overlapping of retransmission timer and wait timer may lead to inconsistent timer list -> various crashes around TM timer lists.
	Related to #749, #732, #723.
	Many thanks for Trevor Francis ( @46labs )  for helping with the troubleshooting.

	IMPORTANT NOTE: this is a temporary fix as it simply avoid the collision between the two timer routines - normally the routines themselves should be safe to run in parallel (more digging is required here).
	(cherry picked from commit ea6e1fa7fed29efed6057894a8cc4054308160b3)


2016-01-13  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [4395575] :

	Fix pinging partitioning from nat_traversal.
	Do not use the static counter as the timer routine gets executed in various processes now - better use a shm counter.
	See all the details in #751
	Based on the PR #751
	Closing / outdating #751
	Credits for finding the fix and comming up with a solutoin go to @aerringer.


2016-01-13  Razvan Crainea  <razvan at opensips dot org>
	* [5d32b84] :

	redis: add timeout for connect and query
	This prevents OpenSIPS from blocking waiting for a connection to be
	established.

	Fixes #753 reported by Nick Altmann
	(cherry picked from commit 76034ad60dfd991232ac3053c07f7a72de234e43)


2016-01-08  Liviu Chircu  <liviu at opensips dot org>
	* [f4b81d3] :

	Fix several print formatting bugs
	%*.s is a format specifier for string width
	%.*s is a format specifier for string length

	99% of the time, we want the latter one and _not_ the former.
	(cherry picked from commit e0c0a54ca599c0de9fa84ab6482a5698bf199e3b)

	Conflicts:
		modules/event_flatstore/event_flatstore.c
		modules/proto_tls/tls_params.c
		modules/usrloc/dlist.c


2016-01-08  Liviu Chircu  <liviu at opensips dot org>
	* [a752c53] :

	regex: Fix implicit declaration of 'isspace'
	(cherry picked from commit 36072086f7996af4f1e4f4446017561d706250b3)


2016-01-08  Liviu Chircu  <liviu at opensips dot org>
	* [5d1d634] :

	cachedb_mongodb: Fix crash when losing DB connection
	Tested with mongo-c-driver v0.6. It turns out that the driver's
	mongo_cmd_get_last_error() does not always return an iterable bson
	structure. This patch adds a safety check, so that iteration is skipped.

	Reported by Sasmita Panda
	Closes issue #747
	(cherry picked from commit 2e5160e5e1d895a5694ba4297058e1ca587e787a)


2016-01-08  Bogdan Andrei IANCU  <bogdan at opensips dot org>
	* [7f933a5] :

	Merge pull request #746 from lemenkov/remove_has_sdp
	rtpproxy: patch: has_sdp() does not exist
	(cherry picked from commit 2e59ba930001593fcd8b60cf446979f69594bedf)


2015-12-23  ionutrazvanionita  <ionutionita at opensips dot org>
	* [7df8a1a] :

	avpops: start without db_url if no func is using DB
	Conflicts:
		modules/avpops/avpops.c


2015-12-23  ionutrazvanionita  <ionutionita at opensips dot org>
	* [c11af55] :

	strip_body(): check if content-type exists


2015-12-22  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [a95341a] :

	Manula cherry-pick of ef2232


2015-12-22  ionutrazvanionita  <ionutionita at opensips dot org>
	* [62e2969] :

	comparse_uris: unescape all characters in user field


2015-12-21  ionutrazvanionita  <ionutionita at opensips dot org>
	* [ef76542] :

	Usrloc: modify invalid contacts behaviour
	* stop inserting a contact even though received is OK
	(call parse_uri() for each contact)
	* at startup, if a bogus contact is found continue processing,
	letting the user know that he has to remove that contact from
	the database


2015-12-09  Razvan Crainea  <razvan at opensips dot org>
	* [a173499] :

	b2b_logic: set late SDP negociation flag
	For the entity that initiates a call, late SDP negociation is used, because
	the SDP of the first entity is not known. This patch sets the late_sdp flag
	for that entity, to flag the b2b logic to send the ACK with SDP.

	This bug was reported on the mailing list by Sebastian Sastre.
	(cherry picked from commit 20df8362455a60aaded86daa9a79d189b73a1880)


2015-12-08  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [68b202e] :

	Fix DB key when updating the destination state.
	Beside SIP URI, use the SET ID too when performing FB updates to set the destination state.
	(a SIP URI may be present in multiple SET IDs)
	Closes  #711 , reported by @mishehu


2015-12-04  Bogdan Andrei IANCU  <bogdan at opensips dot org>
	* [ee99ac7] :

	Merge pull request #681 from shiningstarj/dialoginfo-memory-leak
	Presence_dialoginfo: Fix memory leaks in notify_body.c
	(cherry picked from commit ab5cd613df4ef9831a33923ba5e51bf572203c8c)


2015-12-04  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [88bd36b] :

	Return <null> value for missing AVPS.
	Maintain database result integrity by supporting null column values.
	Closes #693 and #677


2015-12-04  Razvan Crainea  <razvan at opensips dot org>
	* [4a06a71] :

	b2b_logic: parameters cannot be lower than 1
	(cherry picked from commit 152f22e63cc3f045492367b18ed5357cf5a89f2b)


2015-12-03  ionutrazvanionita  <ionutionita at opensips dot org>
	* [b6cd61b] :

	properly handle epoll events


2015-12-03  Nick Altmann  <nick.altmann at gmail dot com>
	* [abc82d4] :

	RPM spec: move ulimit to init-script


2015-12-03  Nick Altmann  <nick.altmann at gmail dot com>
	* [98b76ee] :

	RPM spec: increase max files limit and add dependencies


2015-11-27  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [1535a27] :

	Reduce the amount of "useless" DBG's
	(cherry picked from commit 0dca32bddce736ef9fcde5ccdb4674017f9fdf08)


2015-11-27  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [b188bff] :

	Fix proper reporting for the statistics types.
	This fixes the charting of SHMEM related stats in Control Panel
	(cherry picked from commit 52d5ef5bdf03aacb245420bc0193069a7b38322a)


2015-11-25  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [13c6043] :

	Fix bug in populating the PIDs
	(cherry picked from commit eccbf8d5d30bea765f19ab2b9816a57386091692)


2015-11-25  ionutrazvanionita  <ionutionita at opensips dot org>
	* [139415b] :

	fix dangling db conns bug
	* database are now started in child_init
	* avoid opening db conns in mod_init and leaving them in the db pool because
	when fork() shall be done all the processes will use the same db
	structure therefore the same tcp connection
	(cherry picked from commit 47b5dc900efd29f14397807e1947c99540159e26)


2015-11-25  Ovidiu Sas  <osas at voipembedded dot com>
	* [d1177fe] :

	dialplan: check if memory is properly allocated when updateing partition records
	(cherry picked from commit 889f353cecc7a9825867773eb57b0f9d6c21bc35)


2015-11-25  Ovidiu Sas  <osas at voipembedded dot com>
	* [120e6e2] :

	dialplan: allocate the right amount of memory when creating a partition
	(cherry picked from commit bd35916e2e8d09d362f0e298e5e19469f7a53a8f)


2015-11-25  Ovidiu Sas  <osas at voipembedded dot com>
	* [ba0ea01] :

	dialplan: memset to 0 newly alocated memory for dp partition  - suggested by Liviu Chircu
	(cherry picked from commit 1cf5dd8e89a6f05a09a1964c2d53f6aee8ce6131)


2015-11-25  Ovidiu Sas  <osas at voipembedded dot com>
	* [511269f] :

	dialplan: after inserting a new partition, set the pointer to the next record to NULL
	(cherry picked from commit fb3923d7d578a9a9d3a2c0c3427df3c1c9ee1f44)


2015-11-25  Ovidiu Sas  <osas at voipembedded dot com>
	* [8ce36d3] :

	dialplan: enhance debug probe
	(cherry picked from commit f0a75d9ec6040370736a7200ac7c4659e1a052c8)


2015-11-23  Nick Altmann  <nick.altmann at gmail dot com>
	* [21b2728] :

	RPM spec: remove excess rest client package


2015-11-19  Razvan Crainea  <razvan at opensips dot org>
	* [7f570e7] :

	acc:evi: if the request failed send a missed event
	In case the acc_evi_request() function was used on a failed request
	(code < 300), send a missed event rather than the normal one.

	Reported by Trevor Francis from 46Labs
	(cherry picked from commit 18f5da047e6b87434c97f0ddee8a70d5baae79d7)


2015-11-17  Razvan Crainea  <razvan at opensips dot org>
	* [8fe69f1] :

	fix warnings reported by Ovidiu Sas
	(cherry picked from commit 19edf6159bb5a3ac639bd1792c5d2484f165b960)


2015-11-13  ionutrazvanionita  <ionutionita at opensips dot org>
	* [96ec5ee] :

	fix str2int and str2sint input params check
	* if a void string was given to the function ("") 0 value was returned which was not correct
	* input values should be checked for NULL


2015-11-13  ionutrazvanionita  <ionutionita at opensips dot org>
	* [0f82238] :

	check if startup_done var is allocated before trying to set it


2015-11-06  Razvan Crainea  <razvan at opensips dot org>
	* [2526521] :

	dialog: increase ref when setting dialog
	(cherry picked from commit 528655892df6da11cbaba32833d3521187d399ca)


2015-11-05  Razvan Crainea  <razvan at opensips dot org>
	* [01e93c9] :

	tm: free async context when resuming
	This commit fixes context_alloc memory leak
	(cherry picked from commit d69d085b886c621cd54554e44643f0f7849c5f0f)


2015-11-03  Razvan Crainea  <razvan at opensips dot org>
	* [da1b8c3] :

	async: store cancelled and e2eack transactions in async ctx
	This fix prevents transactions from being unrefferenced when dangling
	transaction pointers remain stored in static variables.
	(cherry picked from commit 3f3b6fdc71fb7f86f84e02fdf5f084bf9360deba)


2015-11-03  Razvan Crainea  <razvan at opensips dot org>
	* [cfc1092] :

	topo_hiding: replace LM_INFO with LM_DBG for debugging logs
	(cherry picked from commit 3ae7e37172b5ce3142e8448972a84a49d0faa53a)


2015-11-03  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [6735c27] :

	Fixed Post Script callbacks triggering in Async.
	If the async engine in TM detects a SIP retransmission, break script and run the Post Script callbacks, othewise the transaction will stay ref'ed for ever.
	Credits for spotting this problem go to Razvan Crainea.


2015-11-02  ionutrazvanionita  <ionutionita at opensips dot org>
	* [a836064] :

	fix mem leak in permissions


2015-10-29  Razvan Crainea  <razvan at opensips dot org>
	* [025eb66] :

	properly handle async functions when reactor cannot fullfil the request
	Credits go to 46labs for debugging this
	(cherry picked from commit c18c8ea1f655a34e67eb94e4c7484da6d6965582)


2015-10-29  Razvan Crainea  <razvan at opensips dot org>
	* [e37bdab] :

	run destroy context when the message is sent
	Credits go to 46Labs for discovering and providing test scenarios
	(cherry picked from commit 28bcadf6d874e8e675a7d51ba5288438d463848e)


2015-10-28  Liviu Chircu  <liviu at opensips dot org>
	* [ac557ff] :

	Fix compiler warnings with NO_DEBUG, NO_LOG
	Also add a handy macro for future usage
	(cherry picked from commit 48b88bd9a3b054992a9260f4de227af9853c1dea)

	Conflicts:
		modules/emergency/emergency_methods.c
		modules/emergency/subscriber_emergency.c
		modules/usrloc/udomain.c


2015-10-27  Liviu Chircu  <liviu at opensips dot org>
	* [17255b2] :

	TCP aliases: Fix more race conditions (issue #589)
	_tcpconn_find() returns a pointer which should never be used outside of
	TCP lock. This patch completes commit 22f4c1a2e05 by fixing two
	additional issues of the same type in tcpconn_add_alias()
	(cherry picked from commit cb5eebe00ea735f290a213ea74f55b4afcc06236)


2015-10-27  Liviu Chircu  <liviu at opensips dot org>
	* [34eaede] :

	Fix potential memory corruption on TCP write errors
	This patch fixes a well-hidden TCP connection referencing bug which
	would only reveal itself upon running into failed TCP send() operations
	due to various reasons (e.g. full send buffer) in high-traffic environments.

	Credits to Hieu Ta and Don Steul from Jibe Mobile for detailed reporting
	and providing an adequate replication environment
	(cherry picked from commit 3e1a1a719215814f983001eef199ad01a263244f)


2015-10-26  Razvan Crainea  <razvan at opensips dot org>
	* [fdf38ed] :

	context: add destroy function for registered ctx vars


2015-10-26  Razvan Crainea  <razvan at opensips dot org>
	* [440ab21] :

	fix context reusage if async is made
	This affects timers and failure routes that are supposed to reuse a static context


2015-10-23  Walter Doekes  <walter+github at wjd dot nu>
	* [7901324] :

	exec: Clarify what not to do with exec().
	See:
	https://github.com/OpenSIPS/opensips/pull/375#discussion-diff-19524753


2015-10-22  Vlad Paiu  <vladpaiu at opensips dot org>
	* [f8c424d] :

	Fixed ACKs CSEQ number when doing in-dialog pinging
	The ACK CSEQ number does not depend on the number of pings or other in-dialog requests since the INVITE transaction, it must be the same as the INVITE
	Closes issue #680
	(cherry picked from commit 26a0a62621f6d1e4ea9fee90684a143fbfdc8494)


2015-10-20  wxf  <xiaofeng.wang at bqvision dot com>
	* [4c0c371] :

	fix: some sh(busybox) do not support syntax of `$(< file)'
	(cherry picked from commit ffb25541b6bf4ee841072787f2a09c06c4885ab1)


2015-10-08  Liviu Chircu  <liviu at opensips dot org>
	* [844fae5] :

	Fix `make menuconfig` compile warnings
	(cherry picked from commit b9fe3c2cf1a2f74fbaa451edfbfd597496bec747)


2015-10-06  Razvan Crainea  <razvan at opensips dot org>
	* [fe654e4] :

	ratelimit: avoid deadlock if counter is not updated
	(cherry picked from commit ec25c07c2e8b2baf792bd49f0044adb4a8f52573)


2015-10-06  Di-Shi Sun  <di-shi at transnexus dot com>
	* [a43ccca] :

	Updated to support CNAM diversion use case.


2015-10-05  ionutrazvanionita  <ionutionita at opensips dot org>
	* [ca3895d] :

	fix compression module bugs
	* proper error messages on compress
	* correct buffer size aproximation on gzip compress(10% + 12)
	* fix bug on decompression


2015-09-30  ionutrazvanionita  <ionutionita at opensips dot org>
	* [76e9809] :

	on DB error: avoid double free;release only in destroy function


2015-09-29  ionutrazvanionita  <ionutionita at opensips dot org>
	* [ad8011a] :

	memset all connection memory to 0 to avoid unwanted values


2015-09-24  David Sanders  <dsanders11 at ucsbalum dot com>
	* [4963c7c] :

	Dispatcher module should honor db_default_url
	(cherry picked from commit 684846dd11573161958c0276b582e798c77a18d9)


2015-09-24  David Sanders  <dsanders11 at ucsbalum dot com>
	* [de7bcfc] :

	Dialplan module should honor db_default_url
	(cherry picked from commit 566d4db2cc634bfb0bcbd578acb70d1b69153d48)


2015-09-24  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [34fab0d] :

	Check if at least one DB URL is provided in avpops
	Reported by David Sanders (@dsanders11).
	Closes #644 .


2015-09-23  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [783a18a] :

	Fix usage of t_reply_with_body() with reply lumps.
	Force pushing all reply lumps (headers added to the reply) when using t_reply_with_body() - the function takes the msg from the transaction, not the real msg; so we need to be sure that the msg in transaction was fully cloned.

	Reported by Giuseppe Cardone on mailing list.


2015-09-21  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [6bb8631] :

	Fix auth via B2B module.
	Remove the bogus hooks placed by TM in the outbound SIP buffer (as the buffer may change in local route) and rebuild the B2B invite (with credentials) from the initial sent invite.
	Reported by @DMOsipov and @xxReaper on GITHUB.
	Closing #577 and #628 .


2015-09-18  ionutrazvanionita  <ionutionita at opensips dot org>
	* [aff59f1] :

	also check input parameter for exec_async


2015-09-18  ionutrazvanionita  <ionutionita at opensips dot org>
	* [eef9fa7] :

	correctly check input parameter in exec_sync; close pipe with pclose to avoid leaving unfreed structs in kernel; correctly handle errors in exec_syc


2015-09-16  Răzvan Crainea  <razvan at opensips dot org>
	* [f2ab4c4] :

	Merge pull request #636 from mgwilliams/debian_init
	add missing space in debian/opensips.init
	(cherry picked from commit 67143b16e7d11b7745ca2052cb531ea230c62330)


2015-09-14  Razvan Crainea  <razvan at opensips dot org>
	* [eb99cd9] :

	dbschema: re-generate SQL scripts
	(cherry picked from commit 70a587fa372e17157c0a8dbb1b26e71620ab2ce4)


2015-09-14  Saúl Ibarra Corretgé  <saghul at gmail dot com>
	* [7a7631e] :

	xcap: make the 'doc' column a LONGBLOB on MySQL
	A normal-sized XCAP document with external references easily exceedes
	the default column size, leading to all sorts of problems.
	(cherry picked from commit d419f0543c79c12e0e01dc629dede2d872cc6637)


2015-09-14  Razvan Crainea  <razvan at opensips dot org>
	* [7f57056] :

	regex: release the memory for unused pattern strings
	Thanks go to Federico Edorna <fedorna@anura.com.ar> for reporting and giving
	the solution for this memory leak.
	(cherry picked from commit aa7429e0124478f999ba3737b10ae39900e16b2c)


2015-09-04  Razvan Crainea  <razvan at opensips dot org>
	* [222d849] :

	dialog: return 0 profile size if no value in cache
	Reported by Damien Sanders
	Closes #562
	(cherry picked from commit 7781342ce9366f2a7f9896d66dbc662a643d9d10)


2015-09-04  Vlad Paiu  <vladpaiu at opensips dot org>
	* [d9d254a] :

	Fixed increasing the CSEQ for in-dialog generated message when uac_auth is used in combination with the dialog module


2015-09-01  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [0f2cdaa] :

	Fix callid for "ul_add" MI command.
	As now the callid is updatable, we need to provide a callid string.
	Reported by Stas Kobzar
	(cherry picked from commit 02e886f34ba0a6a147ef4fda0035fb1179bbf835)


2015-09-01  Di-Shi Sun  <di-shi at transnexus dot com>
	* [5b6ec4f] :

	1. Updated to support reporting media addresses, proxy local addresses and provider post dial delay. 2. Updated to support CNAM.


2015-08-31  Bogdan Andrei IANCU  <bogdan at opensips dot org>
	* [e19f11e] :

	Merge pull request #626 from saghul/fix-libdir
	Fix setting LIBDIR
	(cherry picked from commit b4d60f746b4aad08dabc447576c467ab0f270b8d)


2015-08-28  Bogdan Andrei IANCU  <bogdan at opensips dot org>
	* [079de59] :

	Merge pull request #588 from jalung/patch-4
	Update nathelper.c


2015-08-28  Razvan Crainea  <razvan at opensips dot org>
	* [1036869] :

	copyright: remove duplicate license
	(cherry picked from commit 7d6cc3906a87ac5359eb894d8a209aa7ad4a04e3)


2015-08-27  Razvan Crainea  <razvan at opensips dot org>
	* [31a3132] :

	copyright: remove flex generated files
	(cherry picked from commit b8fbf7f5c8c84f14ec3750544d059c73d5758897)


2015-08-27  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [4586ffc] :

	Re-try the writing on EAGAIN.
	As the UDP sockets were moved to non blocking, sendto() may generate EAGAIN if the prev write operation was not yet completed by the stack.
	(cherry picked from commit d3aaf44ccca7eadd0a58914ec54b1ddf17972c46)


2015-08-25  Liviu Chircu  <liviu at opensips dot org>
	* [4012f50] :

	-c and -C binary args: Properly validate module dependencies
	Along with script syntax validation, the "-c" and "-C" binary arguments should
	also ensure all necessary modules are loaded.

	Reported by Maxim Sobolev
	Fixes #616
	(cherry picked from commit 82c3fd68b215ba95a7576ce68577cc289c4b858a)


2015-08-25  Razvan Crainea  <razvan at opensips dot org>
	* [d049947] :

	rtpproxy: dialog is not a mandatory dependency
	(cherry picked from commit aad2e1c7c95ebda25877f5e2164500cb9e6a173f)


2015-08-25  Răzvan Crainea  <razvan at opensips dot org>
	* [76a0a56] :

	Merge pull request #614 from sippy/2.1
	Fix build on FreeBSD (2.1 branch)


2015-08-24  Maksym Sobolyev  <sobomax at sippysoft dot com>
	* [05edc2b] :

	Merge branch '2.1' of github.com:sippy/opensips into 2.1


2015-08-24  Maksym Sobolyev  <sobomax at sippysoft dot com>
	* [b353dfe] :

	Fix build on FreeBSD.


2015-08-24  Sergey Khripchenko  <shripchenko at intermedia dot net>
	* [370c77e] :

	two bugs fixed in db_text module + incorrect use of strncasecmp() + lost pkg_malloc
	(cherry picked from commit de9224b29a4d304b3635818126fde1c234264092)


2015-08-22  Razvan Crainea  <razvan at opensips dot org>
	* [cbfbed0] :

	add packaging/ copyrights


2015-08-21  Razvan Crainea  <razvan at opensips dot org>
	* [2c2c4eb] :

	debian: Makefile skip tests


2015-08-21  Razvan Crainea  <razvan at opensips dot org>
	* [de147c4] :

	update copyright files


2015-08-21  Razvan Crainea  <razvan at opensips dot org>
	* [d0d02b3] :

	xcap_client: fix missing include


2015-08-21  Razvan Crainea  <razvan at opensips dot org>
	* [84917e9] :

	fix backport errors


2015-08-21  Razvan Crainea  <razvan at opensips dot org>
	* [4be80fa] :

	ip_addr: fix unused variable warning


2015-08-21  Razvan Crainea  <razvan at opensips dot org>
	* [239c4a0] :

	gcc 5.1 warnings fix
	re-arranged code to comply with gnu11
	(cherry picked from commit 9da7c53a27b1048fc3244934238fccb0933bad26)


2015-08-21  Razvan Crainea  <razvan at opensips dot org>
	* [efda8e1] :

	fix inline functions to comply with gnu11
	The new gcc 5.1 version uses by default gnu11 standard, which behaves a bit
	differently with inline functions (more details here:
	https://gcc.gnu.org/gcc-5/porting_to.html)

	Closes #555
	(cherry picked from commit 35ae88587cdd0ad74b22dbd2299c0ed3b346e821)


2015-08-20  Razvan Crainea  <razvan at opensips dot org>
	* [9ac540c] :

	debian update build dependency
	(cherry picked from commit 4bb9e46ad71dbc1d57b6ba70950b408d54328ed3)


2015-08-20  Razvan Crainea  <razvan at opensips dot org>
	* [871d4eb] :

	debian/copyright: remove gentoo files
	They are not included in the tar anyway


2015-08-20  Razvan Crainea  <razvan at opensips dot org>
	* [4e1aa91] :

	remove invalid Makefile line


2015-08-20  Răzvan Crainea  <razvan at opensips dot org>
	* [1ff1f04] :

	debian: move to new dh_ packaging system


2015-08-20  Răzvan Crainea  <razvan at opensips dot org>
	* [b4f9a9d] :

	copyright: fix license names


2015-08-20  Răzvan Crainea  <razvan at opensips dot org>
	* [8aa7918] :

	copyright: sync with Julien's work
	http://anonscm.debian.org/viewvc/pkg-voip/opensips/trunk/debian/copyright?view=markup


2015-08-20  Răzvan Crainea  <razvan at opensips dot org>
	* [d63daef] :

	debian/changelog: mark package as unstable


2015-08-20  Răzvan Crainea  <razvan at opensips dot org>
	* [48fbf5a] :

	licence: add BSD and MIT licences
	(cherry picked from commit 8690c307d0593312d735235e38f7b2044087ce8a)


2015-08-20  Răzvan Crainea  <razvan at opensips dot org>
	* [69f11af] :

	licence: update FSF address (cherry picked from commit 4dbfb6bfce314d213a9aad7fdfebbc20ccd76275)
	Conflicts:
		doc/dbschema/xsl/sqlite.xsl
		modules/db_sqlite/db_sqlite.c
		modules/db_sqlite/db_sqlite.h
		modules/db_sqlite/dbase.c
		modules/db_sqlite/dbase.h
		modules/db_sqlite/my_con.c
		modules/db_sqlite/my_con.h
		modules/db_sqlite/res.c
		modules/db_sqlite/res.h
		modules/db_sqlite/row.c
		modules/db_sqlite/row.h
		modules/db_sqlite/val.c
		modules/db_sqlite/val.h
		modules/dialog/dlg_repl_profile.h
		modules/emergency/hash.c
		modules/emergency/hash.h
		modules/emergency/notifier_emergency.c
		modules/emergency/notifier_emergency.h
		modules/emergency/subscriber_emergency.c
		modules/emergency/subscriber_emergency.h
		modules/event_flatstore/event_flatstore.c
		modules/event_virtual/event_virtual.c
		modules/permissions/partitions.c
		modules/permissions/partitions.h
		modules/proto_bin/proto_bin.c


2015-08-20  Nick Altmann  <nick.altmann at gmail dot com>
	* [a959da6] :

	RPM spec: update version number


2015-08-20  Răzvan Crainea  <razvan at opensips dot org>
	* [3b65024] :

	radius: move custom install inside module
	Thanks go to Nick Altman for reporting this
	(cherry picked from commit cf81803c8ae794795d1d3a788b0477d2b5ccdd1c)

=========================== Release 2.1.1 ==============================

2015-08-19  Razvan Crainea  <razvan at opensips dot org>
	* [d695567] :

	packaging: update version to 2.1.1


2015-08-19  Razvan Crainea  <razvan at opensips dot org>
	* [4dcacf7] :

	tm: fix bavp leaks in case of error
	Thanks go to Mickael Marrache for spotting and debugging
	(cherry picked from commit 70a34b9e974132c6c5269c0c02b2311566bddd12)


2015-08-19  Razvan Crainea  <razvan at opensips dot org>
	* [87a6660] :

	fix previous commit
	(cherry picked from commit dcd3ec4433548db469492e8a3c96df5c70d81a3f)


2015-08-19  Razvan Crainea  <razvan at opensips dot org>
	* [9481f7a] :

	Makefile.defs: print target info only if changed
	(cherry picked from commit 14b3bb69ea1d98f5ce06a27e010964f4fac48fbb)


2015-08-19  Răzvan Crainea  <razvan at opensips dot org>
	* [53e7ae8] :

	mi_xmlrpc_ng: fix include warning
	(cherry picked from commit 668533eb9a4320dfd4ddc3c0f3cb35eecde326dc)


2015-08-19  Răzvan Crainea  <razvan at opensips dot org>
	* [d32f1ca] :

	debian: change from native to quilt


2015-08-19  Răzvan Crainea  <razvan at opensips dot org>
	* [857857c] :

	remove useless route.c include


2015-08-19  Răzvan Crainea  <razvan at opensips dot org>
	* [6f07dab] :

	fix EXPRESSION typo


2015-08-19  Răzvan Crainea  <razvan at opensips dot org>
	* [f537612] :

	debian/rules: add build-{arch,indep} rules


2015-08-19  Răzvan Crainea  <razvan at opensips dot org>
	* [ac3ce34] :

	update github watch file


2015-08-19  Răzvan Crainea  <razvan at opensips dot org>
	* [d094f09] :

	fix http package description


2015-08-19  Răzvan Crainea  <razvan at opensips dot org>
	* [39bccea] :

	fix some spellchecks detected by lintian


2015-08-19  Răzvan Crainea  <razvan at opensips dot org>
	* [4afbfef] :

	install-modules: each module install its own custom files


2015-08-19  Răzvan Crainea  <razvan at opensips dot org>
	* [2ac0d08] :

	man: fix hyphens


2015-08-19  Răzvan Crainea  <razvan at opensips dot org>
	* [7524b2b] :

	init: add LSB functions support


2015-08-19  Răzvan Crainea  <razvan at opensips dot org>
	* [2d1a5d9] :

	debian: add python dependency for opensips


2015-08-19  Răzvan Crainea  <razvan at opensips dot org>
	* [064d562] :

	Makefile: do not install docs on debian installs


2015-08-19  Răzvan Crainea  <razvan at opensips dot org>
	* [979ee74] :

	Fix man pages
	* add osipsconfig man page
	* fix lists info for opensipsconsole and opensipsdbctl


2015-08-19  Răzvan Crainea  <razvan at opensips dot org>
	* [d4a5a6a] :

	fix debian packaging


2015-08-19  Răzvan Crainea  <razvan at opensips dot org>
	* [fbcfb2a] :

	Merge pull request #605 from saghul/makefile-target-master
	makefile: detect target architecture using the compiler
	(cherry picked from commit 87a195823abf123630d06b71cae1150c3ef76ee0)


2015-08-19  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [65b94e2] :

	Fix infinit loopin in TCP reactor.
	When connection is S_CONN_CONNECTING (async pending connect), some READ events may be delivered by the reactor (still not fully understood way). This is a temporary fix (fixing the effect and not the cause) following Rahul Gupta's suggestion in #591


2015-08-18  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [9843504] :

	Fix handling of ASYNC MI commands
	Similar to report #552.
	(cherry picked from commit 2b3a3ea9588854be5d7b64d4c04b48f6907a91ba)

	Conflicts:
		modules/mi_http/mi_http.c


2015-08-18  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [cc03352] :

	Fix restoring/freeing the path_vec in failure route.
	The path_vec (array holding the PATH string) was not properly pushed into the faked requests before calling the failure route. This was generating a mixture of shm/pkg memory when the faked request had to be freed.
	This crash was trigger only if PATH support was used and requests were looked up with PATH header.

	Reported by @AVFedorov and @petekelly.
	Closes #484

	Many thanks to @AVFedorov for his details information and to @petekelly for support in investigating and testing.


2015-08-18  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [c8c8410] :

	Fix handling of ASYNC MI commands
	Part of fixing #552.
	Reported by @mqandeel .

	Closes #552
	(cherry picked from commit c08b03310b9d8001b346ff3ba5a45996b1a5dc45)

	Conflicts:
		modules/mi_xmlrpc_ng/http_fnc.h
		modules/mi_xmlrpc_ng/mi_xmlrpc_http.c


2015-08-18  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [b1ee3a5] :

	Fix handling of ASYNC MI commands
	Part of fixing #552.
	Reported by Damien Sandras.
	(cherry picked from commit 5244b54afe63bba02fe45f82b736c327672b221a)

	Conflicts:
		modules/mi_json/mi_json.c


2015-08-18  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [a3c2569] :

	Fix reporting if t_request() failed.
	Capture and report futher if the t_request() failed to send out the PUBLISH request.
	(cherry picked from commit 4791a506912d67f90dfe66e7292500046d59ef4a)


2015-08-12  Jarrod Baumann  <jarrod at unixc dot org>
	* [f4a411d] :

	Do not append colon if uri password is NULL
	(cherry picked from commit 76dc734df0926dbfa5cb6d463dcbf5a82ea6dc2a)


2015-08-10  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [f2f5808] :

	Free double pointer.
	While looping over all location-like tables, set to NULL the result pointer after each iteration.
	Reported by @ionutrazvanionita
	Closes  #566 .
	(cherry picked from commit 719f298d5ad3300b790f64cfed40e797eeb23225)


2015-08-10  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [089284b] :

	Fix use_domain, escaping, cases in remove()
	Use extract_aor() in script function remove() ; extract_aor() takes into account the use_domain and cases settings and is also able to deal with escaped chars.

	Closes #557 .
	(cherry picked from commit 0e1fabbc71c6c315b1f00d3ea58d1796054f2590)


2015-08-10  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [3634b86] :

	Proper test on active destinatins for failover.
	Test both INACTIVE and PROBING flags before considering a destination suitable for failover.
	Reported by @gergelypeli
	Closes #564 .


2015-08-10  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [22f4c1a] :

	Fix race condition - the log must be under lock
	As information from the alias strucuture is printed, this must be done under lock protection.
	Closes #589 by @dbeskoek.


2015-08-07  Razvan Crainea  <razvan at opensips dot org>
	* [3de6036] :

	add mi_xmlrpc dependency for travis


2015-08-07  Razvan Crainea  <razvan at opensips dot org>
	* [6355644] :

	add travis support


2015-08-07  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [0bbd42f] :

	DBschema regenerated


2015-08-07  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [9bde2df] :

	MyISAM no longer default table engine.
	InnoDB is now the default, and this value can now be changed via MYSQL_ENGINE env variable in opensipsctlrc.

	Closes #399
	(cherry picked from commit 6112b8bd3a40d1266c448bf508ede8b9193c35e9)

	Conflicts:
		scripts/mysql/call_center-create.sql
		scripts/mysql/emergency-create.sql


2015-08-07  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [f6e1513] :

	Use SIP pinging when NAT traversal is on
	(cherry picked from commit 67c2c91844641980970d8445291242bdd5ec5310)


2015-08-06  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [ad08a0d] :

	Fix missing typedef.
	It seems the code is a bit different from 2.2 , so fixing a8a487


2015-08-06  Răzvan Crainea  <razvan at opensips dot org>
	* [2671738] :

	fix debian packaging
	(cherry picked from commit 2d15060e48333ab3cad2e9cf3cafb7a006324185)


2015-08-06  Razvan Crainea  <razvan at opensips dot org>
	* [b7524e2] :

	add rest_client specs for debian, fedora and rpms
	Closes #587
	(cherry picked from commit 3dfc83cb254f150d2e6dbbb49f48ec9927be3a3c)


2015-08-06  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [a8a4875] :

	Remove double define.
	param_export_t is already defined by sr_module_deps.h which is included from here.
	(cherry picked from commit 0ff15f63e7002e58385228a16bb4e43dbf75a400)


2015-07-22  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [eaf3ca5] :

	Fix broken condition in handling ASYNC_CONTINUE.


2015-07-17  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [4480d11] :

	Fixed memeory exhausting during concurrent reloads.
	Add a new module parameter no_concurrent_reload to prevent multiple reloads in the same time.
	If you have a large routing set (millions of rules/prefixes), you should consider disabling concurrent reload as they will exhaust the shared memory (by reloading into memory, in the same time, multiple instances of routing data).


2015-07-16  Liviu Chircu  <liviu at opensips dot org>
	* [9982088] :

	db_virtual: Do not crash if no DB sets are defined
	(cherry picked from commit b391ea3d25dbe286ddd12d4ffc5f53b32cfdc268)


2015-07-10  Liviu Chircu  <liviu at opensips dot org>
	* [7c0b087] :

	config parser: Exit if no more memory available
	Otherwise, some code paths would generate segmentation faults
	(cherry picked from commit 5415531a162093a070990bae6e23af68a0137618)

	Conflicts:
		cfg.y


2015-07-10  Liviu Chircu  <liviu at opensips dot org>
	* [2b50281] :

	db_virtual: Do not crash if no DB URLs are defined
	(cherry picked from commit 5a832d94bd2af95929a5b8451ee6895a585d6989)


2015-07-10  Liviu Chircu  <liviu at opensips dot org>
	* [3aa7bbc] :

	avpops: Proper handling for async with non-async drivers
	Fallback to normal mode in case of no async capabilities.
	If this behaviour is employed, a startup warning will be issued.
	(cherry picked from commit 1e675ac0ae07e4dfd4d795beb2eacd0fff8346da)


2015-07-10  Liviu Chircu  <liviu at opensips dot org>
	* [244140c] :

	db_mysql: Improve error handling in async mode
	i.e. Logging and error handling in case of bad async queries
	(cherry picked from commit aad94dadec71c0cd3fcefa25ce2dec800b4f089b)


2015-07-10  Liviu Chircu  <liviu at opensips dot org>
	* [b523dc9] :

	core API: Add detection for async script function usage
	(cherry picked from commit 87acbbca4ad1f26000bf8bd59f4076100d250438)


2015-07-07  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [8fefc91] :

	More verbous logging.
	Log the error reported by stat() when it fails.


2015-07-06  Vlad Paiu  <vladpaiu at opensips dot org>
	* [f610f3c] :

	Fixed typo in encoding the callid
	(cherry picked from commit 43a2619f59b30782a5aa6bf310088365895b04cb)


2015-07-02  Vlad Paiu  <vladpaiu at opensips dot org>
	* [3adfb0e] :

	Fixed generated callid
	= is not a valid character in a callid, so replaced it with a hyphen
	(cherry picked from commit a0ec25a4f52d181e02b92aeada322eaa76d14e20)


2015-06-30  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [2ef8cd0] :

	Expose unset_dlg_profile() to Request Route.
	Related to issue #554.
	(cherry picked from commit 23f2322db56540be4d0b36a099a02e380aeafe19)


2015-06-26  Cerghit Ionel  <ionel.cerghit at gmail dot com>
	* [1c6e619] :

	event_route: fix route name when no sync/async
	(cherry picked from commit 996fadff4c0935caee71e9315a0564decebd8a5e)


2015-06-26  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [b0f52d5] :

	Fix TH for BYEs used as CANCEL
	Trigger the dialog callbacks (used by TH) for BYEs which do not terminate the call (BYEs in early state can be used as CANCELs).
	Reported by Antonis Psaras.
	Closes #555


2015-06-26  Razvan Crainea  <razvan at opensips dot org>
	* [4a2e29c] :

	always create tar with TLS files
	(cherry picked from commit 31f46c244a92e5aa49ae80b4fedb7f1efb4f4e20)


2015-06-26  Razvan Crainea  <razvan at opensips dot org>
	* [6ed37de] :

	acc: fix column type mismatch for db missed calls
	This bug was making OpenSIPS crash when a missed call was inserted in DB

	Thanks go to Peter Baines for reporting it (Issue #559)
	(cherry picked from commit ea2a04155f9a37460b2f0476a35a64309b57bb77)


2015-06-25  Razvan Crainea  <razvan at opensips dot org>
	* [b98687d] :

	acc: fix multi_leg_bye info behavior
	This bug was making the ACC module to print less information in case there
	were no AVPs populated for the BYE multi_leg_info
	(cherry picked from commit 307388d7499fe2cf4f1ea7f54f2ef11a628e327d)


2015-06-23  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [19d0f60] :

	Fix $ct and $ct.fields variables.
	Force parsing of all Contact headers.
	Reported by Nick Altmann.


2015-06-15  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [d3409fe] :

	Added DB schema for emergency module


2015-06-12  Ovidiu Sas  <osas at voipembedded dot com>
	* [fb9a475] :

	mi_xmlrpc_ng: unescape xml strings  - related to bug #537
	(cherry picked from commit 8450630617b2504ffdc4089f2500a26b4187e078)


2015-06-12  Ovidiu Sas  <osas at voipembedded dot com>
	* [db9a16e] :

	core: adding unescape_xml() function helper to strcommon.[ch]
	(cherry picked from commit f6386ca9029fb56233ef1ac0b2cc2034d88e0928)


2015-06-11  Nick Altmann  <nick.altmann at gmail dot com>
	* [badb86e] :

	RPM spec: enabled restart feature (in case of crash) in systemd service
	(cherry picked from commit 611b9bb55135b899746a0c71f21f25b0561a81b4)


2015-06-11  Nick Altmann  <nick.altmann at gmail dot com>
	* [7e1fa37] :

	RPM spec: returned missed m4 feature, corrected version numbering


2015-06-11  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [8b1bd12] :

	Fix documentation on loose_route().
	loose_route() returns FALSE only if there is no Route header or if preloaded local Route only.
	Reported by @gergelypeli on github
	Closes #550
	(cherry picked from commit 2421034845068bbc243a8bd5de8aeebd071fc729)


2015-06-11  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [c0df4e9] :

	Revert "Fix parsing for Diversion header."
	This reverts commit 518b2c12192fcc018bedf5f1ad714697966bbdb4.


2015-06-11  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [1f7bae0] :

	Fix fixing hdr names shorter than 3 chars.
	The fixup function fails to identify header names shorter than 3 (like To or short formats). This affected script functions like is_present_hf() or remove_hf().
	Reported by Nick Altmann


2015-06-09  Bogdan Andrei IANCU  <bogdan at opensips dot org>
	* [bffeee0] :

	Merge pull request #546 from dynamicpacket/2.1
	fixes for Debian packaging


2015-06-09  User  <user at Users-Mac-Pro dot local>
	* [ec6a1ec] :

	* Check for freeradius libs in Makefile * Check for json lib include paths in Makefile * Update debian/control with new dependency names and standards * Update debian/rules to remove deprecated dpatch


2015-06-08  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [ca0cb37] :

	Add emergency tables to TABLES_EXTRA
	(cherry picked from commit 84e78f238cc5374c42f7d84a0892d4653bdd54ef)

	Conflicts:
		scripts/opensipsdbctl.base


2015-06-04  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [00862dc] :

	Fix init of UDP listener in nofork mode.
	Init the UDP listener before forking the MI procs, otherwise they will not be aware of the network sockets.
	Closes #541
	Self reported.
	(cherry picked from commit c14659471bc0fc61b59ce3c8518cf228cd1a3b7d)


2015-06-04  Di-Shi Sun  <di-shi at transnexus dot com>
	* [b9a4e43] :

	Updated for OSP Toolkit 4.5.0.


2015-06-03  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [518b2c1] :

	Fix parsing for Diversion header.
	As Diversion header may be a multi-body header, do not use the parse_to() function as it does not accept multiple bodies. Use parse_rr() function.
	Reported by Nick Altmann.
	(cherry picked from commit 36384927a5d2fd1d900ac36adc2ee15b2acad0c9)


2015-06-03  Razvan Crainea  <razvan at opensips dot org>
	* [895614e] :

	event_rabbitmq: EINTR is not an error and should not be considered for retry
	(cherry picked from commit 008b42363fc7294a169924be350c512f8c32e26d)


2015-06-03  Eric Tamme  <eric.tamme at onsip dot com>
	* [90f836a] :

	do not always retry write to pipe if we get blocking errors as this causes the proxy to lock up and consume cpu
	(cherry picked from commit ac419bc0a1e87fe3e0750a983e61b9fcbe4daedd)


2015-06-03  Razvan Crainea  <razvan at opensips dot org>
	* [9904dc6] :

	event_xmlrpc: only retry send/recv a couple of times if there are errors
	Credits go to Joseph Frazier (onsip) for spotting this
	(cherry picked from commit 05bc754133dd7fe02dc0c780a7f625a83bfef61f)


2015-06-03  Bogdan Andrei IANCU  <bogdan at opensips dot org>
	* [2033360] :

	Merge pull request #534 from seanchann/1.11
	fix rpm build error on centos
	(cherry picked from commit 715914848153678c473dc3d4211b8b534bf66fa1)


2015-06-02  Liviu Chircu  <liviu at opensips dot org>
	* [cfdc74e] :

	s.fill transformation: Prioritize string pvars over integer ones
	Reason for this is that a pvar which holds a string is a more
	particular occurrence than an int one, since integers can be
	easily stringified.

	This fixes some issues with pvars which have multiple internal
	representations (e.g. $rm is "INVITE" and 1 at the same time)

	Reported by Eric Tamme
	(cherry picked from commit 0db7e0e38c0974ec393446237aa09bc5658c0d24)


2015-06-02  Liviu Chircu  <liviu at opensips dot org>
	* [cc91b1e] :

	s.fill transformations: Allow whitespace in quoted params
	This patch actually fixes several issues:
	    * allows the "s.fill" functions to be used for alignment purposes
	    * bugfix: possible "s.fill" usage which caused infinite loop
	    * new: trim.h string trimming macros
	    * some code refactoring

	Fixes #531
	(cherry picked from commit ee4374f97d7f7fc8628ca0dfe1a50fedce8bebaf)


2015-06-02  Jarrod Baumann  <jarrod at unixc dot org>
	* [5f442bf] :

	verify pv_export_t parse_name function is set before calling
	(cherry picked from commit 3c47edd9b007aa60e36d6a094e995956509f1da4)


2015-06-01  Ovidiu Sas  <osas at voipembedded dot com>
	* [ad4070c] :

	event_rabbitmq: add specif error probe for AMQP_STATUS_SOCKET_ERROR  - triggered after rabbitmq server restart
	(cherry picked from commit 1288d269e5fdf7506298d9e0b904050b601c8e32)


2015-06-01  Ovidiu Sas  <osas at voipembedded dot com>
	* [1edbca6] :

	event_rabbitmq: enhance AMQP connection error probe
	(cherry picked from commit b5165107d493eedda8b63616db189a044dd18848)


2015-05-29  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [59d0f33] :

	Fix debug log.
	Do not print un-initialized variables.

	Reported by miha- on IRC.


2015-05-27  Liviu Chircu  <liviu at opensips dot org>
	* [de2b113] :

	avpops: Fix possible runtime crash
	The patch corrects a bug in commit 685da74670, since mod_init() is
	actually run _before_ module function fixups.

	Detection for raw SQL function calls is now done (properly) at fixup time,
	rather than at module initialization.

	Reported by Antonis Psaras
	Closes #523
	(cherry picked from commit 91d1b4f4b65b4bf70d8db93d956a42d2f58500f9)


2015-05-26  Liviu Chircu  <liviu at opensips dot org>
	* [a5cf2ca] :

	residential cfg: Set db_url for "uri" module when doing auth
	(cherry picked from commit 724d16d99f9ae46cbeaa6894f45afbb0b4fd650a)


2015-05-26  Vlad Paiu  <vladpaiu at opensips dot org>
	* [bdbf504] :

	Set the upsert flag when incrementing / decrementing counters This way the counters don't need to be pre-populated in the DB ( eg. when using them for dialog profiles )
	(cherry picked from commit 74a52d0da12395367019028034c6c20b5cff5b38)


2015-05-26  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [293a127] :

	Fix "dialplan addrule" command.
	The match_len column was replaced with match_flags
	Closes #513
	(cherry picked from commit 607fb3e78c9d39b7c0b97fbd5be615369f5a1ef1)


2015-05-25  ionutrazvanionita  <ionutionita at opensips dot org>
	* [5a3af0b] :

	Closed connection in child init after data load; Connected to db from mi process in mi_child_init
	(cherry picked from commit 6164d1c3cab077957e91118c8094cfa97b2bfc7b)


2015-05-25  ionutrazvanionita  <ionutionita at opensips dot org>
	* [52554da] :

	move db data initialization from mi_child_init to child init
	(cherry picked from commit fa14431830bde1c8ede30bf77a609197e7d002fa)


2015-05-22  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [9cd6e6f] :

	Fix NULL value as route param.
	Closes #516, open by @liviuchircu.
	(cherry picked from commit 032c425424846045227d57e88b506c4603315bc4)


2015-05-22  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [3870a57] :

	Fix handling of gw_priprefix_avp param.
	Closes #518, reported by @apsaras.


2015-05-20  Bogdan Andrei IANCU  <bogdan at opensips dot org>
	* [33c1415] :

	Merge pull request #517 from staskobzar/1.11
	Make sure httpd can recognize Content-Type headers with parameters.
	(cherry picked from commit a8971c2fcb0207a34005a2ee586de97ecf759638)

	Conflicts:
		modules/httpd/httpd_proc.c


2015-05-20  Liviu Chircu  <liviu at opensips dot org>
	* [8e95b8d] :

	route params: increment nesting level on no-param routes
	Completes commit f3ed4db99
	(cherry picked from commit 564acbe638fab63deb2d39462b667b2d83a75f05)


2015-05-20  ionutrazvanionita  <ionutionita at opensips dot org>
	* [5aae5ab] :

	fixed partition parsing


2015-05-20  Vlad Paiu  <vladpaiu at opensips dot org>
	* [320c825] :

	Expose API for setting connection attributes in WS module Fix so that tcp_persistent_flag in registrar also works for WS connections
	(cherry picked from commit a57d67f3609237ad2b5480b8924f701681002fcf)


2015-05-19  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [59145d2] :

	Fix $proto to read from loaded protocols
	(cherry picked from commit 1c1d7321324b229aeb948fb88b6a6028cba13643)


2015-05-18  Jarrod Baumann  <jarrod at unixc dot org>
	* [6d33b02] :

	set local variable memory to 0 to prevent core dump
	(cherry picked from commit d84df1900267516b30e560d20e225abbe2aea071)


2015-05-18  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [da8ec88] :

	Fix restoring the route type after async jump.
	A more accurate fix on preserving the route type after an async jump - see commit 950966.
	(cherry picked from commit 9597bc9ec4f3c49eddd8d23c2fc5f7e2f94eca48)


2015-05-18  Liviu Chircu  <liviu at opensips dot org>
	* [d0f5acb] :

	async: set route type before running resume routes
	(cherry picked from commit 9509665640782b197feec34acd1e7b66935e66f4)


2015-05-18  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [d82e26e] :

	Fix - DLG_STATE_CHANGED event contains the DID too
	Reported by Dan Bogos.
	This is a bug, as without the Dialog ID, the DLG_STATE_CHANGED event is useless.
	(cherry picked from commit e461b65c10486c9f2d7504ab446eaf7335851a3d)


2015-05-18  Razvan Crainea  <razvan at opensips dot org>
	* [a9a4ffb] :

	dialog: do not raise event under lock
	This allows nested dialog operations and prevents opensips from dialog
	deadlock
	(cherry picked from commit a63d6fe983ef461af9965e1874aff76bb874f28f)


2015-05-16  Liviu Chircu  <liviu at opensips dot org>
	* [02b93b3] :

	fix doc typo
	Reported by Nick Altmann
	(cherry picked from commit be873729874b2b68ab779666374e2996a7ace727)


2015-05-15  Razvan Crainea  <razvan at opensips dot org>
	* [e502fac] :

	proto_tls: fix README tcp typo
	(cherry picked from commit a5d16d29a626becb120518534b23204090c4bdf0)


2015-05-15  Liviu Chircu  <liviu at opensips dot org>
	* [43b8fda] :

	fraud_detection: fix "daysoftheweek" parsing bug
	Parsing was incorrect for sequences such as "Fri-Mon", "Thu-Wed" etc.
	(cherry picked from commit 3e82c485d939df8153c4b2833941a8ed2f64e8aa)


2015-05-15  Liviu Chircu  <liviu at opensips dot org>
	* [a519c83] :

	fraud_detection: properly release stats lock on error
	(cherry picked from commit 2d5dcadd4029bbbadd9ddcbf842d22f03a2d32ea)


2015-05-15  Liviu Chircu  <liviu at opensips dot org>
	* [66ab6ca] :

	bin_interface: use blocking I/O
	The 2.1 code uses non-blocking UDP socket init primitives.
	This specifically made the binary interface workers do a lot of busy-waiting

	Reported by Rik Broers
	Fixes #502
	(cherry picked from commit df2c030d1408a7d886cf13e3772af81f6deae9a7)


2015-05-11  Liviu Chircu  <liviu at opensips dot org>
	* [47aab17] :

	io_wait.h: always include pt.h
	pt.h is required even without HAVE_SIGIO_RT

	Reported by @narunask
	Fixes #505
	(cherry picked from commit 4d6baa5c4f6c05eec26688df63489176c676d377)


2015-05-11  Liviu Chircu  <liviu at opensips dot org>
	* [f894ed0] :

	build system: properly parse "uname -r" output
	Also handle "MAJOR.MINOR-SUB" types of strings
	(cherry picked from commit 999364ed550c7fe8031820cadd2db800fa95aae6)


2015-05-11  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [9c066e6] :

	Fix bogus jump to "error" label.
	if unhash_fd_map() is not done, do not try to do fix_fd_array() .


2015-05-08  Liviu Chircu  <liviu at opensips dot org>
	* [e16ab48] :

	async DB core: fix noisy logs
	(cherry picked from commit fd8fc60212e8e43f27a3411470d56f7f707a8652)


2015-05-08  Razvan Crainea  <razvan at opensips dot org>
	* [d1428f9] :

	fix RPM versioning for 2.1.0


2015-05-08  Razvan Crainea  <razvan at opensips dot org>
	* [647d798] :

	Revert "Fix RPM packages for 2.1.0"
	This reverts commit c772cea7c37810463d5ee8592c57dae57f01e0b7.


2015-05-08  Razvan Crainea  <razvan at opensips dot org>
	* [c772cea] :

	Fix RPM packages for 2.1.0


2015-05-07  Razvan Crainea  <razvan at opensips dot org>
	* [b365aed] :

	Update ChangeLog with latest commits for 2.1.0


=========================== Release 2.1.0 ==============================

commit 47e9a077c0aa59b92cbe5d1a042268a822d51f4c
Author: Razvan Crainea <razvan@opensips.org>
Date:   Thu May 7 17:31:36 2015 +0300

	Update ChangeLog to 2.1.0

commit bb5b3de94f6998439d715a613c4771ee21c612af
Author: Razvan Crainea <razvan@opensips.org>
Date:   Thu May 7 17:19:22 2015 +0300

	Update packaging to 2.1.0

commit e3222cf4e95b3f77754bc5889817eeab1edf6bcc
Author: Liviu Chircu <liviu@opensips.org>
Date:   Thu May 7 19:18:19 2015 +0300

	rest_client: properly free ctype buffer

	(cherry picked from commit 2ef34a582fd6bd02725fe71a36ab72177829680b)

commit 9958b2280de540b16a743b20998143ab86d7f890
Author: Liviu Chircu <liviu@opensips.org>
Date:   Thu May 7 19:06:15 2015 +0300

	rest_client: update doc & README

	(cherry picked from commit 910990c21d252f21060b45e61974020f60aac33c)

commit 17d82244c6e7aeb5c1e4f22f03b252c5d237fc5a
Author: Liviu Chircu <liviu@opensips.org>
Date:   Thu May 7 18:46:07 2015 +0300

	rest_client: properly handle async calls in local deployments

	Proper libcurl usage is to poll for handle status updates after
	each perform operation.

	This patch also fixes a few cleanup issues with the global list of
	pending HTTP headers

	Thanks to Dan Bogos for reporting and helping with troubleshooting

	(cherry picked from commit a614e21b2d7982b4d56d7acbb99aee1b51f632ec)

	Conflicts:
		modules/rest_client/rest_methods.c

2015-05-07  Vlad Paiu  <vladpaiu at opensips dot org>
	* [ef3c253] :

	While doing retransmissions, set the current processing transaction - in case anybody uses it


2015-05-07  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [75106d9] :

	Fix crash on building CANCEL requests.
	Avoid the race condition between building a local cancel and handling a negative reply (for the same branch, in different processes). The build_local mya use the temporary uac->reply and end up with a dnagling pointer. Anyhow, in CANCEL situation, you never have a stored reply in transaction (storing is done only during parallel forking for nagative branches - which are not to be cancelled anyhow).
	(cherry picked from commit 156fba8d5eeedaa3bbb5cd89a525e1591a288123)


2015-05-06  Liviu Chircu  <liviu at opensips dot org>
	* [c26b5a5] :

	DBG_QM_MALLOC: do not abort() on NULL pointer free/realloc


2015-05-05  Liviu Chircu  <liviu at opensips dot org>
	* [d77b5e2] :

	sipmsgops: fix possible crash with debug=4
	Introduced in commit 445d90bc7
	Reported by Hieu Ta
	(cherry picked from commit 2e9b36c0031e619899aa2544c7e23caff5b49b80)


2015-05-05  Liviu Chircu  <liviu at opensips dot org>
	* [56cca87] :

	core fd management: suppress DEL errors for closed fds (EBADF)
	Reasons:
	    * library-specific corner-case (e.g. libcurl with async ops)
	    * network core removes the fds anyway
	(cherry picked from commit 21344d1f78bcb7b492b8f07f7f34e21f1dc3a337)


2015-05-05  Liviu Chircu  <liviu at opensips dot org>
	* [dac81ff] :

	core fd management: properly remove fds on DEL errors
	Also improve debug printing
	(cherry picked from commit 82eded80cb49b8c82406f2e4385998b3d09cd90e)


2015-05-05  Razvan Crainea  <razvan at opensips dot org>
	* [f3ffd09] :

	acc: when doing no-cdr accounting, do not use CDR-generated info
	Related to ticket #495
	(cherry picked from commit 89eb9dc5f9f30e07ff8a40cd1b1c000f8eaf33f0)


2015-05-05  Bogdan Andrei IANCU  <bogdan at opensips dot org>
	* [904e00c] :

	Merge pull request #498 from olivermt/master
	Make rtpengine retry sending command on UDP fragmentation
	(cherry picked from commit a91de4c461e4c9ce94cdc7a513a7191cb7fd249f)


2015-05-04  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [acfed21] :

	Fix order of rows during query; respect file order
	When buidling the response to a select query, respect the order of rows as given by the file; before the selected rows were given in the reverted order.
	Reported by @jockmckechnie on github.
	Closes bug #479 .
	(cherry picked from commit 54f6c22303f0d258c9e5f24520bba342aeb11ac3)


2015-05-04  Vlad Paiu  <vladpaiu at opensips dot org>
	* [3bf8b49] :

	Fixed json results for negative integers


2015-05-04  Liviu Chircu  <liviu at opensips dot org>
	* [65d3c88] :

	rest_client: caseless matching when searching for Content-Type
	Also properly handle missing "Content-Type"
	(cherry picked from commit 4d651f4a868e26fb93674950e6f4654a329d3beb)


2015-05-01  Jarrod Baumann  <j at rrod dot org>
	* [59d7d48] :

	Updated log macro used for reporting event_rabbitmq heartbeat modparam
	(cherry picked from commit 25fc10c1379358de6a25e7ee664d9fd911f7ab0b)


2015-04-29  Razvan Crainea  <razvan at opensips dot org>
	* [f187657] :

	socket_info: return socket list only for known protocols
	(cherry picked from commit bf3ae34f6af4e680ca43f2f352540898cd3e98e3)


2015-04-27  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [7ebd184] :

	Docs updated and refurbished.
	(cherry picked from commit d154fe2749bd28cb8ace20df6ec88d7a9808b86b)


2015-04-27  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [28031c7] :

	Fix: do not try to kill procs which were not created.
	(cherry picked from commit ed82ac8b6445104eaec6de84d7c57e7fe601fa30)


2015-04-25  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [c3f551f] :

	Fix name of variable in passwd test
	(cherry picked from commit 4588f843c7ba81e7b679df9abeadc38f1c08c174)


2015-04-25  satishdotpatel  <satish.lx at gmail dot com>
	* [460f33e] :

	Fix reading password from prompt for PGSQ
	root@dopensips:/etc/opensips# opensipsdbctl create
	INFO: creating database opensips ...
	Password for user postgres:
	Password for user postgres:
	Password for user postgres:
	NOTICE:  CREATE TABLE / UNIQUE will create implicit index "version_t_name_idx" for table "version"
	Password for user postgres:
	NOTICE:  CREATE TABLE will create implicit sequence "acc_id_seq" for serial column "acc.id"
	NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "acc_pkey" for table "acc"
	NOTICE:  CREATE TABLE will create implicit sequence "missed_calls_id_seq" for serial column "missed_calls.id"
	NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "missed_calls_pkey" for table "missed_calls"
	Password for user postgres:
	NOTICE:  CREATE TABLE will create implicit sequence "domain_id_seq" for serial column "domain.id"
	NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "domain_pkey" for table "domain"
	NOTICE:  CREATE TABLE / UNIQUE will create implicit index "domain_domain_idx" for table "domain"
	Password for user postgres:
	NOTICE:  CREATE TABLE will create implicit sequence "grp_id_seq" for serial column "grp.id"
	NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "grp_pkey" for table "grp"
	NOTICE:  CREATE TABLE / UNIQUE will create implicit index "grp_account_group_idx" for table "grp"
	NOTICE:  CREATE TABLE will create implicit sequence "re_grp_id_seq" for serial column "re_grp.id"
	NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "re_grp_pkey" for table "re_grp"
	Password for user postgres:
	NOTICE:  CREATE TABLE will create implicit sequence "address_id_seq" for serial column "address.id"
	NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "address_pkey" for table "address"
	Password for user postgres:
	NOTICE:  CREATE TABLE will create implicit sequence "aliases_id_seq" for serial column "aliases.id"
	NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "aliases_pkey" for table "aliases"
	NOTICE:  CREATE TABLE / UNIQUE will create implicit index "aliases_alias_idx" for table "aliases"
	Password for user postgres:
	NOTICE:  CREATE TABLE will create implicit sequence "location_id_seq" for serial column "location.id"
	NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "location_pkey" for table "location"
	NOTICE:  CREATE TABLE / UNIQUE will create implicit index "location_account_contact_idx" for table "location"
	Password for user postgres:
	NOTICE:  CREATE TABLE will create implicit sequence "silo_id_seq" for serial column "silo.id"
	NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "silo_pkey" for table "silo"
	Password for user postgres:
	NOTICE:  CREATE TABLE will create implicit sequence "dbaliases_id_seq" for serial column "dbaliases.id"
	NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "dbaliases_pkey" for table "dbaliases"
	NOTICE:  CREATE TABLE / UNIQUE will create implicit index "dbaliases_alias_idx" for table "dbaliases"
	Password for user postgres:
	NOTICE:  CREATE TABLE will create implicit sequence "uri_id_seq" for serial column "uri.id"
	NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "uri_pkey" for table "uri"
	NOTICE:  CREATE TABLE / UNIQUE will create implicit index "uri_account_idx" for table "uri"
	Password for user postgres:
	NOTICE:  CREATE TABLE will create implicit sequence "rtpproxy_sockets_id_seq" for serial column "rtpproxy_sockets.id"
	NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "rtpproxy_sockets_pkey" for table "rtpproxy_sockets"
	Password for user postgres:
	NOTICE:  CREATE TABLE will create implicit sequence "speed_dial_id_seq" for serial column "speed_dial.id"
	NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "speed_dial_pkey" for table "speed_dial"
	NOTICE:  CREATE TABLE / UNIQUE will create implicit index "speed_dial_speed_dial_idx" for table "speed_dial"
	Password for user postgres:
	NOTICE:  CREATE TABLE will create implicit sequence "usr_preferences_id_seq" for serial column "usr_preferences.id"
	NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "usr_preferences_pkey" for table "usr_preferences"
	Password for user postgres:
	NOTICE:  CREATE TABLE will create implicit sequence "subscriber_id_seq" for serial column "subscriber.id"
	NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "subscriber_pkey" for table "subscriber"
	NOTICE:  CREATE TABLE / UNIQUE will create implicit index "subscriber_account_idx" for table "subscriber"
	Password for user postgres:
	NOTICE:  CREATE TABLE will create implicit sequence "pdt_id_seq" for serial column "pdt.id"
	NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "pdt_pkey" for table "pdt"
	NOTICE:  CREATE TABLE / UNIQUE will create implicit index "pdt_sdomain_prefix_idx" for table "pdt"
	Password for user postgres:
	NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "dialog_pkey" for table "dialog"
	Password for user postgres:
	NOTICE:  CREATE TABLE will create implicit sequence "dispatcher_id_seq" for serial column "dispatcher.id"
	NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "dispatcher_pkey" for table "dispatcher"
	Password for user postgres:
	NOTICE:  CREATE TABLE will create implicit sequence "dialplan_id_seq" for serial column "dialplan.id"
	NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "dialplan_pkey" for table "dialplan"
	Password for user postgres:
	NOTICE:  CREATE TABLE will create implicit sequence "dr_gateways_id_seq" for serial column "dr_gateways.id"
	NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "dr_gateways_pkey" for table "dr_gateways"
	NOTICE:  CREATE TABLE / UNIQUE will create implicit index "dr_gateways_dr_gw_idx" for table "dr_gateways"
	NOTICE:  CREATE TABLE will create implicit sequence "dr_rules_ruleid_seq" for serial column "dr_rules.ruleid"
	NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "dr_rules_pkey" for table "dr_rules"
	NOTICE:  CREATE TABLE will create implicit sequence "dr_carriers_id_seq" for serial column "dr_carriers.id"
	NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "dr_carriers_pkey" for table "dr_carriers"
	NOTICE:  CREATE TABLE / UNIQUE will create implicit index "dr_carriers_dr_carrier_idx" for table "dr_carriers"
	NOTICE:  CREATE TABLE will create implicit sequence "dr_groups_id_seq" for serial column "dr_groups.id"
	NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "dr_groups_pkey" for table "dr_groups"
	Password for user postgres:
	NOTICE:  CREATE TABLE will create implicit sequence "load_balancer_id_seq" for serial column "load_balancer.id"
	NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "load_balancer_pkey" for table "load_balancer"
	Password for user postgres:
	Password for user postgres:
	Password for user postgres:
	Password for user postgres:
	Password for user postgres:
	(cherry picked from commit e0ab1ce8e538fd81356c2cd5feb96658d7517430)


2015-04-24  Jarrod Baumann  <jarrod at unixc dot org>
	* [f97f5ce] :

	Populate the rcode pval in rest get/post methods before returning error
	(cherry picked from commit 9945b9da3b9eb89f0a80392f8d04ac568eade8a5)


2015-04-22  Razvan Crainea  <razvan at opensips dot org>
	* [cb3ec27] :

	Increase version to 2.1-rc2


2015-04-22  Liviu Chircu  <liviu at opensips dot org>
	* [692ae66] :

	F_MALLOC: suppress warnings for free(NULL)
	(cherry picked from commit 17d639b9f11b415d51062005aadb86dd6c2375e2)


2015-04-21  Razvan Crainea  <razvan at opensips dot org>
	* [112b2fe] :

	rtpproxy: store the notification buffer in the main stack frame
	Thanks go to Hamid Elaosta for reporting and helping me debug this bug
	(cherry picked from commit cb9f46ba80ccb4da9f362e4c686be6e497d0ee9e)


2015-04-21  Razvan Crainea  <razvan at opensips dot org>
	* [0eac1c1] :

	rtpproxy: properly parse rtpproxy timeout notifications
	(cherry picked from commit c26a4a34fcf790741918224ce9557eb4d1f51edf)


2015-04-21  Vlad Paiu  <vladpaiu at opensips dot org>
	* [30fd659] :

	Fixed json lib dependency
	(cherry picked from commit 138813faf7a72f6580ebb5f7c0959c86634ccf88)


2015-04-21  Liviu Chircu  <liviu at opensips dot org>
	* [4138759] :

	proto_tcp: fix "microsec" -> "millisec" doc typo
	(cherry picked from commit 0e80ba3c06d6c449819f3572ece792e56773a7b1)


2015-04-20  ionutrazvanionita  <ionutionita at opensips dot org>
	* [5a0552e] :

	don't log errors in case connection closed by the other peer; don't call SSL_shutdown when connection is bad/eof


2015-04-20  Liviu Chircu  <liviu at opensips dot org>
	* [a6fa182] :

	db_mysql: properly set TCP-related timeouts
	According to official documentation,  mysql_options() must be used _after_
	mysql_init()
	(cherry picked from commit 1f154c01fc3d064f1cf4f9c333775d857afb6528)


2015-04-20  Vlad Paiu  <vladpaiu at opensips dot org>
	* [9d366cd] :

	Do not leak the dialog in case there's an error on creation, after linking
	(cherry picked from commit 57f331fee808f1a039c02d477ebf0048e32ad08c)


2015-04-20  Bogdan Andrei IANCU  <bogdan at opensips dot org>
	* [ed8c21c] :

	Merge pull request #442 from rgagnon24/redirect_fix
	Fix get_redirects(max, reason)
	(cherry picked from commit ead10331a2f5b024f885f1f69e160c78c9d8eb7b)


2015-04-16  Liviu Chircu  <liviu at opensips dot org>
	* [a18fae9] :

	sipmsgops: fix buffer management issue
	is_present_hf() and remove_hf() would sometimes misbehave
	when used with pseudo-variables (commit 6e88f653702).

	Reported by Eric Werkhoven

	Also fix a couple of noisy log messages.
	(cherry picked from commit 445d90bc794887f6e0d8ce7716a5480bb50e3b51)


2015-04-16  Razvan Crainea  <razvan at opensips dot org>
	* [f4287b3] :

	do not add Makefile.conf to the tarball
	Since every tarball install is independent, Makefile.conf should not be
	inherited
	(cherry picked from commit 0a3803244c1ccfa8598c8d82c15e11b8d89bb015)


2015-04-15  Liviu Chircu  <liviu at opensips dot org>
	* [0d04e75] :

	hp_malloc.h: properly include sys/time.h
	Prevents compilation issues with some modules

	Credits to Hamid Elaosta for reporting
	(cherry picked from commit 00cdfc6bd5943c8b31de2960ec70e95137ee465a)


2015-04-15  Liviu Chircu  <liviu at opensips dot org>
	* [17c078e] :

	fix compilation issues with no -DSTATISTICS
	(cherry picked from commit 008fba152f3e399e6bd1f95bb33095beacba7f12)


2015-04-15  Vlad Paiu  <vladpaiu at opensips dot org>
	* [6c0625e] :

	Set T to T_UNDEFINED


2015-04-15  Vlad Paiu  <vladpaiu at opensips dot org>
	* [15ab1dd] :

	Set the current transaction to NULL when adding FD to reactor for async jump
	(cherry picked from commit eeff37fe495104011e7eae05e03d6a6f2c78b63e)


2015-04-15  Razvan Crainea  <razvan at opensips dot org>
	* [fe9281d] :

	replace libmysqlclient*-dev with metapackage libmysqlclient-dev
	Credits go to Leo for reporting this
	(cherry picked from commit e5b793e2411826a23138298721879f6749f597ac)


2015-04-15  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [4b393f5] :

	Removed useless var setting.
	(cherry picked from commit 1ebf8139332069cacddbfe95fb66ebf300d0fb27)


2015-04-15  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [fcf8a93] :

	Fix race condition on terminating child procs.
	There is a race condition between a child getting initalized (and properly setting all its vars like is_main, pid, etc) and main process trying to terminate that child proc (due a failed startup).
	Use the pt[].pid as a marker to know when the child is init (to be filled only by child). Main proc (when delivering signals) will do a busy waiting if a proc haven't set its pid (still doing init).

	Closes #463
	(cherry picked from commit 4884d6c921695c588b8076ded186665504550773)


2015-04-15  Razvan Crainea  <razvan at opensips dot org>
	* [eed3d77] :

	acc: always populate the created AVP
	(cherry picked from commit 3ac458f968a0503f55cc23a18ab61b7ffd90ae0e)


2015-04-14  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [1a1d72c] :

	Fix dont_fork mode.
	Closes #445.
	(cherry picked from commit dbf2aec66c9294d7ea0270e9e5e94447d5fbdad4)


2015-04-14  Razvan Crainea  <razvan at opensips dot org>
	* [3459128] :

	rr: do not force send socket on preloaded routes
	(cherry picked from commit b8c0740a63f80577bff8314b4cf0e17867a1fda4)


2015-04-14  Vlad Paiu  <vladpaiu at opensips dot org>
	* [fa2f5f6] :

	Maintain rport and received in VIA header of replies when doing topology hiding
	(cherry picked from commit 521bfc00a01eb5a7b4d5ee5494212412bcad0597)


2015-04-14  Răzvan Crainea  <razvan at opensips dot org>
	* [a1382a2] :

	Merge pull request #462 from jarrodb/dlg_hash
	Verify the dialog mi parameter is not null before passing to dlg_hash
	(cherry picked from commit 432c9cc5dcbfadf69c1b9b1fee44a0fcad8cb8f6)


2015-04-09  Razvan Crainea  <razvan at opensips dot org>
	* [5863cda] :

	tcp: drop CRLF TCP messages
	(cherry picked from commit 111df6804b5a58f26767674c30bed369dd0209ca)


2015-04-07  Vlad Paiu  <vladpaiu at opensips dot org>
	* [9e9818f] :

	Silence t_newtrani log error in case transaction was already created


2015-04-07  Vlad Paiu  <vladpaiu at opensips dot org>
	* [2247d90] :

	Do not crash when faked req has no lumps added to it
	(cherry picked from commit 210a09608e8591b618bf0d82984816e814e1df47)


2015-04-06  Ovidiu Sas  <osas at voipembedded dot com>
	* [18c3c71] :

	parser: fix memory leak  - add Supported header to the list of headers that performs memory allocation
	(cherry picked from commit b52b2b9239bd59e7515fa35c29e5d6d8c3f6dc2c)


2015-04-06  Ovidiu Sas  <osas at voipembedded dot com>
	* [087f706] :

	nathelper: fix documentation typo
	(cherry picked from commit 0a404a709cb105cb16617fb4ed8e8a6fd3ae60e0)


2015-04-02  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [2284294] :

	Fix changing proto via force_send_socket().
	If the RURI does not request any protocol, use the proto of the forced socket (if any).
	Related to #420
	(cherry picked from commit ac8c2e6845ecea7d01d267b61720d332ee571e1d)


2015-04-02  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [a9ea0a1] :

	Better err logging


2015-04-01  Liviu Chircu  <liviu at opensips dot org>
	* [ef6a375] :

	force_send_socket(): update error message on bad parameter
	The transport protocol is now mandatory

	Reported by @hydrosine
	Closes #447
	(cherry picked from commit 5a346da223071201e4e9b04d462ee1219d8e5f2d)


2015-04-01  Liviu Chircu  <liviu at opensips dot org>
	* [f1053ec] :

	flag fixups: fix a sign conversion bug
	Reported by @hydrosine
	Fixes #448
	(cherry picked from commit bc160a7bab3fb2d0eb979bfedac8f67db05d42b2)


2015-04-01  Vlad Paiu  <vladpaiu at opensips dot org>
	* [ccb3777] :

	Accept TCP aliases by default Do not rely on the previous hop signaling alias via param
	(cherry picked from commit d62bc967b0d6784d2baced88b895da57f3f4ab9a)


2015-03-31  Eric Tamme  <eric at uphreak dot com>
	* [e696f6f] :

	fixed flex sub version check to include unistd.h for anything subversion 36 or higher
	(cherry picked from commit 9393492307b85a91031a5f4f35338eac44af4f5d)


2015-03-31  Eric Tamme  <eric at uphreak dot com>
	* [f1ffe77] :

	fixed flex sub version check for isatty definition - isatty was removed in .36
	(cherry picked from commit 4015747f3d0771e2f71cc7897fbd28dd3e49de9f)


2015-03-30  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [a09487b] :

	Fix documentation typo.
	Credits go to Antonis Psaras.
	(cherry picked from commit 3da2b0dfcb9e59025da6052972dc5ee3bcbeec02)


2015-03-27  Razvan Crainea  <razvan at opensips dot org>
	* [77b9d64] :

	proto_ws: prevent buffer overflow when masking
	(cherry picked from commit 9a4ae5c2f655cba57c4a542b07ad7a9da9d4e011)


2015-03-25  Razvan Crainea  <razvan at opensips dot org>
	* [9aeb470] :

	rename modules_obsolete to obsolete_modules
	this makes tree browsing easier using autocompletion
	(cherry picked from commit adc4455d9223ddbe75dd899fbb3a8e4cafcb22c7)


2015-03-24  Razvan Crainea  <razvan at opensips dot org>
	* [f26c7e6] :

	tcp & tls: preserve fd after connect succeeds
	Credits go to Peter Kelly for reporting this and helping with the testing
	(cherry picked from commit a3051522e5f9350cf690e0f2686d44838ae20308)


2015-03-24  Vlad Paiu  <vladpaiu at opensips dot org>
	* [f3b03dc] :

	Fixed TLS CRLF pingpong regression
	Properly handle CRLFCRLF pings over TLS
	(cherry picked from commit 558a4f133d12d2590075550be3094b697c57db1e)


2015-03-23  Vlad Paiu  <vladpaiu at opensips dot org>
	* [9ee5093] :

	Fixed TLS connection closing Update the SSL library with the TCP main socket before running SSL_Shutdown
	Thanks to Lirakis for the help in debugging this


2015-03-23  Răzvan Crainea  <razvan at opensips dot org>
	* [867bf99] :

	python: add documentation
	(cherry picked from commit 1dd83cfa6a99ce10876f2391d4baf5a7a986b11e)


2015-03-23  Razvan Crainea  <razvan at opensips dot org>
	* [454852a] :

	python: properly parse the script name
	(cherry picked from commit 593f26913228678d02ee5c5d6a749ed5a52fc846)


2015-03-23  ionutrazvanionita  <ionutionita at opensips dot org>
	* [97db6e7] :

	removed unecessary rootCA files


2015-03-23  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [525bd70] :

	Have tcp_async by default ON.


2015-03-23  Vlad Paiu  <vladpaiu at opensips dot org>
	* [3eb5f2b] :

	opensipsdbctl : Fixed creating Postgres database


2015-03-23  Liviu Chircu  <liviu at opensips dot org>
	* [3283130] :

	fix typo in previous commit
	(cherry picked from commit eed1c0ad0798902bc76f2955eb1ad11f2bfe4ca2)


2015-03-23  Liviu Chircu  <liviu at opensips dot org>
	* [645094b] :

	opensipsdbctl: allow running from root dir for _all_ SQL backends
	(completes commit 31c472c)
	(cherry picked from commit 49ed85a252d2b1f6b36eff56709bf73fcbca6d38)


2015-03-23  Vlad Paiu  <vladpaiu at opensips dot org>
	* [4c6d3f0] :

	Added compression and emergency to excluded modules list They depend on zlib and respectively libcurl for compiling
	(cherry picked from commit 8cc812dac2abe1206522e24d369d34f9dc9c231a)


2015-03-19  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [a1ea06b] :

	Fix compile err/warn on redhat.
	Reported by Nick Altmann.
	Credits go to Liviu Chircu.


2015-03-18  Eric Tamme  <eric at uphreak dot com>
	* [25d47d8] :

	fix rtpstat for rtpengine - thanks to jarrod for tracking down the fix
	(cherry picked from commit d10e6796aa312374592892e58af98a017f6925d5)


2015-03-18  Razvan Crainea  <razvan at opensips dot org>
	* [936e93b] :

	update version name


2015-03-18  Razvan Crainea  <razvan at opensips dot org>
	* [d1c151a] :

	update ChangeLog for 2.1


2015-03-18  Ovidiu Sas  <osas at voipembedded dot com>
	* [f1652d2] :

	mi_http: update copyright


2015-03-18  Ovidiu Sas  <osas at voipembedded dot com>
	* [b7e2137] :

	pi_http: fix compiler warning


2015-03-18  Vlad Paiu  <vladpaiu at opensips dot org>
	* [75c8154] :

	Fix route_to_carrier and route_to_gw Duplicate the RURI before pushing GWs for usage ( first gw will overwrite the actual URI )


2015-03-18  Liviu Chircu  <liviu@opensips.org>
	* [3c6873c] :

	update acc SQL scripts

2015-03-18  Liviu Chircu  <liviu@opensips.org>
	* [3865052] :

	update CREDITS

2015-03-18  Răzvan Crainea  <razvan@opensips.org>
	* [d68733e] :

	update debian rules to create separate debs

2015-03-18  Razvan Crainea  <razvan@opensips.org>
	* [b89660b] :

	update specs for the new modules
	* fixed a few fedora copy&paste error
	* add specs in debian

2015-03-18  Vlad Paiu  <vladpaiu@opensips.org>
	* [adf2b4c] :

	Fixed SIP message updating into SHM Do not touch the existing message ( might be regular MSG or fake one ) - let the respective cleaning functions ( per regular MSG or faked ) to take care of this

2015-03-18  Vlad Paiu  <vladpaiu@opensips.org>
	* [28ef79c] :

	Input is not mandatory when running exec

2015-03-18  Răzvan Crainea  <razvan@opensips.org>
	* [23d240f] :

	presence: update documentation for the new E_PRESENCE_PUBLISH event

2015-03-18  Răzvan Crainea  <razvan@opensips.org>
	* [32ded12] :

	Merge pull request #423 from telematico/master
	add event support to presence module.

2015-03-18  Răzvan Crainea  <razvan@opensips.org>
	* [0b78ab1] :

	Merge pull request #404 from wdoekes/wjd-cfgutils-errmsg-fix
	cfgutils: Clarify shvset/varset error message.

2015-03-18  Vlad Paiu  <vladpaiu@opensips.org>
	* [fcf5544] :

	Add second parameter for m_dump to limit maximum number of dumped messags Credits to Nick Altmann

2015-03-18  Vlad Paiu  <vladpaiu@opensips.org>
	* [e5cb980] :

	Add User-Agent filtering capabilities for lookup() Credits to Nick Altmann

2015-03-18  Vlad Paiu  <vladpaiu@opensips.org>
	* [645b56c] :

	Lower log level to WARNING for certain cases in order to reduce log polution Credits to Nick Altmann

2015-03-17  Razvan Crainea  <razvan@opensips.org>
	* [dbca5f4] :

	rtpengine: do not register mi functions twice

2015-03-17  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [9a82575] :

	Update documentation

2015-03-17  ionutrazvanionita  <ionutionita@opensips.org>
	* [38dc567] :

	Regenerated certificates with OpenSIPS DN

2015-03-17  ionutrazvanionita  <ionutionita@opensips.org>
	* [bb0ef8c] :

	Renewed certificates expiry date: Mar 16 2016

2015-03-17  Liviu Chircu  <liviu@opensips.org>
	* [4d019ce] :

	dispatcher: doc update

2015-03-17  Liviu Chircu  <liviu@opensips.org>
	* [388ce73] :

	dispatcher: add the "persistent_state" modparam
	Closes #430

2015-03-17  Liviu Chircu  <liviu@opensips.org>
	* [b3880a4] :

	fraud_detection: fix uninitialized pointer

2015-03-17  Liviu Chircu  <liviu@opensips.org>
	* [667e379] :

	fraud_detection: fix crash if db_url not given

2015-03-17  Liviu Chircu  <liviu@opensips.org>
	* [9ff8bf3] :

	startup: only run destroy_f if init_f has been run
	This prevents some particular startup crashes (e.g. fraud_detection).

2015-03-17  Liviu Chircu  <liviu@opensips.org>
	* [264f466] :

	drouting: fix crash with empty db_url

2015-03-16  ionutrazvanionita  <ionutionita@opensips.org>
	* [1422358] :

	Removed content that is now in Advanced tutorial section from proto_tls documentation

2015-03-16  Liviu Chircu  <liviu@opensips.org>
	* [ceb3a11] :

	opensipsdbctl: proper OpenSIPS version in command list

2015-03-14  Nick Altmann  <nick.altmann@gmail.com>
	* [73ae1a8] :

	RPM spec: updated for 2.1

2015-03-13  Liviu Chircu  <liviu@opensips.org>
	* [7f2ac40] :

	dispatcher: document prio column

2015-03-13  Răzvan Crainea  <razvan@opensips.org>
	* [cfd25fa] :

	remove devel section from proto_tls
	keep proto_tls_devel.xml for further processing

2015-03-13  Răzvan Crainea  <razvan@opensips.org>
	* [28f5eb9] :

	add proto_ws readme

2015-03-13  Răzvan Crainea  <razvan@opensips.org>
	* [a193aa1] :

	add proto_tcp readme

2015-03-13  Liviu Chircu  <liviu@opensips.org>
	* [a674a45] :

	forking phase: properly handle signals on startup_route
	Properly detect an abort within startup_route
	(e.g. if an assert() fails with abort_on_assert = yes)

2015-03-13  Vlad Paiu  <vladpaiu@opensips.org>
	* [717cffb] :

	Always load proto_udp.so module since we have default UDP listener

2015-03-13  Vlad Paiu  <vladpaiu@opensips.org>
	* [65a15aa] :

	Fixed FD closing in proto_ws Don't close FD if in our own process when write fails

2015-03-13  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [03da45a] :

	Fix adding RR params.
	Do not use context for keep track of added RR params, as other modules (like TH) may change the RR lumps, so you may end up inconsitent (context says YES, lumps say NO).
	All the time look at the lumps to see if RR was done, if params are there, etc.

2015-03-13  Razvan Crainea  <razvan@opensips.org>
	* [cb427c9] :

	relax alias declaration syntax

2015-03-13  Razvan Crainea  <razvan@opensips.org>
	* [522dc7d] :

	update opensips.cfg to 2.1

2015-03-13  Razvan Crainea  <razvan@opensips.org>
	* [417aa9a] :

	properly populate the source address for siptrace

2015-03-13  ionutrazvanionita  <ionutionita@opensips.org>
	* [8de908d] :

	Fixed proto_tls FD closing When sending through a TLS connection, do not close the FD if already in our process x

2015-03-12  Vlad Paiu  <vladpaiu@opensips.org>
	* [ca12c67] :

	Have osipsconfig generate config files with proper mpath set Fixes issue #418

2015-03-12  Razvan Crainea  <razvan@opensips.org>
	* [b9ffd9c] :

	set default WebSocket port

2015-03-12  Vlad Paiu  <vladpaiu@opensips.org>
	* [9a4b9a6] :

	Fixed callback ordering for TH replies to initial requests when using dialog First the dialog callbacks should get called so the module can update it's internal structures, and then the TH cbs should strip things

2015-03-12  Liviu Chircu  <liviu@opensips.org>
	* [ae0d275] :

	opensipsdbctl: update "migration" command for OpenSIPS 2.1

2015-03-12  Liviu Chircu  <liviu@opensips.org>
	* [f1ba20b] :

	opensipsdbctl: appropriate terminal colors for info and warning

2015-03-12  Liviu Chircu  <liviu@opensips.org>
	* [cd90816] :

	opensipsdbctl: add "cachedb" in the list of extra tables

2015-03-12  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [f4f0227] :

	Identation fixes

2015-03-12  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [4cbbfaa] :

	Copyright updated

2015-03-12  Razvan Crainea  <razvan@opensips.org>
	* [b6d4230] :

	rr: no need to search the outbound interface
	for single route messages, the outbound interfaces is the same with the
	inbound one, so there is no need to search for an outbound socket

2015-03-12  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [f612548] :

	Proper WS support in tracing and capturing (Homer)

2015-03-12  Razvan Crainea  <razvan@opensips.org>
	* [73f5a23] :

	mi_xmlrpc: format error message as XML

2015-03-12  Razvan Crainea  <razvan@opensips.org>
	* [aafe2ef] :

	httpd: propagate tree status code in http return

2015-03-12  Razvan Crainea  <razvan@opensips.org>
	* [d897605] :

	allow any protocol in blacklist

2015-03-12  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [c948b8e] :

	Fix compile err (using deprecated macros)

2015-03-12  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [bef76d1] :

	removed all SHM_MEM - shared mem is mandatory

2015-03-12  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [cb0a88f] :

	remove SHM_MEM defines + beautification

2015-03-12  Liviu Chircu  <liviu@opensips.org>
	* [1a8a993] :

	Fix routing list debug output (on -DEXTRA_DEBUG)

2015-03-12  Razvan Crainea  <razvan@opensips.org>
	* [9018a94] :

	import unistd for versions lower than 2.5.39

2015-03-12  Razvan Crainea  <razvan@opensips.org>
	* [870fa0d] :

	Revert "Solve isatty flex warning"
	This reverts commit 752d776e24eded80b4fa9e56a53329c03c8f1d49.

2015-03-12  Razvan Crainea  <razvan@opensips.org>
	* [3ba1804] :

	do not change publish status in EXPIRE callback

2015-03-11  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [4e30e8d] :

	Fix detection for HAVE_TCP_KEEPxxxx support.
	Reported by Pete Kelly

2015-03-11  Vlad Paiu  <vladpaiu@opensips.org>
	* [be9d58c] :

	Added FAQ note in the readme about the moving of the topology_hiding() function

2015-03-11  ionutrazvanionita  <ionutionita@opensips.org>
	* [55d8355] :

	merged tlsops module in proto_tls

2015-03-11  Razvan Crainea  <razvan@opensips.org>
	* [7cdd58a] :

	check if the callback is not expire, then verify ctx
	Thanks go to Peter Kelly for reporting this

2015-03-11  Liviu Chircu  <liviu@opensips.org>
	* [dc6c865] :

	tm: fix compilation issues on -DEXTRA_DEBUG

2015-03-10  Bogdan Andrei IANCU  <bogdan@opensips.org>
	* [66837ba] :

	Merge pull request #429 from etamme/master
	expose the DTLS passive flag to allow for passive relay through rtpengine

2015-03-10  Eric Tamme  <eric.tamme@onsip.com>
	* [b577559] :

	expose the DTLS passive flag to allow for passive relay through rtpengine

2015-03-10  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [eaa5f1a] :

	Fix ul_show_contact output.

2015-03-10  Liviu Chircu  <liviu@opensips.org>
	* [ab5ec5b] :

	msg, branch flags: add extra logging if -DEXTRA_DEBUG is present

2015-03-10  Liviu Chircu  <liviu@opensips.org>
	* [d4fec77] :

	tm: proper handling of branch flags in branch_route

2015-03-10  Vlad Paiu  <vladpaiu@opensips.org>
	* [f0869bc] :

	Do not close the FD on write errors even if in our context, so we don't get errors when we remove from worker's list

2015-03-10  Vlad Paiu  <vladpaiu@opensips.org>
	* [4d97a8d] :

	Fixed freeing of per connection buffer Do not touch the buffer in case we are in a writing context

2015-03-10  Razvan Crainea  <razvan@opensips.org>
	* [d080bcc] :

	properly parse WS socket
	Credits go to Eric Tamme for reporting this

2015-03-10  ionutrazvanionita  <ionutionita@opensips.org>
	* [43eaaac] :

	Fixed copyright for tls doc

2015-03-10  ionutrazvanionita  <ionutionita@opensips.org>
	* [59ecda4] :

	updated tls documentation

2015-03-10  Razvan Crainea  <razvan@opensips.org>
	* [2781c81] :

	fix offset when adding WS transport parameter

2015-03-10  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [90c410c] :

	Fix timer delay detection.
	Instead of using the timer TICK to detect its own delays (which is a bit bogus), use the internal timer (which has a higher granularity) to detect delays in the TIMER or UTIMER timers.

2015-03-10  Vlad Paiu  <vladpaiu@opensips.org>
	* [7987850] :

	Changed menuconfig templates for generating configs to use the proto_tcp and proto_tls modules

2015-03-10  Razvan Crainea  <razvan@opensips.org>
	* [ad9d1ce] :

	exec: fix inline compile errors

2015-03-10  Liviu Chircu  <liviu@opensips.org>
	* [07118f8] :

	modules/proto_sctp: add documentation & README

2015-03-10  Liviu Chircu  <liviu@opensips.org>
	* [1eff0b3] :

	net/proto_udp: add documentation & README

2015-03-10  Liviu Chircu  <liviu@opensips.org>
	* [18da7b4] :

	.html, .pdf and README generation: also build inside "net/" dir
	The following commands will now also build documentation from the net/
	directory:
	    * make modules-readme
	    * make modules-docbook-html
	    * make modules-docbook-txt
	    * make modules-docbook-pdf

	Some examples:

	    * make modules-readme modules="proto_udp proto_sctp dialog"
	    * make modules-docbook-html modules="net/proto_udp modules/tm"

2015-03-09  Vlad Paiu  <vladpaiu@opensips.org>
	* [aba0f90] :

	Removed USE_TLS and USE_TCP defines - added support for compiling proto_tls and proto_sctp modules

2015-03-09  Liviu Chircu  <liviu@opensips.org>
	* [122ace5] :

	proto_ws: fix unitialized var

2015-03-09  Razvan Crainea  <razvan@opensips.org>
	* [e25e029] :

	WS: remove polarssl dependency

2015-03-09  Vlad Paiu  <vladpaiu@opensips.org>
	* [3e440cb] :

	When adding FD to hash, check if it exceeds max_fd_no in order to avoid mem corruption

2015-03-09  Razvan Crainea  <razvan@opensips.org>
	* [5f268d6] :

	siptrace: support ws protocol

2015-03-09  Razvan Crainea  <razvan@opensips.org>
	* [922fc63] :

	ws: for now, we only need the state in shmem

2015-03-09  Razvan Crainea  <razvan@opensips.org>
	* [5d659ff] :

	ws: properly search params within a header

2015-03-09  Razvan Crainea  <razvan@opensips.org>
	* [3b88906] :

	ws: add module parameters

2015-03-09  Razvan Crainea  <razvan@opensips.org>
	* [7903f2c] :

	add WebSocket transport protocol

2015-03-09  Razvan Crainea  <razvan@opensips.org>
	* [178b0cc] :

	siptrace: check protocol without colon
	Thanks for Satish Patel for reporting this

2015-03-08  Liviu Chircu  <liviu@opensips.org>
	* [0509320] :

	dialplan: document timerec_col

2015-03-07  Liviu Chircu  <liviu@opensips.org>
	* [9b626bf] :

	cfg.y: do not start OpenSIPS when using HP_MALLOC cfg params
	Also fix a linking error on other allocators (commit 607fdddf)
	Reported by SamyGo

2015-03-06  Liviu Chircu  <liviu@opensips.org>
	* [607fddd] :

	HP_MALLOC: fix hp_status()
	    * Proper display of free fragment buckets on sig USR1/TERM/shutdown
	    * some code refactoring

2015-03-06  Vlad Paiu  <vladpaiu@opensips.org>
	* [0aa3df4] :

	Fix poll method before initializing UDP & TCP layers

2015-03-06  Vlad Paiu  <vladpaiu@opensips.org>
	* [a3deecc] :

	Properly close FDs When releasing the connection in a bad state, we don't always want to close the actual FD in con ( eg. we have the con in a write context, and we have acquire the FD from main - con->fd will be from another worker's context )

2015-03-06  Liviu Chircu  <liviu@opensips.org>
	* [ca0290b] :

	remove all svn-specific $Id$ tokens from license headers

2015-03-06  Vlad Paiu  <vladpaiu@opensips.org>
	* [aec9956] :

	Fixed bug in unhashing FDs Reset the READ pending flags before running the IO handler

2015-03-05  Liviu Chircu  <liviu@opensips.org>
	* [8dfe15e] :

	json: set $json content to NULL if assignment fails
	This makes it possible to test for parsing errors if the $json variable
	was already populated (possibly even from other SIP requests!)

2015-03-05  Liviu Chircu  <liviu@opensips.org>
	* [8ae9f60] :

	rest_client: documentation update

2015-03-05  Liviu Chircu  <liviu@opensips.org>
	* [60d2473] :

	rest_post: allow the Content-Type parameter to be NULL
	This makes libcurl use the default Content-Type for POST
	requests: "application/x-www-form-urlencoded"

2015-03-05  Vlad Paiu  <vladpaiu@opensips.org>
	* [0802311] :

	Optimized TCP writing Do not try to acquire FD from main on TCP write in case the TCP connection is already polled on in the context of the current TCP worker

2015-03-05  Liviu Chircu  <liviu@opensips.org>
	* [4efeba5] :

	bin interface processing: add check for min length

2015-03-04  Liviu Chircu  <liviu@opensips.org>
	* [5451ab6] :

	rest_client: add async capabilities to rest_post()

2015-03-04  Carlos Oliva  <telematico@gmail.com>
	* [dc751e5] :

	added event support to presence module.
	The event E_PRESENCE_PUBLISH will be triggered each time the presence module receives a PUBLISH
	The parameters of the event are:
	user::AOR
	domain::domain
	event::event_type
	expires::int_time_to_expire
	etag::etag_string
	body::string_with_xml_body_of_publish

2015-03-03  Liviu Chircu  <liviu@opensips.org>
	* [7b96d7a] :

	Documentation improvements and fixed typos

2015-03-03  Liviu Chircu  <liviu@opensips.org>
	* [0b04f61] :

	sngtc: Improve documentation on fetching and compiling libsngtc_node
	(cherry picked from commit 9b8b13072e22426f4e5b8e1c3942a0b225e6da2d)

	Conflicts:
		modules/sngtc/sngtc.c
		pt.c

2015-03-03  Liviu Chircu  <liviu@opensips.org>
	* [f3ed4db] :

	Fix infinite recursion when nesting $param variables
	Keep an array with the route parameters of each nesting level. This
	makes it possible to access the parameters of previous route()
	statements even if they contain $param variables.

	Closes #412

2015-03-03  Vlad Paiu  <vladpaiu@opensips.org>
	* [1f517c3] :

	Fix param.valueat at param.name - params are stored in the same order

2015-03-03  Liviu Chircu  <liviu@opensips.org>
	* [685da74] :

	avpops: Proper validation for DB_CAP_RAW_QUERY capability
	Prevent OpenSIPS from starting if avp_db_query() is used and the concerned
	DB engine does not support raw SQL queries. This prevents runtime
	crashes in some rare cases (e.g. issues with db_http module, which might
	not have full support)

	Fixes #405

	(cherry picked from commit 8d978ac4530ebf95925efc44cb11d0a549e20a52)

2015-03-02  Liviu Chircu  <liviu@opensips.org>
	* [31c472c] :

	opensipsdbctl: Fix DB creation in dev mode
	    * scripts/opensipsdbctl ... now works

2015-03-02  Liviu Chircu  <liviu@opensips.org>
	* [7fefe50] :

	opensipsctl: Fix TLS certificate generation in dev mode
	    * you can now run scripts/opensipsctl tls ...
	    * no need to specify ETCDIR
	    * do not throw error when giving no command
	    * add template for explicit ETCDIR in opensipsctlrc

	Fixes #369

2015-03-01  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [1b08408] :

	Fix setb0flags() usage

2015-03-01  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [4eeb67d] :

	Fix compile warnings

2015-03-01  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [f3e711d] :

	expose get_sock_info_list()

2015-02-28  Ovidiu Sas  <osas@voipembedded.com>
	* [3e5915a] :

	Makefile.conf.template" add proto_sctp to the list of excluded modules

2015-02-28  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [2dd472a] :

	Update for the new proto design

2015-02-28  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [2052432] :

	If fd is NULL, tcp_conn_get() skips acquire fd

2015-02-28  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [713e22f] :

	Fix: do not set timeout on tcp_conn_get()

2015-02-27  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [98796b3] :

	Merge branch 'transport-interface'
	Conflicts:
		Makefile.conf.template
		io_wait.c
		io_wait.h
		reactor_defs.h
		tcp_main.c
		tcp_read.c
		udp_server.c

2015-02-27  Razvan Crainea  <razvan@opensips.org>
	* [487998a] :

	expose init_tcp_req() to other modules

2015-02-27  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [44f3f55] :

	Use conn idx as it is known.

2015-02-26  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [11aedc6] :

	Major rework on TCP conns lifetime and timeouts.

2015-02-26  Liviu Chircu  <liviu@opensips.org>
	* [7e966f6] :

	opensipsctl: fix compatibility issues with FreeBSD [part 2]
	Yet another /bin/sh compatibility issue. Completes commit a2494eba

2015-02-25  ionutrazvanionita  <ionutionita@opensips.org>
	* [2e25e95] :

	added schema to uri transformations

2015-02-25  Razvan Crainea  <razvan@opensips.org>
	* [0e720aa] :

	store the last called prefix
	Check why we keep the last prefix global

2015-02-25  root  <root@localhost.localdomain>
	* [3f9ed17] :

	Merge branch 'master' of github.com:OpenSIPS/opensips

2015-02-24  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [608de67] :

	Fix parser error - URI in Contact hdr is mandatory
	(cherry picked from commit 1fa6a230e499347b29003826790917d44576bda3)

2015-02-24  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [66f368e] :

	FIXME -> TODO

2015-02-24  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [3222e1e] :

	FIX some race condition of conn handling.
	Credits go to Vlad.

2015-02-23  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [3018687] :

	Do not release conn from worker after read.

2015-02-23  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [deee756] :

	Set conn lifetime via fcntl like function.

2015-02-23  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [41dc79d] :

	Expose a conn fcntl like function to App level.
	1. tcp_conn_fcntl() function offered by TCP net layer
	2. TLS and TCP protos reuses this function for Transport layer.

2015-02-22  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [78c8462] :

	Better timeout granularity on connect.

2015-02-22  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [eb1b02c] :

	setting tcp_send_timeout to default 10 ms

2015-02-22  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [b343ca1] :

	TCP related timeouts migreate to ms.
	tcp_send_timeout moved as parameter to proto_tcp module
	tcp_send_timoout, tcp_async_local_connect_timeout, tcp_async_local_write_timeout consistenly moved to milliseconds.
	default tcp_send_timeout value set to 10 ms

2015-02-22  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [0ef2199] :

	Migrate timeouts from sec to msecs.
	Reduce the default timeouts from 30secs to 100 msecs.

2015-02-22  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [dd3d898] :

	Total removal of USE_IPV6 define

2015-02-22  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [5c3f2f3] :

	Fix SCTP proto detection in TM module.
	Credits go to @jamesabravo on GITHUB
	Closes #413 .

2015-02-21  root  <root@localhost.localdomain>
	* [7ae82f6] :

	emergency module refactoring -- dividing in smaller C files

2015-02-20  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [8ff6195] :

	Add auto-disabling of TCP/UDP layers if not used by any proto.

2015-02-20  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [25455ca] :

	Removed all USE_TCP dependencies

2015-02-20  Razvan Crainea  <razvan@opensips.org>
	* [2c99b4e] :

	if no listeners are defined, remove the module

2015-02-20  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [c488a94] :

	Partial removal of USE_TCP

2015-02-20  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [8becb75] :

	Re-order TCP related parameters

2015-02-20  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [172eea3] :

	Each protocol has its own default port parameter.
	Removed the global core parameter "port".
	Each protocol exports a module parameter for setting the defaul port.

2015-02-19  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [eb3355a] :

	Fix complile err, remove old files

2015-02-19  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [29438b6] :

	Remove USE_SCTP define

2015-02-19  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [6f31dda] :

	Full migration of SCTP support to module

2015-02-19  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [3c1043b] :

	Add SCTP proto as module/proto_sctp

2015-02-19  Ovidiu Sas  <osas@voipembedded.com>
	* [f3f7f42] :

	httpd: fix memory leak for non-POST requests

2015-02-19  Razvan Crainea  <razvan@opensips.org>
	* [5e5aec4] :

	merge proto bind and init in a single step

2015-02-19  Razvan Crainea  <razvan@opensips.org>
	* [36586d6] :

	net: bind protocols and default port before mod_init

2015-02-18  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [2a14ce8] :

	Add missing files with the TLS param handling

2015-02-18  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [fac0275] :

	TLS final & major cleanup in core.
	Move all TLS related parameters from core to proto_tls module.
	Remove USE_TLS from all code.
	Make mandatory to specify the proto in the definition of a listener (in cfg file).

2015-02-18  Bogdan Andrei IANCU  <bogdan@opensips.org>
	* [20ebcf0] :

	Merge pull request #416 from etamme/master
	fixed bitmask to cover all 3 bits vs. 1st and 3rd.  Thanks to eldonogith...

2015-02-18  Bogdan Andrei IANCU  <bogdan@opensips.org>
	* [60e03a1] :

	Merge pull request #414 from jbonicioli/master
	modified source and target table for registrant table migration

2015-02-18  Razvan Crainea  <razvan@opensips.org>
	* [465c4be] :

	rabbitmq: set the connected flag only after socket is created
	Credits go to Ovidiu Sas for detecting, debugging and solving this issue

2015-02-18  Eric Tamme  <eric.tamme@onsip.com>
	* [adf010e] :

	fixed bitmask to cover all 3 bits vs. 1st and 3rd.  Thanks to eldonogithub.

2015-02-18  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [a059c26] :

	init_proto() merged into mod_init()

2015-02-18  jbonicioli  <nettraptor@awmn.net>
	* [9139584] :

	modified source and target table for registrant table migration

2015-02-18  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [b8cc61e] :

	Proper integration of TLS conn clean with TCP net.

2015-02-18  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [a73e0b7] :

	USE_TLS massive removal

2015-02-17  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [e7ed341] :

	TLS state machine and write ops added.

2015-02-17  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [776380f] :

	tcp_conn_create() enhanced.
	Remeber if the conn was accepted or connected.
	Use proto from the involved socket (must be the same).
	Conn has also proto_flags (protocol specific flags)

2015-02-17  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [ee3227b] :

	Cleanup in TCP connection states.

2015-02-17  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [135120f] :

	tcp_blocking_connect() moved from TCP proto layer to TCP network layer (to be reused by TLS too).

2015-02-17  Vlad Paiu  <vladpaiu@opensips.org>
	* [f61f685] :

	Check for dlg api loading when trying to call match_dialog()

2015-02-17  ionutrazvanionita  <ionutionita@opensips.org>
	* [0eb2b4d] :

	Merge branch 'master' of https://github.com/OpenSIPS/opensips

2015-02-17  ionutrazvanionita  <ionutionita@opensips.org>
	* [48a2193] :

	avoid compilation warning

2015-02-17  Vlad Paiu  <vladpaiu@opensips.org>
	* [c03e0b6] :

	Added license headers

2015-02-17  Vlad Paiu  <vladpaiu@opensips.org>
	* [d84649e] :

	Added topology_hiding module
	The module can work on top of the dialog module, or as a standalone module ( thus alowing topology hiding for all types of dialogs - not just INVITE based )
	Exposes topology_hiding() and topology_hiding_match() funcs.

	Current limitations :
	- uac_replace_from / uac_replace_to will not work if running without the dialog module ( the Record-Route headers added by the Proxy are stripped )
	- callid hiding works just when running on top of the dialog module

2015-02-17  ionutrazvanionita  <ionutionita@opensips.org>
	* [c53bd4f] :

	Merge branch 'master' of https://github.com/OpenSIPS/opensips

2015-02-17  ionutrazvanionita  <ionutionita@opensips.org>
	* [94cf5dd] :

	Added created and setup time on missed calls when cdr flag is set

2015-02-17  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [076e5dd] :

	Reading part made functional.

2015-02-17  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [31ff8e5] :

	One more split in defs and funcs hdr files.

2015-02-17  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [8527f36] :

	Separate common TCP functions to be reused by TLS.

2015-02-16  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [4444595] :

	Moving TLS related files into modules/proto_tls

2015-02-13  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [e1bbbe5] :

	Intial upload of call emergency module.
	Credits go to Robison Tesini & Evandro Villaron.

2015-02-13  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [e8158cd] :

	More on re-arranging the TLS code

2015-02-13  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [d8cfac6] :

	Initial move of TLS code into proto_tls module

2015-02-12  Ovidiu Sas  <osas@voipembedded.com>
	* [4915af5] :

	Merge pull request #411 from staskobzar/master
	httpd: Make sure httpd can recognize Content-Type headers with params.

2015-02-12  Stas Kobzar  <stas@modulis.ca>
	* [918f718] :

	httpd: Make sure httpd can recognize Content-Type headers with params.

2015-02-12  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [efd4a07] :

	Proper init of protos (via the net layer)

2015-02-12  Vlad Paiu  <vladpaiu@opensips.org>
	* [85d4820] :

	Fix dialog race condition on BIN replication
	The writing of dialog profiles needs to be done under the dialog lock ( in case there's a race condition with the BYE freeing the profile linkers )

2015-02-11  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [795c8ed] :

	Proper loading of the UDP-plain proto module

2015-02-11  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [6cd7822] :

	Missing UDP files added/removed

2015-02-11  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [aaeeb7d] :

	UDP files split into Network and Proto layers.

2015-02-11  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [c3fe175] :

	Fix bug in TCP inter-proc communication

2015-02-10  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [0cfa149] :

	Couple of fixes on the new TCP rework

2015-02-10  Razvan Crainea  <razvan@opensips.org>
	* [170566b] :

	Merge the two interfaces implemented by the transport protocols

2015-02-10  Razvan Crainea  <razvan@opensips.org>
	* [a1f041c] :

	fix the proto name

2015-02-10  Razvan Crainea  <razvan@opensips.org>
	* [39e0f36] :

	fix PROTO_FIRST typo in seas module

2015-02-10  Razvan Crainea  <razvan@opensips.org>
	* [b6dab49] :

	consistent index protocols starting from 1

2015-02-10  Vlad Paiu  <vladpaiu@opensips.org>
	* [4782d0a] :

	Added support for DATE fields in mongodb raw queries - date fields will be returned as UNIX timestamp (cherry picked from commit 8302fc8f545a4fb169ade55fdfbcf916cf6b9cd6)

2015-02-09  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [0d743fb] :

	Remove global holders for listeners.

2015-02-09  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [bc17dac] :

	Remove global holders for listeners.

2015-02-09  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [2922fcd] :

	Several TCP related params moved from core to TCP plain module.
	Moved from core to TCP module:
	* tcp_max_msg_chunks
	* tcp_crlf_pingpong
	* tcp_crlf_drop
	* tcp_async
	* tcp_async_max_postponed_chunks
	* tcp_async_local_connect_timeout
	* tcp_async_local_write_timeout

	The async support test moved from reactor into TCP-plain module.

2015-02-09  ionutrazvanionita  <ionutionita@opensips.org>
	* [b003f50] :

	Sip-wisely Content-Type parsing

2015-02-09  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [1673663] :

	Add conn_init() and conn_clean() per connection.
	Network layer triggers corresponding (to proto) init() and clean() functions when creating or trashing a TCP connection.
	For TCP plain, the handling of data chunks (pending writes) moved into these new function, independent of the TCP network layer.

2015-02-09  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [3ba41f5] :

	send() function added in proto API.
	proto TCP exposes a send() function via API.
	send_msg() is using the proto APIs to select the send() function according to the protocol.

2015-02-06  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [ded5102] :

	Splitting TCP code into net and proto layers.
	This code is not yet functional, but it compiles ;)
	(work in progress)

2015-02-06  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [c322f5d] :

	File re-organizing for spliting TCP code into net and proto layers.

2015-02-05  Liviu Chircu  <liviu@opensips.org>
	* [6b32871] :

	tm: fix memory handling when updating the SIP transaction
	Related to commit 7eaf122

2015-02-04  ionutrazvanionita  <ionutionita@opensips.org>
	* [57d2870] :

	avoid memory leak by not making all the table list null when removing only one table

2015-02-04  Liviu Chircu  <liviu@opensips.org>
	* [a268b1d] :

	db_mysql: properly NULL the result pointer if a query fails
	This prevents issues with non-initialized pointers (issue #406)

2015-02-04  Liviu Chircu  <liviu@opensips.org>
	* [c8f3604] :

	module dependencies: immediately exit on mod_init failures

2015-02-04  Liviu Chircu  <liviu@opensips.org>
	* [e2c77e4] :

	dialog: do not start OpenSIPS on DB init failure

2015-02-04  Liviu Chircu  <liviu@opensips.org>
	* [32b613a] :

	db_text: improve error reporting on startup
	* show the table concerned
	* show mismatching column counts

2015-02-04  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [56d6927] :

	Encapsulate the sending of the return code per process

2015-02-03  Aron Podrigal  <aronp@guaranteedplus.com>
	* [d6a0975] :

	fixes #406
	Fix segfault caused by referencing uninitialized pointer
	in dispatcher module.

	(cherry picked from commit b71f6de9ea21d0f9c39ec92f4df0e6d56e2a9753)

2015-02-03  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [131bd99] :

	Aligne the proto TCP-plain to TCP networking layer

2015-02-02  Razvan Crainea  <razvan@opensips.org>
	* [d6597a6] :

	net: add a flag to indicate whether a protocol uses TCP or UDP underneath

2015-02-02  Razvan Crainea  <razvan@opensips.org>
	* [5c7340c] :

	net: rename proto and proto_net structures
	Moved them in corresponding files: api_proto and api_proto_net

2015-02-02  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [3f0b8fe] :

	Inconssistenci error when pkg_realloc() fails.
	If malloc fails and new static buff=NULL, we have to modify buff_size accordingly, or we will face out-of bound exception.
	Credits go to Sergey KHripchenko, related to pull request #345

2015-01-30  ionutrazvanionita  <ionutionita@opensips.org>
	* [38522f1] :

	Made null table parameter after being freed to avoid double free ( individual free from each module and group free from db_text in destroy function of each module)

2015-01-29  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [80c5b83] :

	copyright added

2015-01-29  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [0bd2934] :

	Add priorities for the fds in reactor.
	It is important to have priorities between the fds triggered in reactor/poll. Operations like timer or async resume must have priority over reading new SIP messages from network.
	Current code generically implements a priority mechanism, for all types of polling. We may optimize it in the next weeks, with specific implementations for each type of polling.

2015-01-29  Razvan Crainea  <razvan@opensips.org>
	* [b64d554] :

	ti: implement tcp_read function

2015-01-28  Razvan Crainea  <razvan@opensips.org>
	* [2f84c74] :

	get_current_dlg(): don't reference a NULL dialog

2015-01-28  Walter Doekes  <walter+github@wjd.nu>
	* [a3fdc1d] :

	cfgutils: Clarify shvset/varset error message.

2015-01-27  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [378dae9] :

	Fix missing dlg reference when copying from TM.

2015-01-27  Ovidiu Sas  <osas@voipembedded.com>
	* [e8101df] :

	usrloc: consolidate mi output for ul_show_contact  - same output format for ul_show_contact and ul_dump

2015-01-27  Ovidiu Sas  <osas@voipembedded.com>
	* [4f070e2] :

	mi_http: fix escaping

2015-01-27  Razvan Crainea  <razvan@opensips.org>
	* [2184def] :

	tcp: rename TCP connection

2015-01-27  Razvan Crainea  <razvan@opensips.org>
	* [6725e57] :

	ti: add TCP static module

2015-01-26  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [54ec98e] :

	Fix missing comma.

2015-01-26  Ovidiu Sas  <osas@voipembedded.com>
	* [e7467c5] :

	Makefile.conf.template: remove references to mi_xmlrpc (deleted)

2015-01-26  Razvan Crainea  <razvan@opensips.org>
	* [39f6735] :

	configurable proto name

2015-01-26  Razvan Crainea  <razvan@opensips.org>
	* [3c7c44f] :

	add bind() prototype

2015-01-26  Razvan Crainea  <razvan@opensips.org>
	* [fe71b14] :

	implement add_listener logic

2015-01-23  Liviu Chircu  <liviu@opensips.org>
	* [1a6a9e2] :

	async DB API: revise return codes
	Align return codes to changes imposed by commit bd4b488afee

2015-01-23  Liviu Chircu  <liviu@opensips.org>
	* [827ebbc] :

	avpops: update documentation

2015-01-23  Liviu Chircu  <liviu@opensips.org>
	* [72fb6f1] :

	avpops: add optional asynchronous capabilities to avp_db_query()
	avp_db_query() may now also be used in an asynchronous manner.
	(currently only with db_mysql).

	Scripting example:
	    async(
		avp_db_query(
		    "SELECT table_name, SLEEP(0.1) from version",
		    "$avp(tb_name); $avp(tb_ver); $avp(time)"),
		my_resume_route);

2015-01-23  Liviu Chircu  <liviu@opensips.org>
	* [6c4f266] :

	db_mysql: implement async_raw_query and async_raw_resume
	The db_mysql module is now fully capable of running asynchronous raw
	queries.

2015-01-23  Liviu Chircu  <liviu@opensips.org>
	* [d9411e9] :

	DB core: fix compilation issue on newer gcc versions
	aka Redundant redeclaration of function typedefs

2015-01-23  Liviu Chircu  <liviu@opensips.org>
	* [3eacd98] :

	OpenSIPS script: "db_max_async_connections" global parameter
	Maximum number of TCP connections opened from a single OpenSIPS worker to each
	individual SQL backend. Default value is 10.

	Individual backends are determined from URLs as follows:
	    [ scheme, user, pass, host, port, database ]

2015-01-23  Razvan Crainea  <razvan@opensips.org>
	* [17817f8] :

	Merge branch 'master' into transport-interface
	Conflicts:
		main.c
		modules/rest_client/rest_client.c
		modules/rest_client/rest_methods.c

2015-01-23  Razvan Crainea  <razvan@opensips.org>
	* [c28a9a6] :

	dialog: prevent the same reply from changing the same state twice

2015-01-23  Razvan Crainea  <razvan@opensips.org>
	* [6786291] :

	mi_xmlrpc_ng: add \n after each node

2015-01-23  Saúl Ibarra Corretgé  <saghul@gmail.com>
	* [353a519] :

	Revert "Changes to stop keepalives on unregisters"
	This reverts commit 4c9a1fa2a791d37629b7272581f6d52c4b0f9666.

2015-01-23  Razvan Crainea  <razvan@opensips.org>
	* [b280f8d] :

	permissions: raise the proper error when the IP is not provided

2015-01-23  Liviu Chircu  <liviu@opensips.org>
	* [f545ba0] :

	Makefile: fix concurrency issue leading to linking errors
	main.c needs to be recompiled if the version name changes. When doing
	multi-threaded compiling (make -j), main.o would sometimes be deleted
	right after it was compiled, triggering a linking error of the "opensips" binary.

	The patch also prevents main.c to be recompiled each time if the ".git" dir
	is not present. (i.e. compiling a tarball archive). Credits to Răzvan
	Crainea.

	Thanks to Bobby Hakimi for offering a replication environment.
	Closes #373

2015-01-23  Liviu Chircu  <liviu@opensips.org>
	* [1a71a44] :

	event_route: fix compile warning on i386

2015-01-23  Liviu Chircu  <liviu@opensips.org>
	* [5044d7d] :

	DB core: add the DB_CAP_ASYNC_RAW_QUERY capability
	DB modules who define both "async_raw_query" and "async_raw_resume" will
	have this capability enabled after handle initialization.

2015-01-23  Liviu Chircu  <liviu@opensips.org>
	* [257e84b] :

	async DB core: fix possible buffer overflow

2015-01-22  Liviu Chircu  <liviu@opensips.org>
	* [92755be] :

	DB core: add support for asynchronous raw SQL queries
	The DB core now allows SQL modules to register async raw query
	functions. For normal, blocking queries, execution flow remains exactly
	the same.

	Documentation available in db/db_async.h

2015-01-22  Liviu Chircu  <liviu@opensips.org>
	* [5081dde] :

	async fd management: do not close read fds by default
	Also add a new async_ret_code: ASYNC_DONE_CLOSE_FD. To be used by modules who
	want to have their fds closed when respective async operations are completed.
	(e.g. exec)

2015-01-22  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [4324f71] :

	Merge branch 'shripchenko-master'

2015-01-22  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [ca45388] :

	Small fixes.

2015-01-22  Razvan Crainea  <razvan@opensips.org>
	* [0b3ac29] :

	add listener functions

2015-01-22  Razvan Crainea  <razvan@opensips.org>
	* [0b3cf88] :

	add TCP dummy connection

2015-01-22  Razvan Crainea  <razvan@opensips.org>
	* [f435ce6] :

	rename old tcp_init function

2015-01-22  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [02a2025] :

	Merge branch 'master' of git://github.com/shripchenko/opensips into shripchenko-master
	Conflicts:
		modules/load_balancer/lb_data.c

2015-01-21  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [2fdeba6] :

	Fix updating contact records in DB.
	If Contact-only matching mode is used, the callid is not part of the key in DB query, but part of the updated values (as callid may change).
	Closes #402.

2015-01-21  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [444b680] :

	Fix balancing on failover.
	First, the way the calls were re-distributed if the calculated destination is inactive was completely unbalanced and did not respect the hashing concepts (same hash hits the same destination). Along with this problem, the fix covers the re-balancing problem - if a destination becomes inactive, the balancing over the remaining destination should not be affected (if hash H1 hits destination D1, after D2 goes inactive, H1 must still hit D1).
	The use_default concept was reworked to properly work with all algorithms and in all cases (with or without weights).

	Closes #387.

2015-01-21  ionutrazvanionita  <ionutionita@opensips.org>
	* [b69ae32] :

	fixed load_credentials avp default name when no name is specified

2015-01-21  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [4787f57] :

	README fix

2015-01-21  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [92334e6] :

	Updates on return codes and README

2015-01-21  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [870ab01] :

	Several updates:
	-use the "async_status" to report the status at async level
	-drop the old async implementation (kind of exec and do not wait)
	-if no output is required from command, do not wait on it at all
	-README file updated

2015-01-21  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [bd4b488] :

	Use 2 ret codes - function and async.
	We need to have to kinds of return codes in parallel - the return code of the function, reporting whatever it is doing inside (like for the sync'ed functions) and one for the async engine, to report what is the status of the async part (started, not started, done in sync way, no IO done, etc).

2015-01-21  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [f1f5545] :

	Do waitpid() if a SIGCHILD is received.
	Generic handling on non-OpenSIPS processes (external forks) - if an OpenSIPS process receives SIGCHILD, do automatically a waitpid (non-blocking) to avoid zombi processes.

2015-01-19  Razvan Crainea  <razvan@opensips.org>
	* [e89c58e] :

	load transport protocols and initialize them

2015-01-19  Razvan Crainea  <razvan@opensips.org>
	* [d3c05fb] :

	remove trailing spaces for parser

2015-01-19  Razvan Crainea  <razvan@opensips.org>
	* [752d776] :

	Solve isatty flex warning
	Fixes 'warning: implicit declaration of function ‘isatty’ ' warning

2015-01-16  Razvan Crainea  <razvan@opensips.org>
	* [390cf79] :

	Add network API headers

2015-01-15  Ovidiu Sas  <osas@voipembedded.com>
	* [3e18886] :

	rr: enhance some logs

2015-01-14  Razvan Crainea  <razvan@opensips.org>
	* [6a648c9] :

	fix the vars db type to BLOB
	Indicate the DB engine that the dlg vars column is a BLOB
	Thanks go to John Nash for reporting this.
	Close #398

2015-01-14  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [8e44e4d] :

	Fix handling dst_uri in cloned messages.
	Thanks to Liviu for pointing out - the dst_uri, after doing a fake msg (a copy from a shm cloned msg) had the wrong dst_uri linked (one in shm mem).

2015-01-14  Liviu Chircu  <liviu@opensips.org>
	* [c3d9ceb] :

	rest_client: add optional asynchronous capabilities to rest_get()
	rest_get() may now be used in an asynchronous manner, thanks to libcurl's
	multi interface. Its syntax is identical to its blocking counterpart.

	Scripting example:
	    async(rest_get("URL", "$var(res)"), my_resume_route);

2015-01-14  Liviu Chircu  <liviu@opensips.org>
	* [651f0e2] :

	tm: fix transaction cleanup in async scenarios
	The transaction state is now saved within and restored from each async
	operation. (in the _async_ctx struct)

	This prevents transaction leaks when stacking up multiple async jumps.

2015-01-14  Liviu Chircu  <liviu@opensips.org>
	* [0a9e813] :

	mem/mem.h: fix header includes

2015-01-14  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [ad06ace] :

	Fixes realated to previous commit (double siptrace)
	(cherry picked from commit d4e81886c41e17fe259ba2ee48d6b2ce3e7eb016)

2015-01-14  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [e88f1b6] :

	Fix double tracing in trace_dialog().
	If user AVPs are set and the trace flas is not, the code was forcing the tracing flag which was producing a duplicate of the trace. Now, the flags status (on/off) is also stored in the dialog (as var) and restore later, for each sequential request.

	(cherry picked from commit 24ba3ed467bebc1f029e5c0627225f8d54163143)

2015-01-14  Liviu Chircu  <liviu@opensips.org>
	* [4b6f80f] :

	F_MALLOC: add extra safety checks at runtime
	The F_MALLOC allocator now properly reports any free() or realloc() operations
	which are performed on bogus memory regions, making OpenSIPS immediately abort.

	These checks may be skipped by defining F_MALLOC_OPTIMIZATIONS at compile time.

2015-01-14  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [1b4124d] :

	Fixes realated to previous commit (double siptrace)
	(cherry picked from commit d4e81886c41e17fe259ba2ee48d6b2ce3e7eb016)

2015-01-14  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [0c47186] :

	Fix double tracing in trace_dialog().
	If user AVPs are set and the trace flas is not, the code was forcing the tracing flag which was producing a duplicate of the trace. Now, the flags status (on/off) is also stored in the dialog (as var) and restore later, for each sequential request.

	(cherry picked from commit 24ba3ed467bebc1f029e5c0627225f8d54163143)

2015-01-14  Razvan Crainea  <razvan@opensips.org>
	* [bb7f121] :

	fix the vars db type to BLOB
	Indicate the DB engine that the dlg vars column is a BLOB
	Thanks go to John Nash for reporting this.
	Close #398

2015-01-13  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [b8611c1] :

	Fix handling dst_uri in cloned messages.
	Thanks to Liviu for pointing out - the dst_uri, after doing a fake msg (a copy from a shm cloned msg) had the wrong dst_uri linked (one in shm mem).

2015-01-12  Liviu Chircu  <liviu@opensips.org>
	* [93c7c55] :

	rest_client: add optional asynchronous capabilities to rest_get()
	rest_get() may now be used in an asynchronous manner, thanks to libcurl's
	multi interface. Its syntax is identical to its blocking counterpart.

	Scripting example:
	    async(rest_get("URL", "$var(res)"), my_resume_route);

2015-01-12  Liviu Chircu  <liviu@opensips.org>
	* [5487dcd] :

	tm: fix transaction cleanup in async scenarios
	The transaction state is now saved within and restored from each async
	operation. (in the _async_ctx struct)

	This prevents transaction leaks when stacking up multiple async jumps.

2015-01-12  Liviu Chircu  <liviu@opensips.org>
	* [b20ef80] :

	mem/mem.h: fix header includes

2015-01-12  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [2ada3bf] :

	Fixes realated to previous commit (double siptrace)
	(cherry picked from commit d4e81886c41e17fe259ba2ee48d6b2ce3e7eb016)

2015-01-12  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [37523de] :

	Fix double tracing in trace_dialog().
	If user AVPs are set and the trace flas is not, the code was forcing the tracing flag which was producing a duplicate of the trace. Now, the flags status (on/off) is also stored in the dialog (as var) and restore later, for each sequential request.

	(cherry picked from commit 24ba3ed467bebc1f029e5c0627225f8d54163143)

2015-01-12  Liviu Chircu  <liviu@opensips.org>
	* [604c781] :

	F_MALLOC: add extra safety checks at runtime
	The F_MALLOC allocator now properly reports any free() or realloc() operations
	which are performed on bogus memory regions, making OpenSIPS immediately abort.

	These checks may be skipped by defining F_MALLOC_OPTIMIZATIONS at compile time.

2015-01-12  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [74890a9] :

	Better description of handle_subscribe().

2015-01-12  Eric Tamme  <eric.tamme@onsip.com>
	* [f7a491d] :

	fix for RFC5245 15.1 <rel-addr> and <rel-port> MUST be present for server reflexive, peer, and relay candidates

2015-01-12  Liviu Chircu  <liviu@opensips.org>
	* [d49e0d3] :

	mem/mem.h: fix header includes

2015-01-12  Razvan Crainea  <razvan@opensips.org>
	* [4a0f61a] :

	fix gcc 4.9 warning about the _BSD_SOURCE usage

2015-01-12  Liviu Chircu  <liviu@opensips.org>
	* [fbc796e] :

	mem/mem.h: fix header includes

2015-01-12  Razvan Crainea  <razvan@opensips.org>
	* [7b30b2c] :

	modules: obsolete mi_xmlrpc, auth_diameter and closedial modules

2015-01-12  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [e0dd556] :

	Fixes realated to previous commit (double siptrace)
	(cherry picked from commit d4e81886c41e17fe259ba2ee48d6b2ce3e7eb016)

2015-01-12  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [6839a0a] :

	Fix double tracing in trace_dialog().
	If user AVPs are set and the trace flas is not, the code was forcing the tracing flag which was producing a duplicate of the trace. Now, the flags status (on/off) is also stored in the dialog (as var) and restore later, for each sequential request.

	(cherry picked from commit 24ba3ed467bebc1f029e5c0627225f8d54163143)

2015-01-12  ionutrazvanionita  <ionutionita@opensips.org>
	* [a65a763] :

	Updated module to adapt global contexts. Fixed failure route bug for callbacks

2015-01-12  ionutrazvanionita  <ionutionita@opensips.org>
	* [ffb8ce5] :

	added new flag: FL_TM_CB_REGISTERED telling that tm callbacks for this message have been registered

2015-01-12  ionutrazvanionita  <ionutionita@opensips.org>
	* [a9679e7] :

	return code bigger than 0 on script cbs means that you do not want to free the callback

2015-01-12  ionutrazvanionita  <ionutionita@opensips.org>
	* [3e10a39] :

	no context passed when 100 trying is sent\n

2015-01-12  Razvan Crainea  <razvan@opensips.org>
	* [afdcad5] :

	fix gcc 4.9 warning about the _BSD_SOURCE usage

2015-01-12  Liviu Chircu  <liviu@opensips.org>
	* [d62074e] :

	mem/mem.h: fix header includes

2015-01-12  Razvan Crainea  <razvan@opensips.org>
	* [00a7a89] :

	modules: obsolete mi_xmlrpc, auth_diameter and closedial modules

2015-01-12  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [2635284] :

	Fixes realated to previous commit (double siptrace)
	(cherry picked from commit d4e81886c41e17fe259ba2ee48d6b2ce3e7eb016)

2015-01-12  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [338700f] :

	Fix double tracing in trace_dialog().
	If user AVPs are set and the trace flas is not, the code was forcing the tracing flag which was producing a duplicate of the trace. Now, the flags status (on/off) is also stored in the dialog (as var) and restore later, for each sequential request.

	(cherry picked from commit 24ba3ed467bebc1f029e5c0627225f8d54163143)

2015-01-12  Razvan Crainea  <razvan@opensips.org>
	* [9e8ddd5] :

	add DEBUG_PARSER macro
	Define this macro if you want to debug the parser states

2015-01-09  ionutrazvanionita  <ionutionita@opensips.org>
	* [d6c14c2] :

	Updated module to adapt global contexts. Fixed failure route bug for callbacks

2015-01-09  ionutrazvanionita  <ionutionita@opensips.org>
	* [df30eca] :

	added new flag: FL_TM_CB_REGISTERED telling that tm callbacks for this message have been registered

2015-01-09  ionutrazvanionita  <ionutionita@opensips.org>
	* [cd34771] :

	return code bigger than 0 on script cbs means that you do not want to free the callback

2015-01-09  ionutrazvanionita  <ionutionita@opensips.org>
	* [c865747] :

	no context passed when 100 trying is sent\n

2015-01-08  Razvan Crainea  <razvan@opensips.org>
	* [c93bda0] :

	add DEBUG_PARSER macro
	Define this macro if you want to debug the parser states

2015-01-06  Liviu Chircu  <liviu@opensips.org>
	* [3593505] :

	F_MALLOC: add extra safety checks at runtime
	The F_MALLOC allocator now properly reports any free() or realloc() operations
	which are performed on bogus memory regions, making OpenSIPS immediately abort.

	These checks may be skipped by defining F_MALLOC_OPTIMIZATIONS at compile time.

2015-01-06  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [29a8f8d] :

	Better description of handle_subscribe().

2015-01-06  Bogdan Andrei IANCU  <bogdan@opensips.org>
	* [06309a1] :

	Merge pull request #264 from etamme/mediaproxy-rfc5245fix
	fix for RFC5245 15.1 compliant candidate injection

2014-12-30  Bogdan Andrei IANCU  <bogdan@opensips.org>
	* [3505ae4] :

	Merge pull request #400 from etamme/rtpengine_transport_fix
	added more rtp transports to match those available in rtpengine

2014-12-30  Eric Tamme  <eric.tamme@onsip.com>
	* [629c7e8] :

	added more rtp transports to match those available in rtpengine

2014-12-30  Damien Sandras  <dsandras@beip.be>
	* [8e95c58] :

	Fixed presentity naming.
	'Calling' is disturbing especially when the given peer is _receiving_ a
	call.

2014-12-30  Bogdan Andrei IANCU  <bogdan@opensips.org>
	* [0306824] :

	Merge pull request #397 from etamme/master
	added missing force-relay flag option for ICE

2014-12-23  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [0fa9f1d] :

	Fix missing context on fake replies -timer trigger

2014-12-22  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [5a5a3ad] :

	Fix bogus order in module exports

2014-12-19  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [abe8150] :

	Move RURI Q and BFLAGS into sip_msg.
	Drop the static global variables storing the Q value and bflags for the RURI and move them into sip_msg structure, along with dst_uri, send_socket, path, etc.
	Now, all the information about the first/default branch (the RURI) is kept in sip_msg.

2014-12-19  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [0740011] :

	Fix module export (missing async function array)

2014-12-19  Liviu Chircu  <liviu@opensips.org>
	* [4991aa0] :

	tm: properly initialize context buffers

2014-12-19  Liviu Chircu  <liviu@opensips.org>
	* [d60562d] :

	sip_msg context: completely removed
	Replaced by the current script processing context (commit 78c803566)

2014-12-19  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [f4b4457] :

	Fix order of param for async function

2014-12-19  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [1bbe2ef] :

	Merge branch 'async'
	Conflicts:
		Makefile
		context.h
		modules/dialog/dialog.c
		modules/dispatcher/README
		modules/dispatcher/doc/dispatcher_admin.xml
		modules/dispatcher/ds_fixups.c
		modules/exec/exec.c
		modules/exec/exec.h
		modules/exec/exec_mod.c
		modules/tm/t_ctx.c
		modules/tm/tm.c
		msg_translator.c

2014-12-19  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [e7a090f] :

	Add exec() with full async support.
	This is the first module function that uses the async support from core - in "sleeps" in async reactor until data in available (for stdout), allowing other tasks to be handled in the mean while by the process.

2014-12-19  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [51d76a9] :

	Rework the RR param buffering (use non-static vars)
	Keep in processing context the RR status (if done, if pending RR params, etc) -> this simplify the logic for detecting double RR (from script) and for adding RR param.
	Instead of buffering RR params (to wait for actual RR call) in a static buffer, add them directly as lumps in msg - lumps will be moved at RR time into the proper position.

2014-12-19  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [dd46ea0] :

	Converted dup shallow to ful dup (for lumps).
	Shallow duplicating for lump is not used any more, so the coresponding functions were either drop, either converting to full duplication (including the payload, for the ADD lumps).

2014-12-19  Razvan Crainea  <razvan@opensips.org>
	* [487e7b5] :

	add tcp_crlf_drop parameter
	Drops CRLF (\r\n) messages received over TCP.
	This prevents closing the TCP connection when an unhandled pining is sent.
	By default it is disabled.

2014-12-18  Eric Tamme  <eric.tamme@onsip.com>
	* [0cf6662] :

	added missing force-relay flag option for ICE

2014-12-18  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [0bfff25] :

	More on migration (if RR was done is in ctx now)

2014-12-18  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [d15847d] :

	Migrate from static holders to processing context

2014-12-18  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [313a515] :

	Migrated from static holders to processing context

2014-12-18  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [b7b161e] :

	Migrate static holders to processing context

2014-12-18  Razvan Crainea  <razvan@opensips.org>
	* [c4f47a3] :

	mc_compact: Contact header is mandatory

2014-12-17  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [b6b71df] :

	Remove static holders.

2014-12-17  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [6351bef] :

	Use processing context instead of static variables.
	Current_dlg, last_dst_leg, timeout moved into processing context, so their value will survive a async jump.

2014-12-16  Razvan Crainea  <razvan@opensips.org>
	* [2799f28] :

	rtpproxy: properly handle ipv6 IPs
	Close #394

2014-12-16  Liviu Chircu  <liviu@opensips.org>
	* [c7870bd] :

	dispatcher: fix several issues with empty destination sets
	Upon (re)load, a dispatching set may be empty if none of its destinations
	can be resolved. This patch fixes a couple of crashes which are directly
	related to empty destination sets:

	    * fix a bug in reindex_dests() where a single bogus destination
	      would be allocated for each empty set
	    * prevent ds_select_dst() from routing to empty sets

2014-12-15  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [aa48678] :

	Support for processing context for msgs and async

2014-12-15  Razvan Crainea  <razvan@opensips.org>
	* [eb8b8f1] :

	ds_is_in_list: properly pass -1 for all sets
	Related to #389

2014-12-15  Razvan Crainea  <razvan@opensips.org>
	* [6150e89] :

	tm: check if the reply transaction is defined
	closes #388

2014-12-12  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [ccada03] :

	Aligne to the latest changes in dialog module

2014-12-12  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [8aebd8b] :

	Migrate the dialog module to processing context.
	Instead of keeping data about the current processing into statis global variables, use the processing context.

	Warning: this is Alpha stage, maybe unstable at this moment

2014-12-12  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [73e0fed] :

	Rename the pointer to the current processing context.

2014-12-11  ionutrazvanionita  <ionutionita@opensips.org>
	* [f63dbbe] :

	mc_compact: Record-Route is now mandatory. Also Content-Type is mandatory only if Content-Length > 0

2014-12-10  Liviu Chircu  <liviu@opensips.org>
	* [afa8c78] :

	context operations: add extra safety checks

2014-12-10  Liviu Chircu  <liviu@opensips.org>
	* [78c8035] :

	core context code: add support for a global processing context
	The newly introduced CONTEXT_GLOBAL represents the current flow of
	script execution. It is a more uniform way of handling the majority
	of async script usage scenarios.

	The initial direction (by simply using CONTEXT_MSG) runs into too many
	problems:

	    * portions of code where the "current sip_msg" is unavailable
	    * concurrency issues (insufficient referencing) due to sip_msg cloning
	      logic in tm, which also clones the context, but fails to properly
	      count possible additional dialog references

	CONTEXT_MSG logic will be removed in a future commit.

2014-12-09  ionutrazvanionita  <ionutionita@opensips.org>
	* [b625c77] :

	no '\0' at the end of the message(-- instead of ++)

2014-12-09  ionutrazvanionita  <ionutionita@opensips.org>
	* [276b842] :

	no '\0' at the end of the message

2014-12-09  ionutrazvanionita  <ionutionita@opensips.org>
	* [70857e7] :

	compaction multiple \0 characters in the end fix

2014-12-05  ionutrazvanionita  <ionutionita@opensips.org>
	* [cf8253e] :

	fixed: mc_compress works with no argument

2014-12-05  Razvan Crainea  <razvan@opensips.org>
	* [99d7e7f] :

	Makefile: fix missing space in tls overwite test

2014-12-05  ionutrazvanionita  <ionutionita@opensips.org>
	* [8537890] :

	fixed compilation warning on convert_mime2string_CT

2014-11-28  Ovidiu Sas  <osas@voipembedded.com>
	* [46fe012] :

	dispatcher: README - avoid line split-over

2014-11-28  Ovidiu Sas  <osas@voipembedded.com>
	* [f15021d] :

	dispatcher: documentation clarifications

2014-11-28  Ovidiu Sas  <osas@voipembedded.com>
	* [e93a98b] :

	mi_xmlrpc_ng: set default path to "RPC2"  - closes #391

2014-11-28  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [7eaf122] :

	Added 2 stage update for UAS side of a transaction.
	The cloned UAS msg (from a transaction) can be now updated (new_uri, dst_uri, lumps, etc) after the orignal cloning. Also, a original cloning can be done without saving the updatable part of the UAS msg (like when you do t_newtran() in script, a partial UAS is cloned and full cloning (update) is done on t_relay() ) - this allows the transaction to remember all the changes you do between the creation of the transaction and the actual relay.

2014-11-28  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [27810d7] :

	Readme regenerated

2014-11-28  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [607f7a6] :

	Docs updated: added t_new request and t_add_hdrs
	(cherry picked from commit f4d8ded684a1f9050a000fa50d3b804deda2356a)

2014-11-28  ionutrazvanionita  <ionutionita@opensips.org>
	* [338b089] :

	removed unnecessary tm dependency

2014-11-28  ionutrazvanionita  <ionutionita@opensips.org>
	* [1986385] :

	Access multi-part body and Content-Type headers from script

2014-11-27  Sergey Khripchenko  <shripchenko@intermedia.net>
	* [f457334] :

	changed lb_disable_dst() to rize event if we disable destination from script and do logging if 'prob_verbose' is set

2014-11-26  ionutrazvanionita  <ionutionita@opensips.org>
	* [8364998] :

	Compression: fixed bug for mc_compact when body might contain '\0'. Fixed sdp body a=rtpmap: codec removal logic.

2014-11-25  ionutrazvanionita  <ionutionita@opensips.org>
	* [6cf6312] :

	Introducing compression module

2014-11-25  ionutrazvanionita  <ionutionita@opensips.org>
	* [e1d47be] :

	removed unnecessary code from tm. Modified script_cb callbacks. Modified msg_send from void* to sip_msg*

2014-11-25  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [acd36a4] :

	Add support for updatable cloned msg, phase one.
	Changeable parts of the cloned SIP requests may be separately allocated in shm mem (outside the single msg chunk) - later, these fields maybe updated (during transaction lifetime).

2014-11-25  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [ac1dcb0] :

	Just some spaces cleanup.

2014-11-25  Sergey Khripchenko  <shripchenko@intermedia.net>
	* [b7180d0] :

	correct logging levels from dev LM_ERR to production LM_DBG

2014-11-24  Sergey Khripchenko  <shripchenko@intermedia.net>
	* [f43a405] :

	next round of changes. cumulative commit: 1. get rid of load_balance() in favor of lb_*() family of functions to make the workflow more clear and defined:        lb_start() - strictly used to start LB session. if sessions already started, old session will be lost and re-started again.        lb_next() - strictly used to to continue LB session previousely started by lb_start().        lb_is_started() - used to check whenever LB session is already started or not.        lb_reset() - used to clean up LB session and everything LB internally does for this dialog.        ln_disable_dst() - mark destination currently choosen by LB in current active LB session as disabled.        lb_start_and_next() - is simply a shorthand for 'lb_is_started()?lb_next():lb_start()' to simplify scripting.                  this function logically almost the same as old load_balance() function,                  so we could leave old name for compatibility reasons.        lb_count_call() - manually register call as a load for particular resource(es).
	2. lb_start(..., alg) parameter changed to 'flags' parameter with possible values:
	      'r' - use relative versus absolute estimation
	      'n' - do not skip negative loads

	3. new module parameter 'probing_verbose' to log INFO message whenever we enable/disable destinations by probing/MI.

2014-11-24  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [cb4f0d8] :

	Do not run post script CBs if ASYNC suspend happened

2014-11-24  Razvan Crainea  <razvan@opensips.org>
	* [eb20beb] :

	fixed tm module merging error

2014-11-24  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [4812fb7] :

	Fixes realated to previous commit (double siptrace)
	(cherry picked from commit d4e81886c41e17fe259ba2ee48d6b2ce3e7eb016)

2014-11-24  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [fdf9d56] :

	Fix double tracing in trace_dialog().
	If user AVPs are set and the trace flas is not, the code was forcing the tracing flag which was producing a duplicate of the trace. Now, the flags status (on/off) is also stored in the dialog (as var) and restore later, for each sequential request.

	(cherry picked from commit 24ba3ed467bebc1f029e5c0627225f8d54163143)

2014-11-24  ionutrazvanionita  <ionutionita@opensips.org>
	* [000ff34] :

	fixed dispatcher error when not intro M delimiter

2014-11-24  ionutrazvanionita  <ionutionita@opensips.org>
	* [5d0d6e1] :

	ds_select_dst:null parameter fix

2014-11-24  ionutrazvanionita  <ionutionita@opensips.org>
	* [2d05bf8] :

	exec_sync: fork() error check

2014-11-24  ionutrazvanionita  <ionutionita@opensips.org>
	* [4e37881] :

	ds_select_dst flags specification modified

2014-11-24  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [58bf69b] :

	More fixing on mk_action usage (function name was added).

2014-11-24  ionutrazvanionita  <ionutionita@opensips.org>
	* [01a1bfe] :

	fix_nated_sdp: oldmediaip replaced with oldcip(c=) and oldoip(o=)

2014-11-24  Vlad Paiu  <vladpaiu@opensips.org>
	* [f8e4417] :

	Since the dialog timeout is not done under dialog lock, we might have cases where the state is checked and is established, but until we get to update the timer, the dialog transitions to terminated & removes it from the timer. Use marker that's set under d_timer lock in order to avoid this

2014-11-24  Vlad Paiu  <vladpaiu@opensips.org>
	* [1309063] :

	Only update the dialog timeout in case we are in established state - otherwise it might lead to multiple unrefs related to multiple removal from timer list (cherry picked from commit e515134cc1cd7fceafad60a620f5e77331de682e)

2014-11-24  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [5772e25] :

	Filename in script actions must be non-null.

2014-11-24  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [c222126] :

	Add end_sub_on_timeout module parameter.
	If a presence subscription should be automatically terminated (destroyed) when receiving a SIP timeout (408) for a sent NOTIFY requests.
	Closes feature request #380.

2014-11-24  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [f34d16c] :

	Disable MI commands when presence is in lib mode.
	Reported by Carlos Oliva @telematico, closing #382

	(cherry picked from commit 7058396dfff62769a58103517ae42bf57078b8bd)

2014-11-24  Liviu Chircu  <liviu@opensips.org>
	* [9e68b2d] :

	tm: export transaction context operations
	All transactions may now hold additional context-specific data.
	Data can be stored/fetched using the newly added functions in tm_binds.

2014-11-24  Liviu Chircu  <liviu@opensips.org>
	* [4230d18] :

	core: export sip_msg context operations
	All sip_msg structures may now hold additional data within a context.

2014-11-24  Liviu Chircu  <liviu@opensips.org>
	* [37f1556] :

	core: introducing OpenSIPS contexts
	A context is simply a data buffer. It can also be seen as a key-value
	database, where different pieces of code register certain keys, in order
	to maintain their values within each newly created context.

	Contexts may be attached to any structure. The primitives defined in
	"context.h" represent a generic way of registering/storing/fetching
	data.

2014-11-24  David Sanders  <dsanders11@ucsbalum.com>
	* [6d633c3] :

	Changes to stop keepalives on unregisters
	Observed cases where keepalives from `nat_traversal` continued after unregister were traced back to a few lines of code which prevented stopping keepalives on unregister events.

2014-11-24  ionutrazvanionita  <ionutionita@opensips.org>
	* [7bd7901] :

	fixed flags max_list bug for ds_select_*

2014-11-24  ionutrazvanionita  <ionutionita@opensips.org>
	* [768849a] :

	only generic function __popen3 left and put exec parameters in logical order:stdin, stdout, stderr

2014-11-24  ionutrazvanionita  <ionutionita@opensips.org>
	* [40ed05b] :

	modified documentation for exec function

2014-11-24  Ionut Ionita  <ionutrazvan.ionita@gmail.com>
	* [cc61084] :

	StartTLS Support For LDAP Module

2014-11-24  Saúl Ibarra Corretgé  <saghul@gmail.com>
	* [e555869] :

	tls: add TLSAny alias for SSLv23 method

2014-11-24  Saúl Ibarra Corretgé  <saghul@gmail.com>
	* [8862867] :

	tls: removed SSLv2 and SSLv3 support

2014-11-24  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [50623c1] :

	Run POST script CBs after all ASYNC resumes.

2014-11-24  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [4b9b183] :

	Improved loging when timer jobs overlap.

2014-11-21  ionutrazvanionita  <ionutionita@opensips.org>
	* [700d326] :

	Stateful and stateless callbacks just before sending the message. One more parameter to msg_send

2014-11-21  ionutrazvanionita  <ionutionita@opensips.org>
	* [b3beb20] :

	fixed dispatcher error when not intro M delimiter

2014-11-18  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [12ff6f3] :

	Final-1 step in adding script async support.
	Fix module interface for async resume function (msg is needed).
	Fix mod_fixup for async function.
	Add "resume" route triggering after a complete async handling
	Add multi-step async reading (multiple triggering in reactor before finishing the I/O)

	NOTE: this is a first working version of the async support (still some things needs to be addressed)

2014-11-17  ionutrazvanionita  <ionutionita@opensips.org>
	* [e6b20b1] :

	ds_select_dst:null parameter fix

2014-11-17  ionutrazvanionita  <ionutionita@opensips.org>
	* [eda84f7] :

	exec_sync: fork() error check

2014-11-17  ionutrazvanionita  <ionutionita@opensips.org>
	* [818cebc] :

	ds_select_dst flags specification modified

2014-11-05  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [06ade00] :

	More fixing on mk_action usage (function name was added).

2014-11-05  ionutrazvanionita  <ionutionita@opensips.org>
	* [11e3f7a] :

	Merge branch 'master' of https://github.com/OpenSIPS/opensips

2014-11-05  ionutrazvanionita  <ionutionita@opensips.org>
	* [a5900b5] :

	fix_nated_sdp: oldmediaip replaced with oldcip(c=) and oldoip(o=)

2014-11-05  Vlad Paiu  <vladpaiu@opensips.org>
	* [721e4af] :

	Since the dialog timeout is not done under dialog lock, we might have cases where the state is checked and is established, but until we get to update the timer, the dialog transitions to terminated & removes it from the timer. Use marker that's set under d_timer lock in order to avoid this

2014-11-05  Vlad Paiu  <vladpaiu@opensips.org>
	* [923f243] :

	Only update the dialog timeout in case we are in established state - otherwise it might lead to multiple unrefs related to multiple removal from timer list (cherry picked from commit e515134cc1cd7fceafad60a620f5e77331de682e)

2014-11-05  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [0607b90] :

	Filename in script actions must be non-null.

2014-11-05  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [7aa96b2] :

	Add end_sub_on_timeout module parameter.
	If a presence subscription should be automatically terminated (destroyed) when receiving a SIP timeout (408) for a sent NOTIFY requests.
	Closes feature request #380.

2014-11-05  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [1cf7484] :

	Disable MI commands when presence is in lib mode.
	Reported by Carlos Oliva @telematico, closing #382

	(cherry picked from commit 7058396dfff62769a58103517ae42bf57078b8bd)

2014-11-05  Liviu Chircu  <liviu@opensips.org>
	* [eb5bb0f] :

	tm: export transaction context operations
	All transactions may now hold additional context-specific data.
	Data can be stored/fetched using the newly added functions in tm_binds.

2014-11-05  Liviu Chircu  <liviu@opensips.org>
	* [3a6f613] :

	core: export sip_msg context operations
	All sip_msg structures may now hold additional data within a context.

2014-11-05  Liviu Chircu  <liviu@opensips.org>
	* [b942bef] :

	core: introducing OpenSIPS contexts
	A context is simply a data buffer. It can also be seen as a key-value
	database, where different pieces of code register certain keys, in order
	to maintain their values within each newly created context.

	Contexts may be attached to any structure. The primitives defined in
	"context.h" represent a generic way of registering/storing/fetching
	data.

2014-11-05  David Sanders  <dsanders11@ucsbalum.com>
	* [4c9a1fa] :

	Changes to stop keepalives on unregisters
	Observed cases where keepalives from `nat_traversal` continued after unregister were traced back to a few lines of code which prevented stopping keepalives on unregister events.

2014-11-04  ionutrazvanionita  <ionutionita@opensips.org>
	* [b994ddf] :

	fixed flags max_list bug for ds_select_*

2014-11-04  ionutrazvanionita  <ionutionita@opensips.org>
	* [5ade2ad] :

	fixed flags max_list bug for ds_select_*

2014-11-02  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [d411b46] :

	Add proper triggering of Async funcs from script.

2014-10-30  ionutrazvanionita  <ionutionita@opensips.org>
	* [bc9bef2] :

	only generic function __popen3 left and put exec parameters in logical order:stdin, stdout, stderr

2014-10-30  ionutrazvanionita  <ionutionita@opensips.org>
	* [9ef1be7] :

	Merge branch 'master' of https://github.com/OpenSIPS/opensips

2014-10-30  ionutrazvanionita  <ionutionita@opensips.org>
	* [4573f88] :

	modified documentation for exec function

2014-10-30  Ionut Ionita  <ionutrazvan.ionita@gmail.com>
	* [023eb45] :

	added exec(cmd,output,input,error,avpenv) function for exec

2014-10-30  Ezequiel Lovelle  <ezequiellovelle@gmail.com>
	* [dd1ea2f] :

	fix load_balancer doc in lb_count_call() function

2014-10-30  Ezequiel Lovelle  <ezequiellovelle@gmail.com>
	* [2d093ac] :

	add newline at the end of error messages

2014-10-30  Saúl Ibarra Corretgé  <saghul@gmail.com>
	* [134a34b] :

	tls: add TLSAny alias for SSLv23 method

2014-10-30  Razvan Crainea  <razvan@opensips.org>
	* [465acb6] :

	Makefile: do not overwrite TLS certificates
	Closes #368

2014-10-30  Razvan Crainea  <razvan@opensips.org>
	* [01bce3f] :

	opensipsctl: properly enclose strings when checking their values

2014-10-30  Razvan Crainea  <razvan@opensips.org>
	* [010f4f2] :

	lexer: allow multiple scriptvar parameters
	Fixes #361

2014-10-30  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [7047b95] :

	Fix silo table definition - body field can be null.

2014-10-30  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [e38a24c] :

	Fix restoring route type and AVP list when droping branch.
	Closes #365.

	(cherry picked from commit 9e033465cb2328dd10b6e0ac0d09bf92136dfd33)

2014-10-30  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [fd186a2] :

	Fix bogus unsigned to signed int conversion.
	This leads to failures of computing VIA branches when hash label is higer than 2^31

	(cherry picked from commit 2759890fcf41c1af1237206a0f97957cca1f635c)

2014-10-30  Saúl Ibarra Corretgé  <saghul@gmail.com>
	* [c99a62b] :

	tls: removed SSLv2 and SSLv3 support

2014-10-30  Saúl Ibarra Corretgé  <saghul@gmail.com>
	* [0903bd6] :

	tls: removed code to support OpenSSL <= 0.9.7

2014-10-30  Liviu Chircu  <liviu@opensips.org>
	* [a2494eb] :

	opensipsctl: fix compatibility issues with FreeBSD
		* FreeBSD's mkfifo only accepts "-m", not "--mode"
		* Improve compatibility of stderr redirect (change "&>" to ">&")

	Reported by buchtajz.
	Closes #364

2014-10-28  Ionut Ionita  <ionutrazvan.ionita@gmail.com>
	* [0b61cba] :

	StartTLS Support For LDAP Module

2014-10-28  Ionut Ionita  <ionutrazvan.ionita@gmail.com>
	* [bebc548] :

	Merge pull request #375 from ionutrazvanionita/master
	added exec(cmd,output,input,error,avpenv) function for exec

2014-10-28  Ionut Ionita  <ionutrazvan.ionita@gmail.com>
	* [3c2947e] :

	added exec(cmd,output,input,error,avpenv) function for exec

2014-10-24  Răzvan Crainea  <razvan@opensips.org>
	* [80778fa] :

	Merge pull request #371 from lovelle/patch-2
	fix load_balancer doc in lb_count_call() function

2014-10-24  Răzvan Crainea  <razvan@opensips.org>
	* [5f77710] :

	Merge pull request #370 from lovelle/patch-1
	add newline at the end of error messages

2014-10-23  Ezequiel Lovelle  <ezequiellovelle@gmail.com>
	* [383687a] :

	fix load_balancer doc in lb_count_call() function

2014-10-23  Ezequiel Lovelle  <ezequiellovelle@gmail.com>
	* [4c20604] :

	add newline at the end of error messages

2014-10-23  Răzvan Crainea  <razvan@opensips.org>
	* [801b4a9] :

	Merge pull request #367 from saghul/crypto_fixes
	TLS: remove support for SSLv2 and SSLv3

2014-10-23  Saúl Ibarra Corretgé  <saghul@gmail.com>
	* [ea2a5c9] :

	tls: add TLSAny alias for SSLv23 method

2014-10-23  Razvan Crainea  <razvan@opensips.org>
	* [a9d7dd8] :

	Makefile: do not overwrite TLS certificates
	Closes #368

2014-10-23  Razvan Crainea  <razvan@opensips.org>
	* [711fa8c] :

	opensipsctl: properly enclose strings when checking their values

2014-10-22  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [64bc0c8] :

	Update module interface to add async cmds.

2014-10-22  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [9b9a047] :

	Add cfg support for async cmd triggering.

2014-10-22  Razvan Crainea  <razvan@opensips.org>
	* [589cdf6] :

	lexer: allow multiple scriptvar parameters
	Fixes #361

2014-10-22  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [e02a004] :

	Fix silo table definition - body field can be null.

2014-10-22  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [ec7926d] :

	Fix restoring route type and AVP list when droping branch.
	Closes #365.

	(cherry picked from commit 9e033465cb2328dd10b6e0ac0d09bf92136dfd33)

2014-10-21  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [0742c74] :

	Fix bogus unsigned to signed int conversion.
	This leads to failures of computing VIA branches when hash label is higer than 2^31

	(cherry picked from commit 2759890fcf41c1af1237206a0f97957cca1f635c)

2014-10-21  Saúl Ibarra Corretgé  <saghul@gmail.com>
	* [4c56d98] :

	tls: removed SSLv2 and SSLv3 support

2014-10-21  Saúl Ibarra Corretgé  <saghul@gmail.com>
	* [06f9025] :

	tls: removed code to support OpenSSL <= 0.9.7

2014-10-17  Liviu Chircu  <liviu@opensips.org>
	* [a479b72] :

	opensipsctl: fix compatibility issues with FreeBSD
		* FreeBSD's mkfifo only accepts "-m", not "--mode"
		* Improve compatibility of stderr redirect (change "&>" to ">&")

	Reported by buchtajz.
	Closes #364

2014-10-17  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [55ecd24] :

	More async definition (module export related).

2014-10-17  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [0a9f00a] :

	Added async related definitions.
	- aysnc holder for resume action
	- async script function

2014-10-16  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [c0754e6] :

	TM exports async related handlers to core.

2014-10-16  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [bc94423] :

	Include script async events into reactor.

2014-10-15  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [8052c80] :

	Add definition of the async handler.

2014-10-15  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [9303744] :

	Update the timer handler registration (with flags)

2014-10-15  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [35a14b1] :

	Enhance timer behaviour on delay.
	Three modes are available if the timer triggering (for same handler) overlap:
		- force overlaping
		- delay until prev execution is done
		- skip current triggering
	Added flags when timer handlers are registered

2014-10-15  Liviu Chircu  <liviu@opensips.org>
	* [683dfaa] :

	db_unixodbc: fix query result handling and improve performance
	Until now, query rows were incrementally stored in a list with
	separately allocated length and string buffers, along with a great deal
	of useless pointer dereferencing, effectively wasting CPU cycles and pkg
	mem usage.

	This patch eliminates the linked list logic with a global buffer of
	pointers (doubling in size when required) meant to hold each result column.
	Each column is transparently freed by the DB backend. This completes
	commit d63ee19a8.

2014-10-15  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [8054dbf] :

	Compatibility fix for add_body() with new body.
	When computing the new content-len, accept the case when there is no pre-existing body and a newly added body.
	Reported by Antonis Psaras via LinkedIn

2014-10-14  Ovidiu Sas  <osas@voipembedded.com>
	* [aee169e] :

	dispatcher: fix multilist selection when one set might be out of active destinations

2014-10-14  Ovidiu Sas  <osas@voipembedded.com>
	* [2cffa32] :

	drouting: safe ptr -> string conversion

2014-10-14  Ovidiu Sas  <osas@voipembedded.com>
	* [86132b6] :

	dispatcher: safe ptr -> string conversion

2014-10-14  Ovidiu Sas  <osas@voipembedded.com>
	* [94c78d6] :

	ut.h: define constants for str/strings holding pointers

2014-10-14  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [5b95983] :

	Devel version increased from 2.1.0 to 2.1.1

2014-10-14  Razvan Crainea  <razvan@opensips.org>
	* [56ca96a] :

	fix rr force_send_socket when using mhomed

2014-10-10  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [266712b] :

	Create fraud_detection table as extra table.

2014-10-10  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [1360530] :

	Updating some DB related things

2014-10-10  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [13a4348] :

	Remove useless file

2014-10-10  Bogdan Andrei IANCU  <bogdan@opensips.org>
	* [03effa2] :

	Merge pull request #350 from andrei-datcu/fraud_detection
	Importing the "Fraud detection" module

2014-10-09  Vlad Paiu  <vladpaiu@opensips.org>
	* [b7928cf] :

	Do profile freeing under lock - avoid double free issues

2014-10-09  Bogdan Andrei IANCU  <bogdan@opensips.org>
	* [5ef838d] :

	Merge pull request #357 from ionutrazvanionita/master
	fixed dispatcher failover when max results not specified

2014-10-09  Ionut Ionita  <ionutrazvan.ionita@gmail.com>
	* [1844539] :

	fixed dispatcher failover when max results not specified

2014-10-09  Razvan Crainea  <razvan@opensips.org>
	* [5ee8ec5] :

	fix redis FQDN URL when using a single node cluster

2014-10-08  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [1972d39] :

	Fix default timeout for CPL PROXY node.

2014-10-08  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [ae84ff0] :

	Fix escaping of XML chars in the MI output.
	Credits go to Razvan.

2014-10-08  Bogdan Andrei IANCU  <bogdan@opensips.org>
	* [7717c86] :

	Merge pull request #351 from wdoekes/wjd-dialog-modparam-columns
	dialog: Fix dialog_admin documentation regarding column names.

2014-10-08  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [f647e34] :

	Fix setting proxy timeout from CPL script.
	Reported by sekil on IRC.

2014-10-08  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [8762c5e] :

	Remove useless ops with the AVP list.

2014-10-08  Walter Doekes  <walter+github@wjd.nu>
	* [b519d69] :

	dialog: Fix dialog_admin documentation regarding column names.

2014-10-08  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [c95ddd8] :

	Fix validation of the send_sock in t_uac().
	If a send_sock is already provided, no need to do socket discovery again. We need just the protocol (from mk_proxy) in order to validate (or not) the already given send_sock. Do socket discovery only if there no send_sock given or the protocol does not match.

2014-10-06  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [61c64e7] :

	Fix queued inserts with new timer implementation

2014-10-06  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [6679918] :

	Fix how the contact URI is build.
	Do not add transport info to URI when storing it, but rather when using it - avoid double "transport" param.

	(cherry picked from commit bef1f938b8e6479b563c1164e0110c76753b7b02)

2014-10-06  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [a0328bc] :

	Update DB conn usage in TIMER process(es).
	As the timer handler are not run any more in the TIMER process (which does only triggering), but in the worker processes, we need to update the child_init() to open the DB conns required by timer handlers in the worker processes and not in the TIMER proc.

2014-10-06  Razvan Crainea  <razvan@opensips.org>
	* [1572ed0] :

	fix aliases db schema

2014-10-03  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [15c36b3] :

	Fix DB init in child procs (time change related)

2014-10-03  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [8dc65a7] :

	Missing init added.

2014-10-03  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [4e2bf86] :

	Fix bogus undefined external variable.

2014-10-03  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [69f5cd9] :

	Version increased from 1.12 to 2.1 for MASTER

2014-10-03  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [caabbe5] :

	Removed the concept of timer routine per process.
	This makes nosense now as the timer routines are dispatched across all the worker processes.

2014-10-03  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [cca99b6] :

	Reactors have names, easier for debugging purposes.

2014-10-03  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [6d7e826] :

	Timer system must be init after daemonize !!

2014-10-03  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [68a04d0] :

	Add generic reactor support for the TCP processes.
	"extra_loop" instruction can be forced in reactor to be executed in the loop;
	TCP procs code migrated to the generic reactor;
	FD del functions added to the reactor;
	Timer jobs now also handled by the TCP processes;

2014-10-03  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [4c5e6ea] :

	Timer jobs are dispached via reactor to all workers.
	Instead of running the timer jobs in dedicated timer processes, now we simply dispatche the jobs to all SIP workers processes.
	Still need some working on priorities.
	TCP workers still not running the "SIP worker" reactor, so no timer jobs in these processes for the moment.

2014-10-03  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [7edce06] :

	Introducing I/O reactor in UDP listeners

2014-10-03  Ovidiu Sas  <osas@voipembedded.com>
	* [9e2a616] :

	core: fix forced sync event handling in event_route

2014-10-03  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [465a978] :

	Fix parsing of the SIP URI in db_get_auth_id() .
	Closes #340.

2014-10-03  Vlad Paiu  <vladpaiu@opensips.org>
	* [aec1260] :

	Fixed arrays processing ( arrays can be part of arrays or object ) Fixed processing of sub-objects

2014-10-03  Răzvan Crainea  <razvan@opensips.org>
	* [00f720e] :

	Merge pull request #347 from ionutrazvanionita/master
	Event route handling way declaration without quotes

2014-10-03  Bogdan Andrei IANCU  <bogdan@opensips.org>
	* [e13ab39] :

	Merge pull request #346 from dsanders11/patch-1
	Always update the call ID when updating a contact in usrloc table

2014-10-02  Ionut Ionita  <ionutrazvan.ionita@gmail.com>
	* [e6af6f9] :

	event_route doc: declare event_route handling way without quotes

2014-10-02  David Sanders  <dsanders11@ucsbalum.com>
	* [26a31e0] :

	usrloc: Always update the call ID when updating a contact

2014-10-01  Liviu Chircu  <liviu@opensips.org>
	* [bd46517] :

	exec: reduce impact of the Shellshock bash exploit
		* by default, do not set any environment vars for exec commands
		* improve documentation awareness for Shellshock

2014-10-01  Ionut Ionita  <ionutrazvan.ionita@gmail.com>
	* [30c92bd] :

	changed sync/async to sync/async in route_event config script declaration

2014-10-01  shripchenko  <shripchenko@intermedia.net>
	* [5986074] :

	introduced two more algorithms for load_balance() that the same as existing, but do not ignore resources with negative availability, and thus able to select for load balancing destinations with exceeded capacity. this might be needed in scenarios where we want to limit generic calls volume and always pass important/high-priority calls.

2014-10-01  Răzvan Crainea  <razvan@opensips.org>
	* [0b0af49] :

	Merge pull request #344 from ionutrazvanionita/master
	Event route fixed '\0' bug and updated documentation

2014-10-01  shripchenko  <shripchenko@intermedia.net>
	* [cd0ac14] :

	changed lb_count_call(ip,port,grp,resources[,mode]) function to allow one parameter that trigger whenever this function will actually 'count' call (add LB profiles) or 'un-count' call (clean up things after convential lb_count_call() call)
	this might be needed if we count call for particular resources and then need to un-count it.

2014-10-01  Ionut Ionita  <ionutrazvan.ionita@gmail.com>
	* [115522b] :

	fixed '\0' bug when getting event name from socket

2014-10-01  shripchenko  <shripchenko@intermedia.net>
	* [301e6d3] :

	add lb_reset() function to reset LB state in case you want to stop load-ballancing call and proxy call somewere else and clean LB usage (dialog profiles) for this call. (or re-start LB process from the beginning)

2014-10-01  Liviu Chircu  <liviu@opensips.org>
	* [e5ccde1] :

	cachedb_sql: fix pkg memory leak
	When fetching a key, the db_res_t structure would not be properly freed.

2014-10-01  shripchenko  <shripchenko@intermedia.net>
	* [a7549e0] :

	changed load_ballance() function to 1. save profiles applied in the current iteration 2. process previous iteration's profiles to clean them up 3. allow group and/or resources list changes in subsequent calls 4. sanity check if dst_bitmap size chaged

2014-10-01  Ionut Ionita  <ionutrazvan.ionita@gmail.com>
	* [d5b1a8c] :

	updated documentation for event_route event handling method

2014-10-01  Răzvan Crainea  <razvan@opensips.org>
	* [c4724b6] :

	Merge pull request #343 from ionutrazvanionita/master
	Dialog events and sync/async support in event_route

2014-10-01  Ionut Ionita  <ionutrazvan.ionita@gmail.com>
	* [e3d37f4] :

	added in script sync/async support for event_route

2014-10-01  Ionut Ionita  <ionutrazvan.ionita@gmail.com>
	* [10083ed] :

	added E_DLG_STATE_CHANGED event for dialog module

2014-09-30  Liviu Chircu  <liviu@opensips.org>
	* [caec1a5] :

	new string transformations: s.fill.left / s.fill.right
	Fills a string with a char/string until the given final length is reached.
	The initial string is returned if its length is greater or equal to the
	given final length.

	Examples:

	$var(in) = "485"; (also works for integer PVs)

		* $(var(in){s.fill.left, 0, 6})    => 000485
		* $(var(in){s.fill.left, abc, 8})  => bcabc485
		* $(var(in){s.fill.right, 0, 6})   => 485000
		* $(var(in){s.fill.right, abc, 8}) => 485abcab

2014-09-29  Andrei Datcu  <datcuandrei@gmail.com>
	* [f8a72e8] :

	[fraud_detection] Added doc and schema

2014-09-29  Liviu Chircu  <liviu@opensips.org>
	* [01c61de] :

	dispatcher: update doc

2014-09-29  Liviu Chircu  <liviu@opensips.org>
	* [e7bccda] :

	dispatcher: ds_is_in_list() - allow non-PV params

2014-09-25  Norm Brandinger  <n.brandinger@gmail.com>
	* [b8d86c6] :

	Fix spelling

2014-09-24  Andrei Datcu  <datcuandrei@gmail.com>
	* [57740d7] :

	[fraud_detection] Mi reload command fully working

2014-09-24  Andrei Datcu  <datcuandrei@gmail.com>
	* [751aa72] :

	[fraud_detection] Added show stats mi command

2014-09-24  Liviu Chircu  <liviu@opensips.org>
	* [48cf32f] :

	opensipsctl: complete commit d205f017
	- additional dir existence test

2014-09-24  Liviu Chircu  <liviu@opensips.org>
	* [d205f01] :

	opensipsctl: Improve error reporting
	- test READ permission for fifo dir
	- test existence of fifo
	- test WRITE permission for fifo

2014-09-23  Andrei Datcu  <datcuandrei@gmail.com>
	* [24d2158] :

	[fraud_detection]Manually alloc event param list, to avoid automatic freeing and memory corruption

2014-09-23  Răzvan Crainea  <razvan@opensips.org>
	* [af23b15] :

	Merge pull request #338 from andrei-datcu/dr_api
	dynamic routing api 

2014-09-23  Andrei Datcu  <datcuandrei@gmail.com>
	* [3cd4c2c] :

	[fraud_detection] Added events for sync params

2014-09-17  Andrei Datcu  <datcuandrei@gmail.com>
	* [1da3cb1] :

	[dr_api] dr_head freeing is now done without freeing the time_rec field of each rule

2014-09-17  Andrei Datcu  <datcuandrei@gmail.com>
	* [a7471f4] :

	Fixed user hashmap struct

2014-09-17  Liviu Chircu  <liviu@opensips.org>
	* [32f2c24] :

	cachedb_memcached: extend the host+port printing buffer

2014-09-16  Ovidiu Sas  <osas@voipembedded.com>
	* [2b1ccf3] :

	usrloc: E_UL_CONTACT_* events documentation updates

2014-09-16  Vlad Paiu  <vladpaiu@opensips.org>
	* [02453de] :

	Added th_passed_contact_uri_params along with th_passed_contact_params  - to be used when needing to pass Contact URI params or Contact header params from one side to the other when doing topology hiding

2014-09-16  Bogdan Andrei IANCU  <bogdan@opensips.org>
	* [1043900] :

	Merge pull request #336 from andrei-datcu/usrloc_events
	[usrloc] Added AOR parameter for E_UL_CONTACT_* events

2014-09-16  Andrei Datcu  <datcuandrei@gmail.com>
	* [e4a10ed] :

	[usrloc] Added AOR parameter for E_UL_CONTACT_* events

2014-09-16  Andrei Datcu  <datcuandrei@gmail.com>
	* [e49090f] :

	Fraud detection - first version - untested yet

2014-09-11  Liviu Chircu  <liviu@opensips.org>
	* [2ff79d9] :

	dialplan DB schema: complete commit e7502169

2014-09-11  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [6a9cb00] :

	Removed useless "ping_interval" parameter.
	Closes  #320, reported by @hydrosine .

	(cherry picked from commit c529bb142b455a0db87c9661208e9271f912a4ec)

2014-09-11  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [307c173] :

	Fix setting transaction timeout from CPL script.
	Using AVPs in obsolete; we need to do it now via the TM API.

2014-09-11  Razvan Crainea  <razvan@opensips.org>
	* [4cf5a16] :

	redis: fix crash when using FQDN in URL

2014-09-09  Andrei Datcu  <datcuandrei@gmail.com>
	* [5e87d43] :

	Matched prefix's length available through match_number function

2014-09-07  Vlad Paiu  <vladpaiu@opensips.org>
	* [a166313] :

	Fixed the dialog timeout that gets replicated via BIN for updates (cherry picked from commit 4c08b62cdabb3549ac99c4dc9cae8485d1f40e68)

2014-09-05  Andrei Datcu  <datcuandrei@gmail.com>
	* [8d497dc] :

	[fraud_detection] Backend is now functional

2014-09-04  Andrei Datcu  <datcuandrei@gmail.com>
	* [aa1fdf1] :

	[drouting] dr_api: match_number returns rt_info_t

2014-09-04  Andrei Datcu  <datcuandrei@gmail.com>
	* [4ddf3a1] :

	[fraud_detection] DB loading working ok

2014-09-04  Andrei Datcu  <datcuandrei@gmail.com>
	* [e76c25d] :

	Added modparams

2014-09-04  Andrei Datcu  <datcuandrei@gmail.com>
	* [e86815a] :

	[fraud_detection] HashMap created

2014-09-04  Andrei Datcu  <datcuandrei@gmail.com>
	* [82e6e1c] :

	[drouting] dr_api removed unnecessary label

2014-09-04  Liviu Chircu  <liviu@opensips.org>
	* [f6685a5] :

	dialplan: do not start if a partition fails to initialize

2014-09-04  Andrei Datcu  <datcuandrei@gmail.com>
	* [f0c2bf7] :

	[drouting] Fixed api leak and added rule_id as parameter when adding rule. No more internal lock per partition

2014-09-04  Andrei Datcu  <datcuandrei@gmail.com>
	* [3aadea7] :

	dr-api removed unnecessary lock when deleting partition

2014-09-04  Andrei Datcu  <datcuandrei@gmail.com>
	* [7cb83e8] :

	Exported load_dr function for loading dr_api

2014-09-04  Andrei Datcu  <datcuandrei@gmail.com>
	* [a400113] :

	drouting api implementation done

2014-09-04  Andrei Datcu  <datcuandrei@gmail.com>
	* [8fb0996] :

	First dr_api draft

2014-09-04  Liviu Chircu  <liviu@opensips.org>
	* [24724fd] :

	regenerate SQL scripts

2014-09-04  Liviu Chircu  <liviu@opensips.org>
	* [e750216] :

	dialplan: db schema update
		* new dialplan table version : 5
		* new dialplan column : timerec

2014-09-04  Liviu Chircu  <liviu@opensips.org>
	* [6f8e32d] :

	Merge pull request #319 from Parantido/master
	dialplan: add possibility of time recurrence based rule enabling (RFC 2445 compatible strings)

2014-09-03  Parantido Julius De Rica  <parantido@techfusion.it>
	* [263151c] :

	Fixed rule->parsed_timerec memory allocation leak

2014-09-02  Parantido Julius De Rica  <parantido@techfusion.it>
	* [3079aa1] :

	Fixed shared memory issue due to parsed_timerec data structure.

2014-09-01  Parantido Julius De Rica  <parantido@techfusion.it>
	* [bb9a057] :

	Fixed timerec_parsed memory leak problem on new clean pull request.

2014-09-01  Parantido Julius De Rica  <parantido@techfusion.it>
	* [92647be] :

	Fixed timerec_parsed memory leak problem.

2014-09-01  Parantido Julius De Rica  <parantido@techfusion.it>
	* [e71485f] :

	- A new column (named timerec varchar 255 not nullable) in dialplan database schema is needed. - TimeRec value should be compliant to RFC2445 (Internet Calendaring and Scheduling - Core Object Specification) standards in order to match. - A timerec failed match doesn't stops dialplan rule searching. - An empty timerec value is not evaluated in rule matching algorithm. - Attached patch should to be applied to Dialplan Module rev.5895 (actual master).

2014-09-01  Parantido De Rica  <Parantido@users.noreply.github.com>
	* [5e59cb5] :

	Merge pull request #1 from OpenSIPS/master
	Dialplan Features/Patch Backport

2014-09-01  Vlad Paiu  <vladpaiu@opensips.org>
	* [07f9a58] :

	Added EVENT_ROUTE in $rT output

2014-09-01  vladpaiu  <vladpaiu@opensips.org>
	* [ff17849] :

	Merge pull request #316 from dsanders11/master
	New PV which holds the current route type

2014-08-30  Liviu Chircu  <liviu@opensips.org>
	* [1334ca3] :

	lua, perl: fix compilation issues (from commit dcc07b4c)

2014-08-29  Vlad Paiu  <vladpaiu@opensips.org>
	* [9f3b148] :

	Fixed CDR writing for replicated dialogs (cherry picked from commit 128d3777f4a11a21eabb3e94a720c223bf0cf654)

2014-08-29  Vlad Paiu  <vladpaiu@opensips.org>
	* [b0cd70a] :

	Fixed deadlock when calling dr_number_routing Added the matched prefix to the output of the dr_number_routing MI func

2014-08-28  David Sanders  <dsanders11@ucsbalum.com>
	* [7a520c6] :

	New  PV which holds the current route type

2014-08-28  Vlad Paiu  <vladpaiu@opensips.org>
	* [ec018a2] :

	Avoid useless from header parsing in case the dr group was passed from script

2014-08-26  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [3cd6db2] :

	Fix sending PRACK for multiple provisional replies.
	Reported by Giuseppe Cardone.

2014-08-26  Liviu Chircu  <liviu@opensips.org>
	* [603f4dc] :

	dialplan: fix incorrect ERROR on shutdown

2014-08-26  Liviu Chircu  <liviu@opensips.org>
	* [a2172b2] :

	db_text: fix issues when database file is missing an ending newline
	* do not crash if file contains columns only and is missing the ending newline
	* do not skip the last row of a database file if it lacks an ending newline

	Reported by gergelypeli on GitHub
	Closes issue #308

2014-08-26  Liviu Chircu  <liviu@opensips.org>
	* [23bb7c6] :

	Merge pull request #313 from dsanders11/master
	New assert script keyword for script debugging

2014-08-26  David Sanders  <dsanders11@ucsbalum.com>
	* [877d6b9] :

	New assert script keyword for script debugging

2014-08-25  Vlad Paiu  <vladpaiu@opensips.org>
	* [6dea2eb] :

	Updated License

2014-08-25  Vlad Paiu  <vladpaiu@opensips.org>
	* [fc2ed8a] :

	Added missing auth.h file

2014-08-25  Vlad Paiu  <vladpaiu@opensips.org>
	* [7989c4f] :

	Added support for increasing CSEQ number when doing remote SIP auth via uac_auth()

2014-08-25  Vlad Paiu  <vladpaiu@opensips.org>
	* [3316a2a] :

	Fixed simplified callid parser

2014-08-25  Liviu Chircu  <liviu@opensips.org>
	* [fc944ea] :

	dialplan: prevent memory corruption when parsing db_url
	Properly allocate and use the required memory to hold the string

2014-08-25  Liviu Chircu  <liviu@opensips.org>
	* [b5ad64d] :

	dialplan: prevent memory corruption when DB backend fails to start
	Fix a couple of incorrect free operations

2014-08-24  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [e0dcd97] :

	Fix missing "p" state to MI ds_set_state command.
	Closes #312
	Reported by @gergelypeli

2014-08-24  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [dcc07b4] :

	Report the cfg filename in all cfg related errors.
	Fixes #299.

2014-08-24  Bogdan Andrei IANCU  <bogdan@opensips.org>
	* [83626bc] :

	Merge pull request #305 from wdoekes/wjd-msg_trans_no_via-no_crash
	msg_translator: Passing MSG_TRANS_NOVIA_FLAG means don't touch Via.

2014-08-22  Liviu Chircu  <liviu@opensips.org>
	* [ab7f422] :

	Merge pull request #294 from tallicamike/feature-sipmsgvalidate-for-tofrom
	sipmsgops: Additional "f", "t" and "c" flags for sipmsg_validate() which check To, From and Contact header integrity

2014-08-21  Ovidiu Sas  <osas@voipembedded.com>
	* [e2f1969] :

	drouting: fix warning: "current_partition" may be used uninitialized in this function

2014-08-21  Liviu Chircu  <liviu@opensips.org>
	* [0ad3e4f] :

	dialog: fix primary key when updating dialogs in REALTIME db mode
	When updating rows in the dialog table in REALTIME db mode, the dlg_id
	update key is not properly initialized (actually contains random data).

	Reported by miko95 on GitHub
	Closes issue #306

2014-08-19  Vlad Paiu  <vladpaiu@opensips.org>
	* [5266427] :

	Removed INFO debug

2014-08-19  Vlad Paiu  <vladpaiu@opensips.org>
	* [a162072] :

	Properly propagate parameters with no value

2014-08-19  Liviu Chircu  <liviu@opensips.org>
	* [72028d2] :

	dialplan: fix shm leak when parsing invalid regex
	Upon (re)load, if the subst or repl columns contain expressions which
	fail to compile, OpenSIPS will leak shared memory.

	Reported by miko95 on GitHub
	Closes issue #307

2014-08-19  Walter Doekes  <walter+github@wjd.nu>
	* [d8abf71] :

	msg_translator: Passing MSG_TRANS_NOVIA_FLAG means don't touch Via.
	Before this, if you passed the MSG_TRANS_NOVIA_FLAG flag to
	build_res_buf_from_sip_res, the msg->via1->next would get checked but
	not used. Now it's not touched at all.

2014-08-19  Liviu Chircu  <liviu@opensips.org>
	* [b7c3686] :

	dialog: fix possible hash id conflict on restart
	When restarting the proxy, the auto-generated next_id of each
	hash entry is not properly incremented if a loaded dialog happens to
	have this same next_id as hash id. This will soon lead to duplicate hash ids.

	Reported by miko95 on GitHub.

2014-08-18  Răzvan Crainea  <razvan@opensips.org>
	* [adddc5f] :

	Merge pull request #302 from tallicamike/fix-whitelists
	whitelist fix

2014-08-18  tallicamike  <mtiganus@gmail.com>
	* [7455d69] :

	whitelist fix

2014-08-18  Vlad Paiu  <vladpaiu@opensips.org>
	* [1c4bd9d] :

	Do not crash on replicated update if replicated create has failed Free dlg memory in case replicated create fails (cherry picked from commit c9b39731c4669bc2d91182bb6130cc1e88286b8a)

2014-08-18  Vlad Paiu  <vladpaiu@opensips.org>
	* [59a0360] :

	Do not replicate dialog termination if dialog creation was not done ( failed calls ) (cherry picked from commit 0705a29de1fdf865f7fa11cd3b68c43ccb9e9671)

2014-08-18  Vlad Paiu  <vladpaiu@opensips.org>
	* [d171022] :

	Fixed deadlock when replicating dialog which has pinging enabled. Remove pinging entirely for replicated dialogs, since it might cause issues when running in active-backup mode Properly set the dialog timeout for update bin requests (cherry picked from commit 837032b63b092b45cae64668fd56e6e7cb3d7184)

2014-08-15  Ovidiu Sas  <osas@voipembedded.com>
	* [c3a5a75] :

	core: fix error: redefinition of typedef param_export_t

2014-08-15  Ovidiu Sas  <osas@voipembedded.com>
	* [ae3b8e3] :

	Merge branch 'master' of github.com:OpenSIPS/opensips

2014-08-14  Vlad Paiu  <vladpaiu@opensips.org>
	* [1dd4ea2] :

	Fix iteration of to be sent MSILO messages Fixes issue #291 Thanks to Nick Altmann for reporting & testing

2014-08-13  Vlad Paiu  <vladpaiu@opensips.org>
	* [795d5cb] :

	Added param with list of Contact URI parameters to be passed from one side to the other when doing topology hiding Closes feature request #301

2014-08-13  Liviu Chircu  <liviu@opensips.org>
	* [104d533] :

	sst: add a silent module dependency with pua_dialoginfo
	Since "sst" performs a callback-based update on the "Session-Expires"
	header, pua_dialoginfo must be loaded before sst.

2014-08-13  Liviu Chircu  <liviu@opensips.org>
	* [57a042b] :

	module dependencies core: reclaim all used pkg memory
	After startup, all module dependency structs will be freed.

2014-08-13  Liviu Chircu  <liviu@opensips.org>
	* [61a973d] :

	module dependencies: Add configurable behaviour on dependency failures
	When exporting a dependency, a module must also specify the action taken
	if this dependency is not met during startup. Current
	possible behaviours: SILENT, WARN and ABORT.

2014-08-13  Liviu Chircu  <liviu@opensips.org>
	* [8d4b329] :

	module dependencies core: properly handle the USE_FUNC_PARAM

2014-08-13  Liviu Chircu  <liviu@opensips.org>
	* [5b470b8] :

	module dependencies: declare the dependencies of each OpenSIPS module

2014-08-13  Liviu Chircu  <liviu@opensips.org>
	* [7e40919] :

	module dependencies core: fix a string comparison bug
	when looking up modules, strcmp is more appropriate then memcmp, since
	otherwise, "presence_xml" would match a search for "presence", thus leading
	to "presence_xml" depending on itself

2014-08-13  Liviu Chircu  <liviu@opensips.org>
	* [c6afc24] :

	module dependencies: allow generic dependencies of own type
	In other words, the modules which make use of this will be the last ones
	of their type category to be loaded

	e.g. db_virtual is of type MOD_TYPE_SQLDB, and requires all
	MOD_TYPE_SQLDBs to be loaded before itself

	Note: abuse of this functionality may lead to dependency loops
	db_virtual is the only module to make use of it, currently

2014-08-13  Liviu Chircu  <liviu@opensips.org>
	* [0462ff0] :

	module dependencies core: add a commonly used function
	Any module which depends on all SQL DB modules once its db_url is set
	may use "get_deps_sqldb_url". Declared in sr_module_deps.h

	Usage example: acc module

2014-08-13  Liviu Chircu  <liviu@opensips.org>
	* [4b62c0a] :

	core: new module dependency specification interface introduced
	Allows OpenSIPS modules to specify dependency relations with others.

	This eliminates the need for explicit ordering of "loadmodule"
	script statements. More details in "sr_module_deps.h"

	All this logic is transparent at script level.

2014-08-13  Vlad Paiu  <vladpaiu@opensips.org>
	* [5b55845] :

	Added generic fixup functions that accept either static regexps or regexps containing pvars All the sipmsgops functions accepting regexps as input can now have pvars as input

2014-08-13  Razvan Crainea  <razvan@opensips.org>
	* [dd03176] :

	add new MI command named list_statistics
	The new command lists all registered statistics and displays their types

2014-08-12  Răzvan Crainea  <razvan@opensips.org>
	* [57043d1] :

	Merge pull request #298 from andrei-datcu/master
	[drouting] dr_number_routing fixed lock and documentation

2014-08-12  Andrei Datcu  <datcuandrei@gmail.com>
	* [88215db] :

	[drouting] dr_number_routing fixed lock and documentation

2014-08-12  Liviu Chircu  <liviu@opensips.org>
	* [b50e42b] :

	logging levels: switch to a per-process model
	* the MI "debug" command may change the logging level for one or all
		processes
	* global/specific log controlling functions available for core and modules

2014-08-12  Vlad Paiu  <vladpaiu@opensips.org>
	* [246d3d8] :

	Fixed error reporting for dialog DID matching when dealing with BIN interface replication

2014-08-12  Răzvan Crainea  <razvan@opensips.org>
	* [8fc2769] :

	Merge pull request #295 from tallicamike/dr-time-of-last-update
	Dr time of last update

2014-08-12  tallicamike  <mtiganus@gmail.com>
	* [52734f6] :

	date of dr_reload as mi_attr, default partition name not displayed, change use_db_config to use_partitions

2014-08-12  Razvan Crainea  <razvan@opensips.org>
	* [9b79b1b] :

	consider string size in hex2dec transformation
	Reported by gergelypeli on GitHub
	Closes #296

2014-08-11  Razvan Crainea  <razvan@opensips.org>
	* [92744fa] :

	event_route: check how many octets were sent over pipe

2014-08-11  Razvan Crainea  <razvan@opensips.org>
	* [9f36016] :

	event_route: do not start external process in synch mode

2014-08-11  tallicamike  <mtiganus@gmail.com>
	* [2d34a23] :

	[drouting] time of last update(dr_reload) for partition

2014-08-11  tallicamike  <mtiganus@gmail.com>
	* [a7fed47] :

	update dbg message

2014-08-11  tallicamike  <mtiganus@gmail.com>
	* [deea984] :

	resolve conflicts for merge

2014-08-11  tallicamike  <mtiganus@gmail.com>
	* [028f8fc] :

	[drouting] indentation with tabs

2014-08-11  Liviu Chircu  <liviu@opensips.org>
	* [b85d1f4] :

	dialog: suppress parsing errors when hiding topology
	Ultimately a revert of commit 7f562f91c99

2014-08-11  tallicamike  <mtiganus@gmail.com>
	* [e4b080f] :

	indentation with tabs, correct typos, remove escaped quotes. thank you Walter Doekes for the code review.

2014-08-11  Răzvan Crainea  <razvan@opensips.org>
	* [c05142b] :

	Merge pull request #293 from andrei-datcu/dr_api
	[drouting] Testing roules through MI now posssible

2014-08-11  Andrei Datcu  <datcuandrei@gmail.com>
	* [f5a20b6] :

	[drouting] Changed name to dr_number_routing. Corect flags for nodes

2014-08-11  tallicamike  <mtiganus@gmail.com>
	* [b2c39b4] :

	save time to partition

2014-08-08  Andrei Datcu  <datcuandrei@gmail.com>
	* [522b405] :

	[drouting] Testing roules through MI now posssible

2014-08-08  tallicamike  <mtiganus@gmail.com>
	* [f8e210e] :

	sanity check for contact header(s)

2014-08-08  Razvan Crainea  <razvan@opensips.org>
	* [f4fb9fb] :

	mi_fifo: add mechanism to recreate FIFO file
	The module checks every 30 seconds if the FIFO file was deleted. If it was, it
	recreates it. One can force file recreation by sending a SIGHUP signal to the
	MI FIFO process.

2014-08-08  Razvan Crainea  <razvan@opensips.org>
	* [06a6ea6] :

	domain: update column length when using custom attributes

2014-08-07  Răzvan Crainea  <razvan@opensips.org>
	* [4dc8d62] :

	Update domain documentation

2014-08-07  tallicamike  <mtiganus@gmail.com>
	* [d2ad483] :

	check validity for to/from in sipmsg_validate

2014-08-06  Răzvan Crainea  <razvan@opensips.org>
	* [43dc0c1] :

	Merge pull request #289 from tallicamike/master
	Partitions support for drouting

2014-08-06  tallicamike  <mtiganus@gmail.com>
	* [f5d422b] :

	remove debug related printing

2014-08-06  Razvan Crainea  <razvan@opensips.org>
	* [6ecfda8] :

	domain: fix is_domain_local when used from internal

2014-08-06  tallicamike  <mtiganus@gmail.com>
	* [d1fe7ed] :

	merge with ev

2014-08-05  tallicamike  <mtiganus@gmail.com>
	* [58112e9] :

	Merge commit 'c664d40'
	Conflicts:
		modules/drouting/README
		modules/drouting/drouting.c
		scripts/opensipsctlrc

2014-08-05  tallicamike  <mtiganus@gmail.com>
	* [c664d40] :

	add table version check

2014-08-05  Răzvan Crainea  <razvan@opensips.org>
	* [1887794] :

	Merge pull request #287 from andrei-datcu/master
	[dispatcher]Fixed README

2014-08-05  Andrei Datcu  <datcuandrei@gmail.com>
	* [122df6f] :

	[dispatcher]Fixed README

2014-08-04  Vlad Paiu  <vladpaiu@opensips.org>
	* [5010d3a] :

	Don't report an error if no event registered (cherry picked from commit 4669637db8956b72f6078eb0b9858cf76d1ca222)

2014-08-04  Razvan Crainea  <razvan@opensips.org>
	* [57ec0f3] :

	domain: add attributes support
	Provide a method to pass certain attributes to a domain.

2014-08-04  Răzvan Crainea  <razvan@opensips.org>
	* [5bc30f4] :

	Merge pull request #286 from andrei-datcu/master
	[usrloc]New contact-aware events

2014-08-04  Andrei Datcu  <datcuandrei@gmail.com>
	* [16038cd] :

	[usrloc]New contact-aware events

2014-08-04  Ionut Ionita  <ionutrazvan.ionita@gmail.com>
	* [cea5518] :

	Clarified necessity to add table name to version table

2014-08-04  Ionut Ionita  <ionutrazvan.ionita@gmail.com>
	* [1b561c7] :

	Moved force_dst and use_default parameters to ds_select_dst

2014-08-04  Ionut Ionita  <ionutrazvan.ionita@gmail.com>
	* [d1bf366] :

	Moved flags parameter inside max_results parameter

2014-08-04  Ionut Ionita  <ionutrazvan.ionita@gmail.com>
	* [1e6f33a] :

	Fixed: Error at fixup when flags are given as PVs

2014-08-04  Ionut Ionita  <ionutrazvan.ionita@gmail.com>
	* [14bd307] :

	Moved flags definition from startup(modparam) to ds_select and can now be different per transaction

2014-08-01  Liviu Chircu  <liviu@opensips.org>
	* [8e4d62d] :

	opensipsctlrc: Add a new DBPORT parameter
	This parameter will also work with osipsconsole

	Credits to Norman Brandinger for the initial version of the patch

2014-08-01  Răzvan Crainea  <razvan@opensips.org>
	* [0a119ed] :

	Merge pull request #285 from andrei-datcu/master
	[dispatcher] ds_select_dst domain working corectly now

2014-08-01  Andrei Datcu  <datcuandrei@gmail.com>
	* [80ef8f4] :

	[dispatcher] ds_select_dst domain working corectly now

2014-08-01  Răzvan Crainea  <razvan@opensips.org>
	* [6f4ed2f] :

	Merge pull request #284 from andrei-datcu/master
	[Dispatcher] info about version table into documentation

2014-08-01  Andrei Datcu  <datcuandrei@gmail.com>
	* [b8fa1df] :

	[dispatcher] Fixed README

2014-08-01  Andrei Datcu  <datcuandrei@gmail.com>
	* [6ce118e] :

	[Dispatcher] info about version table into documentation

2014-07-31  Razvan Crainea  <razvan@opensips.org>
	* [aaaf85c] :

	mi_json: send 'Command not found' if mi cmd does not exist
	Closes issue #282

2014-07-30  Liviu Chircu  <liviu@opensips.org>
	* [7396231] :

	tm: fix script-level read operations on the timeout variables
	Read operations before setting them or calling t_relay() would
	return 0.

	Reported by Jamuel Starkey

2014-07-30  Răzvan Crainea  <razvan@opensips.org>
	* [147f57a] :

	Add events readme for drouting and load_balancer modules
	Closes issue #280

2014-07-30  Razvan Crainea  <razvan@opensips.org>
	* [a0c1873] :

	load_balancer: add events for status changes
	Related to issue #280

2014-07-30  Razvan Crainea  <razvan@opensips.org>
	* [e499666] :

	drouting: add events for status changes
	Related to issue #280

2014-07-29  Razvan Crainea  <razvan@opensips.org>
	* [475b7c5] :

	drouting: add events for status changes
	Related to issue #280

2014-07-29  Vlad Paiu  <vladpaiu@opensips.org>
	* [b7bd5b5] :

	Do not crash if script locks were not initialized ( eg - OpenSIPS failed to start )

2014-07-28  Ovidiu Sas  <osas@voipembedded.com>
	* [9c63d02] :

	event_route: make sure that that all info is sent over the socket

2014-07-28  Liviu Chircu  <liviu@opensips.org>
	* [fcabc93] :

	Merge pull request #279 from andrei-datcu/master
	[dispatcher] Fixed two allocs for uri str. No more shm leak.

2014-07-28  Andrei Datcu  <datcuandrei@gmail.com>
	* [6f40e56] :

	[dispatcher] Fixed two allocs for uri str. No more shm leak.

2014-07-28  Răzvan Crainea  <razvan@opensips.org>
	* [092dddc] :

	Merge pull request #277 from andrei-datcu/master
	[Dialogs] Module flags

2014-07-28  Andrei Datcu  <datcuandrei@gmail.com>
	* [db1c78e] :

	[Dialog] Added internal flags to use from other modules - i.e set of boolean vars

2014-07-28  Andrei Datcu  <datcuandrei@gmail.com>
	* [925d9e5] :

	[sst]Return when there's no sst_info when loading dialog

2014-07-28  Andrei Datcu  <datcuandrei@gmail.com>
	* [9558972] :

	[Dispatcher] Smart uri replacement when using ds_select_domain

2014-07-28  Andrei Datcu  <datcuandrei@gmail.com>
	* [c2492e6] :

	[Dialog] Added internal flags to use from other modules - i.e set of boolean vars

2014-07-28  Andrei Datcu  <datcuandrei@gmail.com>
	* [9973256] :

	[sst]Return when there's no sst_info when loading dialog

2014-07-28  Andrei Datcu  <datcuandrei@gmail.com>
	* [2ea1061] :

	[sst]No error when loading from db non-sst dialogs

2014-07-28  Andrei Datcu  <datcuandrei@gmail.com>
	* [5036b1d] :

	SST module now also works with dialogs loaded from db

2014-07-25  Andrei Datcu  <datcuandrei@gmail.com>
	* [7d81d13] :

	[Dispatcher] Smart uri replacement when using ds_select_domain

2014-07-25  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [7078c0f] :

	Better generation of random names for reply FIFO.
	Related to issue #257

2014-07-25  Razvan Crainea  <razvan@opensips.org>
	* [33c9d48] :

	acc: parse db_extra before initializing db
	Fixes commit aa6f64

2014-07-24  Andrei Datcu  <datcuandrei@gmail.com>
	* [d5c0e17] :

	[Siptrace] Added table version check

2014-07-24  Andrei Datcu  <datcuandrei@gmail.com>
	* [abe3389] :

	[Siptrace] Added table version check

2014-07-24  Andrei Datcu  <datcuandrei@gmail.com>
	* [5ce2836] :

	[Dialog] Added internal flags to use from other modules - i.e set of boolean vars

2014-07-23  Ovidiu Sas  <osas@voipembedded.com>
	* [744a5c2] :

	event_route: support for handling EVI events in asynch mode  - "event-route handler": new dedicated process for handling EVI events  - "synch_mode": new module param to set the default EVI event handling

2014-07-23  tallicamike  <mtiganus@gmail.com>
	* [3c3a7e9] :

	Partitions support added (provisioned by database). dr_init using continue to skip broken configurations

2014-07-23  Vlad Paiu  <vladpaiu@opensips.org>
	* [4313f93] :

	Revert "allow opensipsdbctl to run from a different folder"
	This reverts commit 684a3e0ba17dc4f8dcd771a8f0ab648e0cc8121e.

2014-07-23  Andrei Datcu  <datcuandrei@gmail.com>
	* [4bf46f4] :

	Merge remote-tracking branch 'upstream/master'

2014-07-23  Andrei Datcu  <datcuandrei@gmail.com>
	* [d54dd21] :

	[sst]Return when there's no sst_info when loading dialog

2014-07-22  Andrei Datcu  <datcuandrei@gmail.com>
	* [93528d4] :

	[sst]No error when loading from db non-sst dialogs

2014-07-22  Vlad Paiu  <vladpaiu@opensips.org>
	* [17bc5d9] :

	Check for all negative values when fetching cachedb counter

2014-07-21  Andrei Datcu  <datcuandrei@gmail.com>
	* [e1b5994] :

	SST module now also works with dialogs loaded from db

2014-07-21  Razvan Crainea  <razvan@opensips.org>
	* [7f562f9] :

	dialog: do not change debugging level when parsing TH messages
	Although this might print error messages multiple times, we should not change
	the level because it also affects other processes.

2014-07-21  Răzvan Crainea  <razvan@opensips.org>
	* [49371c3] :

	Merge pull request #273 from zhangst/master
	Fix bogus README

2014-07-21  zhangst  <shuntongzhang@gmail.com>
	* [bacaaca] :

	Fix bogus README

2014-07-18  Răzvan Crainea  <razvan@opensips.org>
	* [ecf11ef] :

	Merge pull request #272 from ionutrazvanionita/master
	Partitions for dialplan

2014-07-18  Razvan Crainea  <razvan@opensips.org>
	* [ea5e7f1] :

	dialog: run loaded callbacks after dialog mod_init()

2014-07-18  Razvan Crainea  <razvan@opensips.org>
	* [3d16b30] :

	sst: fix UAC enum

2014-07-16  Ionut Ionita  <ionutrazvan.ionita@gmail.com>
	* [e43f56d] :

	Merge remote-tracking branch 'upstream/master'

2014-07-16  Răzvan Crainea  <razvan@opensips.org>
	* [07373cc] :

	Merge pull request #269 from andrei-datcu/master
	Partitions for dispatcher module

2014-07-16  Razvan Crainea  <razvan@opensips.org>
	* [61d8b2c] :

	acc: trigger the proper event when doing old-style accounting

2014-07-15  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [1a8bfb4] :

	Fix bogus README example.
	Reprted by Alexander (@sashker on HitHub)
	Closes #268 .

2014-07-15  Ionut Ionita  <ionutrazvan.ionita@gmail.com>
	* [4d3cfe2] :

	Documentation grammar fix

2014-07-15  Andrei Datcu  <datcuandrei@gmail.com>
	* [04762c7] :

	[Dispatcher]Fixed typos into documentation

2014-07-14  Liviu Chircu  <liviu@opensips.org>
	* [b1158ab] :

	correct several typos

2014-07-14  Andrei Datcu  <datcuandrei@gmail.com>
	* [0f2c7bc] :

	Fixed linkning new set in list and deleting set on error

2014-07-14  Ionut Ionita  <ionutrazvan.ionita@gmail.com>
	* [39407ad] :

	Lock before destroy hash

2014-07-13  Liviu Chircu  <liviu@opensips.org>
	* [965baa2] :

	pi_http: fix compiler warning

2014-07-12  Liviu Chircu  <liviu@opensips.org>
	* [aa6f647] :

	acc: fix startup crash with empty db_url

2014-07-11  Liviu Chircu  <liviu@opensips.org>
	* [7a47e0c] :

	perl: ignore auto-generated C file

2014-07-11  Liviu Chircu  <liviu@opensips.org>
	* [b048a17] :

	sipcapture: fix startup crash with undefined db_url

2014-07-11  Ionut Ionita  <ionutrazvan.ionita@gmail.com>
	* [9893c33] :

	init_db_url bug fix

2014-07-11  Ionut Ionita  <ionutrazvan.ionita@gmail.com>
	* [952e905] :

	Db_url null check bug fix

2014-07-10  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [2c7e33e] :

	Fix broken dlg_val assignment when value is NULL.

2014-07-09  Andrei Datcu  <datcuandrei@gmail.com>
	* [7a58426] :

	No more empty sets in the cached data. mi_reload per partition now possible

2014-07-09  Ionut Ionita  <ionutrazvan.ionita@gmail.com>
	* [ad90f6f] :

	mi_cmds definition dp_reload parameter NO_PARAMETER flag fix

2014-07-08  Andrei Datcu  <datcuandrei@gmail.com>
	* [114d570] :

	Improved fixups. Tokenizing partition_name:set_id is now faster

2014-07-08  Ionut Ionita  <ionutrazvan.ionita@gmail.com>
	* [64526db] :

	Readme

2014-07-08  Ionut Ionita  <ionutrazvan.ionita@gmail.com>
	* [15cc4e4] :

	PV Support for partition name in translate exported function

2014-07-08  Ionut Ionita  <ionutrazvan.ionita@gmail.com>
	* [d7e8c1f] :

	PV Support for partition name in translate exported function

2014-07-08  Ionut Ionita  <ionut.ionita@cti.pub.ro>
	* [24436d3] :

	PV Support for partition name in translate exported function

2014-07-07  Bogdan Andrei IANCU  <bogdan@opensips.org>
	* [b573ae6] :

	Merge pull request #265 from jalung/patch-2
	Update osipsconsole

2014-07-07  jalung  <sevpal@msn.com>
	* [024a106] :

	Update osipsconsole
	missing semi-colon;

2014-07-04  Liviu Chircu  <liviu@opensips.org>
	* [2a547f6] :

	flags.c: drop empty-string flags
	Also issue a scripting error warning

2014-07-04  Razvan Crainea  <razvan@opensips.org>
	* [1ad3fcb] :

	Makefile: add extra_objs while opensips linking

2014-07-04  Liviu Chircu  <liviu@opensips.org>
	* [9b372b4] :

	config files and templates: fix deprecation warnings

2014-07-04  Ionut Ionita  <ionut.ionita@cti.pub.ro>
	* [6b7c154] :

	Child Init modification and code design

2014-07-03  Andrei Datcu  <datcuandrei@gmail.com>
	* [45353a5] :

	[Dispatcher] Fixed three memory leaks

2014-07-03  Ionut Ionita  <ionut.ionita@cti.pub.ro>
	* [7f89e8c] :

	Merge remote-tracking branch 'upstream/master'

2014-07-03  Razvan Crainea  <razvan@opensips.org>
	* [9f012e8] :

	rw_locking local label for each macro

2014-07-03  Razvan Crainea  <razvan@opensips.org>
	* [9245316] :

	event_route: properly backup the event's name
	Reported and fixed by Ovidiu Sas

2014-07-03  Andrei Datcu  <datcuandrei@gmail.com>
	* [c5c97af] :

	[Dispatcher] tm's request within callback correctly free param

2014-07-03  Ionut Ionita  <ionut.ionita@cti.pub.ro>
	* [8d73e01] :

	Bug fixing

2014-07-02  Eric Tamme  <eric.tamme@onsip.com>
	* [d930f92] :

	fix for RFC5245 15.1 <rel-addr> and <rel-port> MUST be present for server reflexive, peer, and relay candidates

2014-07-02  Ionut Ionita  <ionut.ionita@cti.pub.ro>
	* [0640954] :

	Documentation support

2014-07-02  Razvan Crainea  <razvan@opensips.org>
	* [9620397] :

	add LM_BUG alias to report_programming_bug

2014-07-02  Razvan Crainea  <razvan@opensips.org>
	* [bfa6ab0] :

	add module variable to simplify single module compile

2014-07-02  Andrei Datcu  <datcuandrei@gmail.com>
	* [579e53a] :

	Fixed blacklists and updated documentation

2014-07-02  Bogdan Andrei IANCU  <bogdan@opensips.org>
	* [bf93a37] :

	Merge pull request #263 from wdoekes/wjd-unbreak_modules_readme
	make: Let `make modules-readme modules=aaa_radius` work again.

2014-07-02  Walter Doekes  <walter+github@wjd.nu>
	* [3dd0529] :

	make: Let `make modules-readme modules=aaa_radius` work again.

2014-07-01  Razvan Crainea  <razvan@opensips.org>
	* [798798b] :

	replace deprecated json_object_object_get() function

2014-07-01  Bogdan Andrei IANCU  <bogdan@opensips.org>
	* [2e025df] :

	Merge pull request #262 from zytron/ratelimit_failure_route
	ratelimit: Allow FAILURE_ROUTE instead of duplicate LOCAL_ROUTE

2014-07-01  Vlad Paiu  <vladpaiu@opensips.org>
	* [6f9c8c3] :

	Added detection for the version of libjson used in the system Also, fixed printing of entire json objects

2014-07-01  Bill Hau  <zytron@gmail.com>
	* [633b1b8] :

	ratelimit: Allow FAILURE_ROUTE instead of duplicate LOCAL_ROUTE

2014-07-01  Liviu Chircu  <liviu@opensips.org>
	* [a1b0495] :

	script_helper: minor logging improvements
	Do not report errors when ACKs to 487 responses fail to match any on-going dialogues
	Reported by Gary Nyquist

2014-07-01  vladpaiu  <vladpaiu@opensips.org>
	* [da159ad] :

	Merge pull request #260 from jalung/patch-1
	Update cachedb_redis_utils.c to properly support latest redis clusters running with three masters

2014-07-01  Razvan Crainea  <razvan@opensips.org>
	* [684a3e0] :

	allow opensipsdbctl to run from a different folder

2014-07-01  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [59061f1] :

	Add index on the pua table for peformance reasons.
	Credits go to "lirakin" on IRC

2014-07-01  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [f80f9fc] :

	Update dbschema for siptrace table version.

2014-07-01  Vlad Paiu  <vladpaiu@opensips.org>
	* [843fdde] :

	Fixed JSON fetching of array string fields

2014-07-01  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [28a974b] :

	Add "set ID" param to "rtpproxy_enable" MI.
	A second optional param added to specify the set ID too.

2014-07-01  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [acb1b37] :

	Fix fetching cseq number for replies.
	Closes #165.

2014-07-01  Vlad Paiu  <vladpaiu@opensips.org>
	* [5ebc1ef] :

	Allow variables to be assigned variables containing NULL values

2014-07-01  Ionut Ionita  <ionut.ionita@cti.pub.ro>
	* [baef64d] :

	Added partition support for dialplan module

2014-07-01  Andrei Datcu  <datcuandrei@gmail.com>
	* [cf0e9ab] :

	[Dispatcher] fixed db_url checking

2014-07-01  Razvan Crainea  <razvan@opensips.org>
	* [84cfab2] :

	change default prefix to /usr/local

2014-07-01  jalung  <sevpal@msn.com>
	* [cba8570] :

	Update cachedb_redis_utils.c
	Opensips 1.11 fails to connect to Redis Cluster (beta6) running three masters. This change should be backwards compatible.

2014-06-30  Razvan Crainea  <razvan@opensips.org>
	* [6782497] :

	event_rabbitmq: destroy socket for older AMQP versions

2014-06-30  Razvan Crainea  <razvan@opensips.org>
	* [522bd27] :

	event_rabbitmq: properly reconnect after closing a connection

2014-06-30  Razvan Crainea  <razvan@opensips.org>
	* [c8f26cb] :

	event_rabbitmq: allow cross-compile

2014-06-30  Andrei Datcu  <datcuandrei@gmail.com>
	* [66c98e5] :

	Partitions for dispatcher module

2014-06-30  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [81e76cd] :

	Merge branch 'wdoekes-wjd-misc_typos'

2014-06-30  Walter Doekes  <walter+github@wjd.nu>
	* [72d3381] :

	doc/dialog: Remove double quotes from $dlg_val examples.

2014-06-30  Walter Doekes  <walter+github@wjd.nu>
	* [bcdbf27] :

	doc: Fix typo's. Always regenerate all docs.

2014-06-30  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [b611ee6] :

	Fix bogus trailing dot char in SQL syntax.

2014-06-25  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [35f9d98] :

	Add missing UPDATE method in rules.

2014-06-23  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [c760b69] :

	Fix moving the AVP list from UAS to UAC in B2B.
	Closes issue #230
	Many thanks to Ovidiu Sas for report and debugging.

2014-06-23  Vlad Paiu  <vladpaiu@opensips.org>
	* [b36da5e] :

	Fixed empty tree bug

2014-06-20  Răzvan Crainea  <razvan@opensips.org>
	* [7cbe8a7] :

	fixed auth README typo

2014-06-20  Bogdan Andrei IANCU  <bogdan@opensips.org>
	* [32c6c0d] :

	Merge pull request #254 from andrei-datcu/master
	Yet another typo in siptrace's readme

2014-06-19  Andrei Datcu  <datcuandrei@gmail.com>
	* [dffb3c5] :

	Yet another typo in siptrace's readme

2014-06-19  Răzvan Crainea  <razvan@opensips.org>
	* [01bd4aa] :

	Merge pull request #253 from andrei-datcu/master
	Split fromip and toip columns

2014-06-19  Andrei Datcu  <datcuandrei@gmail.com>
	* [58e6b4c] :

	Fixed formulation in siptrace's readme

2014-06-19  Andrei Datcu  <datcuandrei@gmail.com>
	* [534884d] :

	Fixed typo in siptrace's readme

2014-06-19  Andrei Datcu  <datcuandrei@gmail.com>
	* [b746032] :

	Split fromip and toip columns

2014-06-19  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [a550b90] :

	Fix typo in the doc examples

2014-06-18  Răzvan Crainea  <razvan@opensips.org>
	* [56a01fa] :

	Merge pull request #252 from ionutrazvanionita/master
	Add exchange support for event_rabbitmq

2014-06-18  Ionut Ionita  <ionut.ionita@cti.pub.ro>
	* [e7886d5] :

	Update documentation for event_rabbitmq.

2014-06-18  Ionut Ionita  <ionut.ionita@cti.pub.ro>
	* [cd090f7] :

	Merge branch 'rabbitmq-exchange'

2014-06-18  Ionut Ionita  <ionut.ionita@cti.pub.ro>
	* [73678aa] :

	Add exchange support for rabbitmq

2014-06-18  Răzvan Crainea  <razvan@opensips.org>
	* [53231eb] :

	update drouting documentation

2014-06-18  Razvan Crainea  <razvan@opensips.org>
	* [7541642] :

	remove extra char in state's printing

2014-06-18  Razvan Crainea  <razvan@opensips.org>
	* [3866e35] :

	provide more MI details about the gws state

2014-06-18  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [45afa00] :

	Replace "flags" with "state" in the ds_list output

2014-06-18  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [3d9bb5a] :

	Replace FLAGS with STATE columns in dispatcher

2014-06-18  Razvan Crainea  <razvan@opensips.org>
	* [f43bde4] :

	rabbitmq provides failure reason starting from v0.4.0

2014-06-18  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [8e70636] :

	Readme re-generated

2014-06-18  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [3e71b9b] :

	Fix docs - replace "flags_col" with "state_col".

2014-06-17  Razvan Crainea  <razvan@opensips.org>
	* [9a37842] :

	restructure MI output to align to mi_json structure

2014-06-17  Razvan Crainea  <razvan@opensips.org>
	* [dba4810] :

	dialog: fix $DLG_timeout printing

2014-06-17  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [6434924] :

	Merge branch 'lemenkov-rtpproxy-ng'

2014-06-17  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [796ae0d] :

	Add proper licensing header to all files.

2014-06-17  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [36f4f22] :

	Full migration from RTPPROXY to RTPENGINE naming.

2014-06-17  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [6c643df] :

	Fixed dangling spec structure in pv_parse_spec().

2014-06-17  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [d72a13f] :

	Merge branch 'rtpproxy-ng' of https://github.com/lemenkov/opensips into lemenkov-rtpproxy-ng

2014-06-17  Bogdan Andrei IANCU  <bogdan@opensips.org>
	* [1dc27c2] :

	Merge pull request #248 from wdoekes/wjd-warn-if-no-docbook
	makefile: Move checks around for documentation dependencies.

2014-06-13  Walter Doekes  <walter+github@wjd.nu>
	* [7c61bbb] :

	makefile: Move checks around for documentation dependencies.

2014-06-11  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [d08e5d0] :

	Removed obsolete file.

2014-06-10  Vlad Paiu  <vladpaiu@opensips.org>
	* [1dcd88e] :

	Proper checking of callid length Reported by Walter Doekes

2014-06-06  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [7864fd2] :

	Fixed handling of REJECT return code.
	(cherry picked from commit 8e42553e44be1b054d2f6e9b84b3632e83e4a0bd)

2014-06-06  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [046b8a4] :

	Fixed dbschema doc to point to right modules doc

2014-06-06  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [376e96d] :

	Just code beautification

2014-06-05  Razvan Crainea  <razvan@opensips.org>
	* [2063664] :

	event_rabbitmq: proper error reporting when msg sending fails

2014-06-05  Liviu Chircu  <liviu@opensips.org>
	* [b54afe3] :

	core statistics: revert to safe allocations
	Commit 42c3d383 is incomplete since some statistics are allocated
	in multi-process environments (e.g. udp/tcp load statistics)

	This patch fixes this issue, while maintaining the logic behind 42c3d383

2014-06-05  Liviu Chircu  <liviu@opensips.org>
	* [53e48e1] :

	core: Fix uninitialized number of interface listeners
	Closes issue #246, reported by cityant

2014-06-04  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [20d1fe6] :

	Fixed autobridging in combination with TopoHiding.
	Get information about the next hop from the Transaction layer (when Topo Hiding is used), as we have no second VIA present in the SIP replies.
	Based on an original fix from Nick Altmann, related to push request #238.

2014-06-03  Razvan Crainea  <razvan@opensips.org>
	* [2e14a40] :

	statistics: fixed MI get_statistics command to cope with mi_json

2014-05-29  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [dd788ff] :

	Fix ds_list MI command output.
	The values added to the MI tree must be either persistent, either duplicated into the tree.
	Closes issue #243, reported by Ovidiu Sas.

2014-05-29  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [dd10969] :

	Fix nameaddr.params if last param has no value.
	Closes again #228 .

2014-05-29  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [07448cb] :

	Fixed missing \n in log messages.

2014-05-29  Razvan Crainea  <razvan@opensips.org>
	* [213e777] :

	rtpproxy: restructure rtpproxy_mi show command
	Due to the initial structure, some useful information was stripped by the mi_json module.
	Added the "Set" as root node, followed by a child for each node

2014-05-28  Razvan Crainea  <razvan@opensips.org>
	* [20c1753] :

	lb: mark resources as array

2014-05-23  Ovidiu Sas  <osas@voipembedded.com>
	* [cca642b] :

	uac_registrant: documentation updates

2014-05-23  Ovidiu Sas  <osas@voipembedded.com>
	* [c616b08] :

	uac_registrant: print an error if registrar imposed expires to small

2014-05-23  Ovidiu Sas  <osas@voipembedded.com>
	* [0181bec] :

	uac_registrant: add some sanity checks during db record(s) loading

2014-05-23  Ovidiu Sas  <osas@voipembedded.com>
	* [2998f06] :

	uac_registrant: add some sanity checks during module init

2014-05-22  Razvan Crainea  <razvan@opensips.org>
	* [24ace9f] :

	Removed QM_JOIN_FREE defines
	Permanently enable the QM allocator feature to join adjacent free fragments.

2014-05-22  Razvan Crainea  <razvan@opensips.org>
	* [b9336ea] :

	Revert "Makefile: by default, join free fragments"
	This reverts commit 8f8922ca4449a4428cade1a3e774841fd21689d4.

2014-05-22  Razvan Crainea  <razvan@opensips.org>
	* [8f8922c] :

	Makefile: by default, join free fragments

2014-05-22  Liviu Chircu  <liviu@opensips.org>
	* [24517fd] :

	drouting: document the "persistent_state" parameter

2014-05-21  Razvan Crainea  <razvan@opensips.org>
	* [7b5ce39] :

	flatstore: escape delimiter

2014-05-21  Liviu Chircu  <liviu@opensips.org>
	* [3ac3b04] :

	core: improve CPU usage of the TCP_MAIN process
		* iterate through and close connections at most once per second

2014-05-21  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [2e4b2d5] :

	Added support for external body in MSILO.
	Able to deal with MESSAGEs with no body but with conten-type refering to an external body.

2014-05-21  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [d5ff4c9] :

	Fixed setting the pinging flags at start.
	Related to issue #233

2014-05-21  Ovidiu Sas  <osas@voipembedded.com>
	* [2923d41] :

	dialplan: dp_translate(): accept "id" param as STR PVAR  - convert it to INT "id" STR PVAR (if possible)

2014-05-21  Ovidiu Sas  <osas@voipembedded.com>
	* [f517529] :

	dialplan: return "404 No translation" for failed MI dp_translate command

2014-05-20  Razvan Crainea  <razvan@opensips.org>
	* [310dafa] :

	dispatcher: fix possible bogus gateways
	In case the domain name can not be resolved, the destination should
	be droped and the number of destinations within the set should not be
	increased.

2014-05-20  Razvan Crainea  <razvan@opensips.org>
	* [6dc7261] :

	dispatcher: add priority column
	This is useful for "first entry" algorithm, where you can now
	order the entries regardless the database order

2014-05-19  Liviu Chircu  <liviu@opensips.org>
	* [79249f8] :

	change #if to #ifdef in commit 008593a3

2014-05-19  Liviu Chircu  <liviu@opensips.org>
	* [cd201b6] :

	QM_MALLOC: proper fragment debugging patterns for x86_64

2014-05-19  Liviu Chircu  <liviu@opensips.org>
	* [008593a] :

	QM_MALLOC: add a new MI memory scanning function
		* "shm_check" now performs a full scan and stops OpenSIPS if any
			inconsistency is found
		* only available with DBG_QM_MALLOC

2014-05-19  Bogdan Andrei IANCU  <bogdan@opensips.org>
	* [3452fbf] :

	Merge pull request #232 from wdoekes/wjd-misc_typos
	Fix a few typo's and double spaces in LM_* messages.

2014-05-19  Walter Doekes  <walter+github@wjd.nu>
	* [52400c6] :

	Fix a few spacing issues and a few more typo's.

2014-05-19  Walter Doekes  <walter+github@wjd.nu>
	* [9424d34] :

	s/writting/writing/

2014-05-19  Walter Doekes  <walter+github@wjd.nu>
	* [cc375eb] :

	s/sever=/server=/

2014-05-19  Walter Doekes  <walter+github@wjd.nu>
	* [5fbda5a] :

	s/interger/integer/

2014-05-19  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [f898389] :

	Fixed output redirect for "which"
	Credits go to @jalung . Closes #231 .

2014-05-19  Razvan Crainea  <razvan@opensips.org>
	* [eef59c1] :

	dialog: prevent double free in case of errors

2014-05-16  Vlad Paiu  <vladpaiu@opensips.org>
	* [48fbecc] :

	Full rework of the module Leave the connection management handling to the cachedb interface Allow multiple connections exposed to script

2014-05-15  Vlad Paiu  <vladpaiu@opensips.org>
	* [b58dc5d] :

	Update the length of the prefix and seed for callid topo hiding after cfg parsing

2014-05-15  Vlad Paiu  <vladpaiu@opensips.org>
	* [2d953e2] :

	Do not do unnecessary parsing of the SIP msg on the out side, in case it doesn't belong to a callid topo hiding dialog Silence the parsing of the SIP messages pre & post

2014-05-14  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [e9b1757] :

	Reduce log level for script ops. Better err logging

2014-05-14  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [a4eb40a] :

	Clone in shm requests with all headers parsed.
	For the UAC transactions, when adding the fake msg in the UAS side, be sure all the needed headers are parsed and ready for cloning into SHM.

	Reported by Nick Altmann. Also many thanks for the support with the troubleshooting.

	(cherry picked from commit 5669370f6492ec0c6a01bb31db791c6f7dfc7885)

2014-05-14  Razvan Crainea  <razvan@opensips.org>
	* [b252b47] :

	call_center: cc_handle_call() accept strings

2014-05-14  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [bdfee9d] :

	Fix calculating len of params in nameaddr trans.
	If the value of the last parameter is a quoted string, we need to include in the len calculation the closing quote too (quotes are not included in the actual value).

	Closing #228.

	(cherry picked from commit cf1ae2a9158699844ef15797a5b234b010a4d1c8)

2014-05-14  Liviu Chircu  <liviu@opensips.org>
	* [99b049b] :

	tls: allow free(NULL) with DBG_QM_MALLOC enabled

2014-05-09  Liviu Chircu  <liviu@opensips.org>
	* [0338917] :

	cachedb core: properly free raw query results
		* freeing more than 1 result leaked pkg mem

	Fixes #226

2014-05-09  Liviu Chircu  <liviu@opensips.org>
	* [0be4225] :

	tcp_no_new_conn_bflag: fix incorrect behaviour when using integer flags
		* also fix some redundant pointer ref/dereferencing

2014-05-08  Liviu Chircu  <liviu@opensips.org>
	* [ffb0cb6] :

	core: fix mem statistics when DBG_QM_MALLOC is on

2014-05-08  Razvan Crainea  <razvan@opensips.org>
	* [ff839b8] :

	acc: register dialog loaded callbacks after flags init
	This solves the bug when CDRs were not written in DB after restart
	Reported by Mayama Takeshi, who also provided testing environment

2014-05-07  Razvan Crainea  <razvan@opensips.org>
	* [459dffb] :

	mi_json: complete rework of the module
	consider the modules MI_IS_ARRAY hints to build a simpler JSON document
	fixes cases where duplicate keys generate invalid documents
	(example: ul_show_contacts)

2014-05-07  Razvan Crainea  <razvan@opensips.org>
	* [7b83d07] :

	fix previous commit to organize dlg_list_ctx as array too

2014-05-07  Vlad Paiu  <vladpaiu@opensips.org>
	* [afee8fe] :

	When loading new dialogs at runtime ( either via dlg_db_sync or via the bin interface ), also run the load callback ( eg. used by the acc module to write proper CDRs )

2014-05-07  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [34576f5] :

	Fix the structure of MI tree (output).
	Mark the nodes that contain arrays of subnodes (versus list of differente nodes). This is a must in order to properly structure the MI output via the json backend.

2014-05-07  Razvan Crainea  <razvan@opensips.org>
	* [eb233f8] :

	event_rabbitmq: replace exchange with routing_key
	Closes #220

2014-05-07  Razvan Crainea  <razvan@opensips.org>
	* [74666b9] :

	utils: ignore db_berkeley versioning

2014-05-07  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [5c27f46] :

	Fixed compile warnings

2014-05-07  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [861c4c4] :

	Support for json-c ; Fixed compile warnings
	(cherry picked from commit e481ef3895c5cc679ae94676e433a3b522c8b95f)

2014-05-07  Razvan Crainea  <razvan@opensips.org>
	* [fc3ca07] :

	b2b: restore callbacks mask after reload

2014-05-07  Razvan Crainea  <razvan@opensips.org>
	* [e086595] :

	call_center: initialize ret variable

2014-05-07  Razvan Crainea  <razvan@opensips.org>
	* [4ddf1b3] :

	b2b_logic: do not call the DESTROY callback at shutdown

2014-05-07  Razvan Crainea  <razvan@opensips.org>
	* [a5f6e10] :

	call_center: fix default scenario readme

2014-05-07  Razvan Crainea  <razvan@opensips.org>
	* [2f6eb09] :

	call_center: add cc_calls table

2014-05-07  Razvan Crainea  <razvan@opensips.org>
	* [4b366c5] :

	call_center: add last_call_end column

2014-05-07  Razvan Crainea  <razvan@opensips.org>
	* [997ccd3] :

	call_center: add column info when loading calls from db

2014-05-07  Razvan Crainea  <razvan@opensips.org>
	* [939a240] :

	call_center: properly register B2B callbacks

2014-05-07  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [c5031b0] :

	Fix DB_BIGINT support and unused vars.
	(cherry picked from commit 611d47f5ac3ed36bcf3cfa233e25586b29616e88)

2014-05-07  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [f7f2cb4] :

	Fix reusage of proxy_l structures.
	As proxy_l structures contain information about the DNS-based failover (iteration in he struct, which SRV or NAPTR records were used or not), such structure cannot be used more then once for sending a message out.
	Fixes:
	- do not use the same proxy_l for multiple functions in script (remove the add_proxy() and find_proxy() )
	- avoid using the same proxy_l structure for all the calls of same function (when proxy_l is a function parameter)

	Fixes #224
	Many thanks for Chris Maciejewski ( @l7s ) for support on troublehsooting this.

2014-05-06  Ovidiu Sas  <osas@voipembedded.com>
	* [92131a4] :

	scripts: fix gdb detection for opensipsctl

2014-05-06  Liviu Chircu  <liviu@opensips.org>
	* [204d08b] :

	db_text: properly initialize memory when caching tables

2014-05-06  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [e1641a4] :

	Fixed examples in docs (uac versus uac_auth)

2014-05-06  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [77d2aa8] :

	Fixed bogus test on memory allocation.
	(cherry picked from commit d9fe58e721a0e4c53841e91ba766df7bbce2cae5)

2014-05-05  Liviu Chircu  <liviu@opensips.org>
	* [d63ee19] :

	db_unixodbc: deallocate the results only after they are processed
		* closes bug #622 on the SF tracker

2014-05-05  Vlad Paiu  <vladpaiu@opensips.org>
	* [67023e9] :

	When fetching a counter, do not accidentally create it in case it does not exist

2014-05-05  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [6306252] :

	Postgres schema regenerated

2014-05-05  Bogdan Andrei IANCU  <bogdan@opensips.org>
	* [671a5bb] :

	Merge pull request #221 from nikbyte/master
	Fix some PgSQL schema issues

2014-05-05  Nick Altmann  <nick.altmann@gmail.com>
	* [40e6f9a] :

	PostgreSQL DB schema: set for all serials maxvalue and cycle because sometimes serials may overflow

2014-05-05  Nick Altmann  <nick.altmann@gmail.com>
	* [6ff5cf4] :

	PostgreSQL DB schema: remove bytea size because pgsql has no fixed size for this type of field

2014-05-05  Vlad Paiu  <vladpaiu@opensips.org>
	* [47cd18c] :

	When fetching a counter, do not accidentally create it in case it does not exist

2014-05-05  Vlad Paiu  <vladpaiu@opensips.org>
	* [f1fec17] :

	Fixed the connection handling - some modules would want to run cachedb type ops in the mod init Fixed the DB schema & increased version - the keyname must be a primary key for the counter ops to properly work

2014-05-02  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [178b7ec] :

	ID "column" can be INT or STRING type.
	If using a noSQL backend (via db_cachedb module), the id may be returned as string (by mongoDB).
	Reported by Ovidiu Sas
	Fixes #173.

2014-05-02  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [d871bc9] :

	Fixed using internal ID for DB updated operations.
	Use the DB ID when doing updates instead of the internal ID.

2014-05-01  Liviu Chircu  <liviu@opensips.org>
	* [dee5b3f] :

	script statement thresholds: ignore certain statements
	Motivation:
		* could lead to behavior such as:
			"ROUTE, IF, ROUTE, IF and IF took too long..."

		* ignored statements: ROUTE, IF, WHILE, FOR_EACH

2014-05-01  Liviu Chircu  <liviu@opensips.org>
	* [a99688e] :

	core: fix compiler warning and a rare mem leak
		* setting the global advertised port multiple times leaked pkg mem

2014-04-30  Liviu Chircu  <liviu@opensips.org>
	* [ad92fa6] :

	core: address several advertised address related issues
		* properly duplicate buffers into shared memory when required
		* keep the advertised address of the first branch as a default for
		  future branches
		* also allow set_advertised_port() to receive any kind of parameter
		  (int, string, int pvar, str pvar...)

	Credits for reporting and helping with troubleshooting to GitHub user contact2malay

2014-04-29  Liviu Chircu  <liviu@opensips.org>
	* [70d2823] :

	stun: fix possible memory corruption
		* when processing any STUN packet with unknown attributes
	(Reported by Nick Altmann)

2014-04-28  Bogdan Andrei IANCU  <bogdan@opensips.org>
	* [6524366] :

	Merge pull request #202 from fabriziopicconi/patch-1
	thrift 0.9 support added

2014-04-27  fabriziopicconi  <fabrizio.picconi@alice.it>
	* [c81b928] :

	Update Makefile

2014-04-23  Liviu Chircu  <liviu@opensips.org>
	* [df88864] :

	drouting: properly set pvar types when setting attribute values
		* fixes commit d24b10e1f
	(Reported by Alexander Mustafin)

2014-04-22  Bogdan Andrei IANCU  <bogdan@opensips.org>
	* [05209bb] :

	Merge pull request #130 from dsandras/ds-pua-dbupdate-fix
	Fixes bug where the pua db elements were deleted too early.
	Conflicts:
		modules/pua/pua.c

	(cherry picked from commit 313f41ad46921d543980fa9fc71fb0715d385085)

2014-04-22  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [4ccebfe] :

	Fix passing the auth AVPs from server to client.
	Fixes #134, testing still required.

2014-04-22  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [5972f2d] :

	Fixed creating tables for b2b and call_center modules

2014-04-20  Nick Altmann  <nikbyte@users.noreply.github.com>
	* [dcec6be] :

	Merge pull request #210 from fabriziopicconi/patch-6
	RPM spec: fix opensips-db_oracle library installation

2014-04-20  fabriziopicconi  <fabrizio.picconi@alice.it>
	* [b931f8c] :

	Fix opensips-db_oracle library installation
	libclntsh.so.11.1() and libocci.so.11.1() not exported by oracle-instantclient

2014-04-20  Nick Altmann  <nick.altmann@gmail.com>
	* [0e1f27a] :

	RPM spec: added dependencies for mysql and postgresql libs

2014-04-18  Razvan Crainea  <razvan@opensips.org>
	* [4919457] :

	rtpproxy: fix another documentation typo
	rtpproxy_engage() function is not deprecated

2014-04-18  Razvan Crainea  <razvan@opensips.org>
	* [a9f358e] :

	rtpproxy: fix documentation typo
	rtpproxy_unforce() function is not deprecated

2014-04-17  Liviu Chircu  <liviu@opensips.org>
	* [4f7df94] :

	TLS README: correct spelling and grammar

2014-04-17  Liviu Chircu  <liviu@opensips.org>
	* [3a0bca8] :

	regenerate the TLS CA and default certificate
		* the CA passphrase did not match the one in the README

2014-04-16  Nick Altmann  <nick.altmann@gmail.com>
	* [2d07ad4] :

	RPM spec: corrected changelog section format

2014-04-16  fabriziopicconi  <fabrizio.picconi@alice.it>
	* [fe99fb6] :

	RPM spec: fixed x64_86 compilation problems, added some dependencies

2014-04-16  Razvan Crainea  <razvan@opensips.org>
	* [48050ee] :

	acc: make sure we we don't write the same record twice
	this scenario appears when using multi bye leg support and there are no legs

2014-04-16  Liviu Chircu  <liviu@opensips.org>
	* [3a8c6e0] :

	anchor_lump(): drop the redundant "len" parameter

2014-04-16  Liviu Chircu  <liviu@opensips.org>
	* [3adf6a9] :

	data_lump.h: explicitly warn about some broken logic
	Currently, append_new_lump() and insert_new_lump() are not used at all.
	Moreover, it seems they would not work anyway.

2014-04-16  Liviu Chircu  <liviu@opensips.org>
	* [6f83e15] :

	lumps processing: a couple of performance optimizations
	Since we can only have LUMP_DEL or LUMP_NOP along the main lump chain,
	reordering the switch statements will improve code performance.

	This patch also enhances code readability and improves error reporting.

2014-04-16  Liviu Chircu  <liviu@opensips.org>
	* [9f7ce76] :

	error.h: add a bug reporting function
	Motivation:
		* it seems it can be reused quite a lot

	Examples:
		* report_programming_bug("invalid pointer: %p", p);
		* report_programming_bug("we should not process BYEs here!");

2014-04-15  Liviu Chircu  <liviu@opensips.org>
	* [f9d9654] :

	lump processing: correct the handling of DEL lumps with identical offsets
		* for this corner case, only add the _delta_ lengths instead

2014-04-15  Razvan Crainea  <razvan@opensips.org>
	* [eb06db1] :

	generate .gitrevision file if it does not exist

2014-04-15  Razvan Crainea  <razvan@opensips.org>
	* [8ad936f] :

	Makefile: add git revision in the tarballs

2014-04-15  Razvan Crainea  <razvan@opensips.org>
	* [1f68d9a] :

	remove id from version output, since it is no longer used

2014-04-12  fabriziopicconi  <fabrizio.picconi@alice.it>
	* [3dc70f9] :

	thrift 0.9
	thrift 0.9 support

2014-04-11  Liviu Chircu  <liviu@opensips.org>
	* [5c790aa] :

	msilo dbschema: avoid setting a default value for the body field
		* this causes errors/warnings on backends such as MySQL/MariaDB

2014-04-10  Razvan Crainea  <razvan@opensips.org>
	* [4fd00f1] :

	rtpproxy: fix rtpproxy_engage() pvar expansion
	Reported by Ovidiu Sas
	Closes #195

2014-04-09  Ovidiu Sas  <osas@voipembedded.com>
	* [a6fd82d] :

	parser: increase the number of accepted URI unknown params from 5 -> 10

2014-04-09  Liviu Chircu  <liviu@opensips.org>
	* [2f47930] :

	exec doc: update the OpenSIPS routes for each function

2014-04-08  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [e253486] :

	Spell checking :)

2014-04-08  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [0ba0bf0] :

	Fix bug in fetching all values of a RADIUS AVP.
	Using AVPs from script, you can now retrieve all the values (not only yhe first value of the RADIUS AVP).
	In order to maintain backward compatibility, the fetch_all_values module parameter was added - by default is off.

	Reported and tested by John Quick.

2014-04-08  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [8f0a150] :

	Complete documentation added for the Call Center module

2014-04-08  Razvan Crainea  <razvan@opensips.org>
	* [cee4794] :

	fix engage fixup function when called without any parameters
	Reported by Ovidiu Sas
	Closes #192

2014-04-08  Vlad Paiu  <vladpaiu@opensips.org>
	* [0f551f7] :

	Add topology_hiding() flag to also hide the callid for all requests/replies within a call

2014-04-06  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [222aea3] :

	Fix missing script function to control the agent login

2014-04-04  Liviu Chircu  <liviu@opensips.org>
	* [4148c3f] :

	hp malloc: properly release the hash lock on redundant shm_reallocs
		* e.g. shm_realloc(shm_malloc(16), 16);

2014-04-04  Liviu Chircu  <liviu@opensips.org>
	* [e56f327] :

	hp malloc: fix pkg max_real_used computation in hp_info()
		* update_shm_stats() should not be called at all

2014-04-03  Liviu Chircu  <liviu@opensips.org>
	* [19832c6] :

	hp malloc: do not write the pattern file when "mem_warming" = 0
		* also improve the logging at shutdown

2014-04-03  Razvan Crainea  <razvan@opensips.org>
	* [61388ea] :

	opensipsctl: change trapping logging method
	the operator '&>>' does not exist for all shells, used '2>&1 >>' instead

2014-04-03  Liviu Chircu  <liviu@opensips.org>
	* [f5da89d] :

	mi_xmlrpc: fix crash when flushing complex MI trees as strings
		* crash was replicated with "ul_dump" command at 51+ contacts
			- "reply_option" must be disabled

	This patch solves a couple of other issues:
		* properly mark completed nodes when "reply_option" = 0
		* a rare memory leak when flushing empty "mi_node"s

2014-04-03  Razvan Crainea  <razvan@opensips.org>
	* [24bd3a8] :

	fixed acc to raise the proper event when using acc_evi_request()
	Credits go to Brett Nemeroff for reporting and testing

2014-04-02  Vlad Paiu  <vladpaiu@opensips.org>
	* [edef0fd] :

	Added support for RFC 5031 urn:service type URIs

2014-04-01  Liviu Chircu  <liviu@opensips.org>
	* [6606d15] :

	drouting doc: properly specify the source IP check of is_from_gw()

2014-04-01  Liviu Chircu  <liviu@opensips.org>
	* [268955b] :

	hp malloc: differentiate the pkg and shm statistics code
	When HP_MALLOC is defined:
		* shm statistics are based on 32/64-bit atomic counters
				- the former logic is still available with HP_MALLOC_FAST_STATS
				- however, stat aggregation and the shm threshold checks should be done by a single process
		* pkg statistics are implemented similarly to the other allocators

2014-04-01  Liviu Chircu  <liviu@opensips.org>
	* [42c3d38] :

	core statistics: export a initialization checking function
		* this allows statistics-dependent code to test initialization
		* change all "shm_malloc" calls to "shm_malloc_unsafe"

		* ultimately, memory allocators are now able to make use of core stats

2014-04-01  Liviu Chircu  <liviu@opensips.org>
	* [b68cfba] :

	hp malloc statistics: fix incorrect stats when configuring split buckets

2014-03-30  Richard Fuchs  <rfuchs@sipwise.com>
	* [cc6e11b] :

	rtpengine: update docs

2014-03-30  Richard Fuchs  <rfuchs@sipwise.com>
	* [9e3b73b] :

	rtpengine: modernize interface, remove legacy interface

2014-03-30  Richard Fuchs  <rfuchs@sipwise.com>
	* [a11b409] :

	rtpengine: rename from rtpproxy-ng

2014-03-29  Răzvan Crainea  <razvan@opensips.org>
	* [b72f49f] :

	tcp: prevent tcp connections from overflowing the partitions vector

2014-03-28  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [3fad31c] :

	(part of TCP partitioning commit 0497150)

2014-03-28  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [0497150] :

	Partitioning support for TCP data structures
	In order to scale up with the number of connections (and operations per TCP conn), we need more hash tables and more locks.

2014-03-28  Richard Fuchs  <rfuchs@sipwise.com>
	* [007d105] :

	rtpproxy-ng: increase the receive buffer size to 64k

2014-03-28  Peter Lemenkov  <lemenkov@gmail.com>
	* [c361a9d] :

	Fix missing int_str magic

2014-03-28  Peter Lemenkov  <lemenkov@gmail.com>
	* [70358c0] :

	Remove unavailable pv_cache_get API

2014-03-28  Juha Heinanen  <jh@tutpro.com>
	* [65d857e] :

	modules/rtpproxy-ng: added setid_avp module param 	which can be used (instead of set_rtp_proxy_set function) to select 	used rtpproxy set

2014-03-28  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [d37ae66] :

	Fix recalculation of sending socket after local route
	Take into consideration the "force_send_socket" setting in local route.

2014-03-27  Liviu Chircu  <liviu@opensips.org>
	* [edd8721] :

	call_center: fix some db schema errors
		* reduce the cc_agents skills column size
		* fix some primary key issues in cc_flows and cc_agents
		* fix a couple of bad column names in cc_cdrs

2014-03-27  Liviu Chircu  <liviu@opensips.org>
	* [9f71064] :

	hp malloc: reorder some initializing operations
		* hp_mem_warming() fails if anything is allocated before
			(it cannot access the big fragment anymore)

2014-03-27  Liviu Chircu  <liviu@opensips.org>
	* [9ad2947] :

	hp malloc: fix shm statistics
		* processes now update fragment statistics for each bucket
		* the MI workers iterate and aggregate all memory information
		* the built-in maximum sampling rate is 200ms
			- repeating a fetch in < 200ms will return the same results
		* this patch also corrects a rare deadlock in hp_realloc
			- hp_realloc "growth" may deadlock with hp_malloc "shrink"
			- the best solution is to drop the "growth" realloc operation
			- this also merges well with the allocator fragmentation requirements

2014-03-27  Liviu Chircu  <liviu@opensips.org>
	* [dbf1b4b] :

	dispatcher init: initialize the old_data pointer
		* otherwise, the code will dereference a random pointer

2014-03-26  Bogdan Andrei IANCU  <bogdan@opensips.org>
	* [ff937c8] :

	Merge pull request #177 from wdoekes/wjd-fix_dialogaggr_bounds
	presence_dialoginfo: Fix bounds checking by using a helper function.

2014-03-26  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [ab22467] :

	Fixed detection of the module functions used in script - we need to look also into the logical expressions (like IF and WHILE conditions) Credits for reportind and helping with the troubleshooting go to Justin Zondagh

2014-03-26  Ovidiu Sas  <osas@voipembedded.com>
	* [980dfc8] :

	pi_http: fix HTTP escaping

2014-03-26  Ovidiu Sas  <osas@voipembedded.com>
	* [a1f454b] :

	pi_http: fix html output

2014-03-26  Ovidiu Sas  <osas@voipembedded.com>
	* [cbf2f11] :

	pi_http: samples regenerated

2014-03-26  Ovidiu Sas  <osas@voipembedded.com>
	* [d0ced79] :

	pi_http: update pi_framework_mod.xsl to generate new pi_http samples  - add link_cmd to the primary key for DB_UPDATE commands

2014-03-25  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [344cd96] :

	core: list_tcp_conns: compute properly the tmeout attr

2014-03-25  Liviu Chircu  <liviu@opensips.org>
	* [7d302c1] :

	hp malloc: reduce the built-in maximum split factor
		* dividing the list into too many smaller ones may actually hurt performance
		* this also reduces the minimum pkg and shm consumption by 3.4MB when
		  enabling HP_MALLOC

2014-03-25  Liviu Chircu  <liviu@opensips.org>
	* [faaca74] :

	hp malloc: fix the hash size macros
		* the old ones actually led to bad memory accesses within hp_malloc()

2014-03-25  Ovidiu Sas  <osas@voipembedded.com>
	* [ddaf004] :

	presence: subs_phtable_list - print expires attr in human readable format

2014-03-25  Ovidiu Sas  <osas@voipembedded.com>
	* [6ac1dc8] :

	core: list_tcp_conns: print Timeout attr in human readable format

2014-03-24  Ovidiu Sas  <osas@voipembedded.com>
	* [4e703a5] :

	httpd: fix compiler warning

2014-03-24  Ovidiu Sas  <osas@voipembedded.com>
	* [8925239] :

	mi: declare/move MI_DATE_BUF_LEN into the mi headers

2014-03-24  Nick Altmann  <nick.altmann@gmail.com>
	* [50bb192] :

	Update CentOS and RHEL/Fedora specs: fixed b2b submodule, added additional dependencies

2014-03-24  Liviu Chircu  <liviu@opensips.org>
	* [c9657d4] :

	sipmsgops: Fix trailing whitespaces when doing "codec_delete_re"
		* deleting the last payload attribute led to trailing whitespaces
		* some UAs would return "488 Not Acceptable Here" in this case

2014-03-24  Nick Altmann  <nick.altmann@gmail.com>
	* [be0d7d9] :

	Update centos spec file: fixed b2b submodule and removed some odd files from main module

2014-03-23  Nick Altmann  <nikbyte@users.noreply.github.com>
	* [41d677c] :

	Merge pull request #182 from fabriziopicconi/patch-12
	Update centos spec file: new modules included

2014-03-22  fabriziopicconi  <fabrizio.picconi@alice.it>
	* [e69cc9f] :

	New modules included
	Some new rpm optional modules are added:
	b2b_sca,call_center,mi_json,script_helper

2014-03-22  Liviu Chircu  <liviu@opensips.org>
	* [575c0db] :

	httpd: fix a couple of size_t printing warnings

2014-03-22  Liviu Chircu  <liviu@opensips.org>
	* [4461bea] :

	OpenSIPS version: detect and show the HP_MALLOC flag in the output

2014-03-22  Liviu Chircu  <liviu@opensips.org>
	* [dbf21a8] :

	Fix memory locking for F_MALLOC and DBG_QM_MALLOC
	    * commit 56b325be0a5 introduced some unsafe operations

2014-03-22  Nick Altmann  <nick.altmann@gmail.com>
	* [33f1166] :

	Update rpm specs for 1.11

2014-03-21  Liviu Chircu  <liviu@opensips.org>
	* [2535935] :

	tm: fix fr_inv_timeout bug from commit d244686dc5f
		* also improve code readability with a couple of macros

2014-03-21  Liviu Chircu  <liviu@opensips.org>
	* [83c97e8] :

	hp malloc: expose memory warming parameters in the script

2014-03-21  Liviu Chircu  <liviu@opensips.org>
	* [6246df1] :

	hp malloc: increase built-in PKG mem size to match the larger hash
		* otherwise, "opensips -V" would fail

2014-03-21  Liviu Chircu  <liviu@opensips.org>
	* [d504e9f] :

	hp malloc: rename functions, update headers, add some comments

2014-03-21  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [aefe6c1] :

	Fixed DH and EC compiling on openssl < 1.0.1 - credits go to Nick Altmann for reporting and testing the fix

2014-03-20  Liviu Chircu  <liviu@opensips.org>
	* [73999d4] :

	f_malloc: undo fragment count change from commit 56b325be0a

2014-03-20  Vlad Paiu  <vladpaiu@opensips.org>
	* [d800b09] :

	Changed trunk version to 1.12 dev

2014-03-20  Razvan Crainea  <razvan@opensips.org>
	* [7346457] :

	update changelog for 1.11

2014-03-20  Liviu Chircu  <liviu@opensips.org>
	* [1c7f225] :

	Makefile.conf.template: disable HP_MALLOC from the default setup

2014-03-20  Liviu Chircu  <liviu@opensips.org>
	* [56b325b] :

	core: High Performance Memory Allocator included
		* ideal for systems with high volumes of calls-per-second
		* fine-grained locking
		* tunable two-level hashing of free memory fragments
		* memory allocation pattern recording
		* fragmentation-on-startup
		* enable "HP_MALLOC" within "make menuconfig"

2014-03-20  Liviu Chircu  <liviu@opensips.org>
	* [5fbc82f] :

	atomic.h: add 64-bit atomic operations

2014-03-20  Razvan Crainea  <razvan@opensips.org>
	* [66354d1] :

	update specs for 1.11

2014-03-20  Vlad Paiu  <vladpaiu@opensips.org>
	* [fcc1ab5] :

	Changed 1.11 status to beta

2014-03-20  Răzvan Crainea  <razvan@opensips.org>
	* [1a0310f] :

	dialog: remove timeout_avp from docs

2014-03-20  Razvan Crainea  <razvan@opensips.org>
	* [c6b1a6a] :

	packaging: remove old debian-lenny

2014-03-20  Razvan Crainea  <razvan@opensips.org>
	* [d110328] :

	update credits for 1.11

2014-03-20  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [e2c7ece] :

	MYSQL DB migration script updated from 1.10 to 1.11 migration

2014-03-20  Ovidiu Sas  <osas@voipembedded.com>
	* [bffa103] :

	tm: fix README

2014-03-20  Ovidiu Sas  <osas@voipembedded.com>
	* [6d41b53] :

	tm: update doc for "own_timer_proc" parameter  - it defines the number of timer procs  - completes commit f001f098a0cf3996655e1ca47675b15d2f69c984

2014-03-20  Răzvan Crainea  <razvan@opensips.org>
	* [ff3f11a] :

	rtpproxy: update documentation

2014-03-20  Razvan Crainea  <razvan@opensips.org>
	* [3c36a16] :

	rtpproxy: rename script functions
	* engage_rtp_proxy() is deprecated and replaced by rtpproxy_engage()
	* unforce_rtp_proxy() is deprecated and replaced by rtpproxy_unforce()
	* start_recording() is deprecated and replaced by rtpproxy_start_recording()

2014-03-20  Razvan Crainea  <razvan@opensips.org>
	* [00c42e3] :

	call_center: fix compile warning for unsigned printing

2014-03-20  Ovidiu Sas  <osas@voipembedded.com>
	* [c2b3726] :

	drouting: use constans for indexing values while loading dr_rules table

2014-03-20  Razvan Crainea  <razvan@opensips.org>
	* [7b3ead2] :

	makefile: prevent Makefile.conf from being ovewritten

2014-03-20  Ovidiu Sas  <osas@voipembedded.com>
	* [bdda717] :

	Merge branch 'master' of github.com:OpenSIPS/opensips

2014-03-20  Ovidiu Sas  <osas@voipembedded.com>
	* [f552335] :

	mi_xmlrpc_ng: make module opensips-cp compatible

2014-03-20  Razvan Crainea  <razvan@opensips.org>
	* [6d76fe3] :

	compile: add Makefile.conf dependency

2014-03-20  Ovidiu Sas  <osas@voipembedded.com>
	* [ca046ae] :

	drouting: use constans for indexing values while loading dr_carriers table

2014-03-20  Vlad Paiu  <vladpaiu@opensips.org>
	* [a6f42db] :

	Fixed compile warning Module compiles even with STATISTICS support disabled

2014-03-20  Vlad Paiu  <vladpaiu@opensips.org>
	* [8c83b13] :

	fixed sched_yield() warning

2014-03-20  Ovidiu Sas  <osas@voipembedded.com>
	* [ecbc003] :

	drouting: use constans for indexing values while loading dr_gateways table

2014-03-20  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [791ab01] :

	fixed compile warning

2014-03-20  Vlad Paiu  <vladpaiu@opensips.org>
	* [f14766a] :

	Fixed free which lead to bogus memory access:

2014-03-20  Vlad Paiu  <vladpaiu@opensips.org>
	* [804c9f7] :

	Fixed compile warning

2014-03-20  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [5492dbf] :

	Code cleanup - removed variables which are not actually used for anything

2014-03-20  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [8ad0901] :

	Fixed return code in case of error

2014-03-20  Bogdan-Andrei Iancu  <bogdan@opensips.org>
	* [a4cdbcb] :

	Added db schema for the Call Center module; DB stuff re-generated

2014-03-20  Ovidiu Sas  <osas@voipembedded.com>
	* [4f5b87a] :

	pua_usrloc: fix error: SCB_RUN_ALL undeclared (first use in this function)

